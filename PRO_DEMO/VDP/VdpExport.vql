# ####################################### 
# Generated by Solution Manager Deployment on 2018-11-13 19:22:41.519
# Generated with Denodo Platform 7.0 update 20181011.

# #######################################
# USER CREATION
# #######################################
DROP USER IF EXISTS maarten;

CREATE USER maarten 'X7kVRGJoyRoo4e8GRmdPcMmFKJ1O3bvo+Fc4lTymrcMO8eitwWy7vDn/5vNty4xgapkOq8vXXk0IcZ7gDKZQVNA3G5iJntsr'  ENCRYPTED SHA512  '';

# #######################################
# ROLE CREATION
# #######################################
# #######################################
# I18N MAPS
# #######################################
CONNECT DATABASE admin;

DROP MAP i18n IF EXISTS be_bnpp_am CASCADE;

CREATE MAP i18n be_bnpp_am (
    'country' = 'BE'
    'datepattern' = 'dd-MM-yyyy HH:mm:ss'
    'datesubtypepattern' = 'dd-MM-yyyy'
    'doubledecimalposition' = '2'
    'doubledecimalseparator' = ','
    'doublegroupseparator' = '.'
    'language' = 'en'
    'timesubtypepattern' = 'HH:mm:ss'
    'timezone' = 'Europe/Brussels'
);

DROP MAP i18n IF EXISTS monitor_vdp_queries_v2 CASCADE;

CREATE MAP i18n monitor_vdp_queries_v2 (
    'country' = 'US'
    'currency' = 'US DOLLAR'
    'currencydecimalposition' = '2'
    'currencydecimalseparator' = '.'
    'currencygroupseparator' = ''
    'currencysymbol' = ''
    'datepattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS'
    'doubledecimalposition' = '2'
    'doubledecimalseparator' = '.'
    'doublegroupseparator' = ''
    'language' = 'en'
    'moneypattern' = '###,###,###.##'
    'timepattern' = 'DAY'
    'timezone' = 'PST'
);

DROP MAP i18n IF EXISTS monitor_vdp_resources_v2 CASCADE;

CREATE MAP i18n monitor_vdp_resources_v2 (
    'country' = 'US'
    'currency' = 'US DOLLAR'
    'currencydecimalposition' = '2'
    'currencydecimalseparator' = '.'
    'currencygroupseparator' = ''
    'currencysymbol' = ''
    'datepattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS'
    'doubledecimalposition' = '2'
    'doubledecimalseparator' = '.'
    'doublegroupseparator' = ''
    'language' = 'en'
    'moneypattern' = '###,###,###.##'
    'timepattern' = 'DAY'
    'timezone' = 'PST'
);

CLOSE;

# #######################################
# CONFIGURATION PROPERTIES
# #######################################

CONNECT DATABASE admin;

SET 'com.denodo.security.file.privilege.generalaccess' = '*';

SET 'com.denodo.vdb.cache.cacheMaintainerPeriodInSecs' = '2160021600';

SET 'com.denodo.vdb.cache.cacheMaintenance' = 'ON';

SET 'com.denodo.vdb.cache.cacheStatus' = 'ON';

SET 'com.denodo.vdb.cache.jdbc.cacheDataSourceName' = 'vdpcachedatasource';

SET 'com.denodo.vdb.cache.jdbc.cacheDatabaseDataSourceName' = 'admin';

SET 'com.denodo.vdb.cache.jdbc.customCacheDataSourceName' = 'customvdpcachedatasource';

SET 'com.denodo.vdb.cache.jdbc.derbyCachePort' = '1527';

SET 'com.denodo.vdb.cache.jdbc.derbyCacheRemoteAccess' = 'OFF';

SET 'com.denodo.vdb.cache.timeToLiveInSecs' = '3600';

SET 'com.denodo.vdb.catalog.database.identifiersCharset' = 'restricted';

SET 'com.denodo.vdb.catalog.user.User.checkViewRestrictionAlways' = 'true';

SET 'com.denodo.vdb.catalog.user.User.enableCheckViewRestrictionAlways' = 'true';

SET 'com.denodo.vdb.engine.RowQueueSizeInMB' = '10';

SET 'com.denodo.vdb.engine.resource.queryMemoryLimit' = '200';

SET 'com.denodo.vdb.engine.session.restriction.ResourceManagerEngine.resourceManagerStatus' = 'OFF';

SET 'com.denodo.vdb.engine.swap.SwapManager.maxBlockSizeInKB' = '200';

SET 'com.denodo.vdb.engine.swap.SwapManager.swappingResultMaxSizeInMB' = '50';

SET 'com.denodo.vdb.engine.swap.SwapManager.swappingStatus' = 'ON';

SET 'com.denodo.vdb.engine.thread.ThreadPool.checkoutTime' = '30000';

SET 'com.denodo.vdb.engine.thread.ThreadPool.expirationTime' = '600000';

SET 'com.denodo.vdb.engine.thread.ThreadPool.maxThreads' = '300';

SET 'com.denodo.vdb.engine.thread.ThreadPool.sleepTime' = '300000';

SET 'com.denodo.vdb.engine.thread.ThreadPool.timeout' = '43200000';

SET 'com.denodo.vdb.engine.wrapper.raw.ldap.LDAPAccess.LDAPDefaultPageSize' = '1000';

SET 'com.denodo.vdb.interpreter.execution.SelectAction.costoptimization' = 'true';

SET 'com.denodo.vdb.interpreter.execution.SelectAction.dataMovement' = 'true';

SET 'com.denodo.vdb.interpreter.execution.SelectAction.simplify' = 'true';

SET 'com.denodo.vdb.interpreter.execution.processor.VDBActionProcessor.concurrentQueriesLimit' = 'OFF';

SET 'com.denodo.vdb.interpreter.execution.processor.VDBActionProcessor.maxConcurrentQueries' = '100';

SET 'com.denodo.vdb.interpreter.execution.processor.VDBActionProcessor.maxWaitingQueries' = '500';

SET 'com.denodo.vdb.interpreter.execution.processor.VDBActionProcessor.waitingQueriesLimit' = 'OFF';

SET 'com.denodo.vdb.misc.I18nParametersManager.i18nDefault' = 'be_euro';

SET 'com.denodo.vdb.proxy.proxyHost' = '';

SET 'com.denodo.vdb.proxy.proxyPacUri' = '';

SET 'com.denodo.vdb.proxy.proxyPassword' = 'KEP8W+ljVDEBuJDMzFR4OmrHx8cGwPTJpF1MO1ObPsyuMwt5yo5/eyjqgKlmiOU2+0VTcibodV3/sQvwKbJ49V98IFoBdTWfdN+pBsPftJzAvVRtpYbqy7gHwPb7HhVR';

SET 'com.denodo.vdb.proxy.proxyPort' = '';

SET 'com.denodo.vdb.proxy.proxyStatus' = 'OFF';

SET 'com.denodo.vdb.proxy.proxyUser' = '';

SET 'com.denodo.vdb.vdbinterface.server.VDBManagerImpl.factoryPort' = '9997';

SET 'com.denodo.vdb.vdbinterface.server.VDBManagerImpl.odbcPort' = '9996';

SET 'com.denodo.vdb.vdbinterface.server.VDBManagerImpl.registryPort' = '9999';

SET 'com.denodo.vdb.vdbinterface.server.VDBManagerImpl.registryURL' = 'localhost';

SET 'com.denodo.vdb.vdbinterface.server.VDBManagerImpl.shutdownPort' = '9998';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.encryptedPassword' = 'true';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.environment' = 'dev';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.includeAlwaysDependentGlobalElements' = 'false';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.localRepositoriesHome' = '/opt/denodo7/work/vdp/repository';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.password' = 'O9eB3TiVb4/suA019Utlp1/1FGGH4OnRwe0IIplFipphJKwcgQcwYeT7SdkBtRVjucyrz63RETM5DEtamYQvfbAFkLmk4PHWda40zGRwxbxoMj/oWRYZ91KgRswc+IIV1Vi71hAqg+XyEqhFsKnoYg==';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.system' = 'git';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.url' = 'https://github.com/InfoRoadDemo/tst_bnp';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.useUserAndPassword' = 'true';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.useVCS' = 'true';

SET 'com.denodo.vdb.vdbinterface.server.vcs.VCSConfigurationManager.user' = 'InfoRoadDemo';

SET 'com.denodo.wsgenerator.restfulws.timezone' = 'GMT';

SET 'java.env.DENODO_OPTS_START' = '-mx1024m -XX:NewRatio=4';

SET 'java.env.DENODO_OPTS_STOP' = '';

SET 'queryOptimization.parallelProcessing.customDataSource.dataSourceName' = '';

SET 'queryOptimization.parallelProcessing.customDataSource.databaseName' = '';

SET 'queryOptimization.parallelProcessing.dataSource' = 'cache';

SET 'queryOptimization.parallelProcessing.enabled' = 'true';

SET 'storedProcedures.defaultChunkSize' = '100';

SET 'storedProcedures.defaultChunkTimeout' = '80000';

SET 'storedProcedures.defaultQueryTimeout' = '80000';

SET 'userAgent' = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.10';

WEBCONTAINER SET 'com.denodo.tomcat.http.port' = '9090';

WEBCONTAINER SET 'com.denodo.tomcat.jmx.port' = '9098';

WEBCONTAINER SET 'com.denodo.tomcat.jmx.rmi.port' = '9097';

WEBCONTAINER SET 'com.denodo.tomcat.shutdown.port' = '9099';

WEBCONTAINER SET 'java.env.DENODO_OPTS_START' = '-Xmx1024m -Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true -Dorg.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH=true';

UPDATE SCRIPTS;

CLOSE;


# 0 ====================================================================

# #######################################
# DATABASE of admin
# #######################################
CONNECT DATABASE admin;

# #######################################
# LISTENERS JMS of admin
# #######################################
# No listeners jms in database admin
# #######################################
# DATASOURCES of admin
# #######################################
DROP DATASOURCE JDBC IF EXISTS vdpcachedatasource CASCADE;

CREATE DATASOURCE JDBC vdpcachedatasource
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=cachedb'
    USERNAME = 'admin'
    USERPASSWORD = 'Y+MTGoKjDMSoAMPnE4EgzGbcRXzVbvqE/hfyQyPnK6zr7KVVGB8VzcK0mp0XWW18lWNkAoj6AfrWEoQx4FmwsOWyTnAQSrhdbY+evZK+B+XO3CuPyHV8e5Y4CO4ghPNu' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, firstdayofweek, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, lastdayofweek, len, ln, log, lower, ltrim, mod, mult, nextweekday, now, nullif, pi, position, pow, power, previousweekday, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date(literal), to_localdate(literal), to_time(literal), to_timestamp(literal), to_timestamptz(literal), trim, trunc, upper, xmlquery, xpath)
    );

CHOWN admin DATASOURCE JDBC vdpcachedatasource LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE admin
  CHARSET DEFAULT;

# #######################################
# WRAPPERS of admin
# #######################################
# No wrappers in database admin
# #######################################
# STORED PROCEDURES of admin
# #######################################
# No stored procedures in database admin
# #######################################
# TYPES of admin
# #######################################
DROP TYPE IF EXISTS _procedure_catalog_permissions_custompermissions_register CASCADE;

CREATE TYPE _procedure_catalog_permissions_custompermissions_register AS REGISTER OF (custompermissions:text);

DROP TYPE IF EXISTS _procedure_catalog_permissions_restriction_register CASCADE;

CREATE TYPE _procedure_catalog_permissions_restriction_register AS REGISTER OF (sensitivefields:text, condition:text, action:text);

DROP TYPE IF EXISTS _register_boolean CASCADE;

CREATE TYPE _register_boolean AS REGISTER OF (value:boolean);

DROP TYPE IF EXISTS _register_text CASCADE;

CREATE TYPE _register_text AS REGISTER OF (value:text);

DROP TYPE IF EXISTS _array_register_boolean CASCADE;

CREATE TYPE _array_register_boolean AS ARRAY OF _register_boolean;

DROP TYPE IF EXISTS _array_register_text CASCADE;

CREATE TYPE _array_register_text AS ARRAY OF _register_text;

DROP TYPE IF EXISTS _procedure_catalog_permissions_custompermissions_array CASCADE;

CREATE TYPE _procedure_catalog_permissions_custompermissions_array AS ARRAY OF _procedure_catalog_permissions_custompermissions_register;

DROP TYPE IF EXISTS _procedure_catalog_permissions_rowpermissions_array CASCADE;

CREATE TYPE _procedure_catalog_permissions_rowpermissions_array AS ARRAY OF _procedure_catalog_permissions_restriction_register;

# #######################################
# MAPS of admin
# #######################################
# No maps in database admin
# #######################################
# BASE VIEWS of admin
# #######################################
# No base views in database admin
# #######################################
# VIEWS of admin
# #######################################
# No views in database admin
# #######################################
# ASSOCIATIONS of admin
# #######################################
# No associations in database admin
# #######################################
# WEBSERVICES of admin
# #######################################
# No web services in database admin
# #######################################
# WIDGETS of admin
# #######################################
# No widgets in database admin
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of admin
# #######################################
# No deployed web services in database admin
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of admin
# #######################################
# No deployed widgets in database admin
# #######################################
# Closing connection with database admin
# #######################################
CLOSE;


# 1 ====================================================================

# #######################################
# DATABASE of demo
# #######################################
DROP DATABASE IF EXISTS demo;

CREATE DATABASE demo '';

CONNECT DATABASE demo;

# #######################################
# FOLDERS of demo
# #######################################
CREATE OR REPLACE FOLDER '/01 - Data Sources' ;

CHOWN admin FOLDER '/01 - Data Sources';

CREATE OR REPLACE FOLDER '/02 - Base Views' ;

CHOWN admin FOLDER '/02 - Base Views';

CREATE OR REPLACE FOLDER '/02 - base views/SQLs' ;

CHOWN admin FOLDER '/02 - base views/SQLs';

CREATE OR REPLACE FOLDER '/04 - Associations' ;

CHOWN admin FOLDER '/04 - Associations';

CREATE OR REPLACE FOLDER '/04 - associations/Fetched from sources' ;

CHOWN admin FOLDER '/04 - associations/Fetched from sources';

CREATE OR REPLACE FOLDER '/05 - Webservices' ;

CHOWN admin FOLDER '/05 - Webservices';

# #######################################
# LISTENERS JMS of demo
# #######################################
# No listeners jms in database demo
# #######################################
# DATASOURCES of demo
# #######################################
DROP DATASOURCE JDBC IF EXISTS ds_ms_sql_server CASCADE;

CREATE DATASOURCE JDBC ds_ms_sql_server
    FOLDER = '/01 - data sources'
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=testdb'
    USERNAME = 'admin'
    USERPASSWORD = 'Ysbjic0EA6Lztba3ec1ZZHen0adJbNb0MoWnzRSr3NAaRHKLe2O6RjZTIvFYj+BWPg0hGcJ/DJEJMoi5eIdClJ+/uyLIVrbdEcJvLTmG6jbmHlaBRtvmWgmqKn87i5Fi' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, firstdayofweek, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, lastdayofweek, len, ln, log, lower, ltrim, mod, mult, nextweekday, now, nullif, pi, position, pow, power, previousweekday, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date(literal), to_localdate(literal), to_time(literal), to_timestamp(literal), to_timestamptz(literal), trim, trunc, upper, xmlquery, xpath)
    );

CHOWN admin DATASOURCE JDBC ds_ms_sql_server LASTMODIFICATIONUSER admin;

DROP DATASOURCE JDBC IF EXISTS ds_mysql CASCADE;

CREATE DATASOURCE JDBC ds_mysql
    FOLDER = '/01 - data sources'
    DRIVERCLASSNAME = 'com.mysql.jdbc.Driver'
    DATABASEURI = 'jdbc:mysql://192.168.187.100:3306/demo'
    USERNAME = 'demo'
    USERPASSWORD = 'aEAp0o5ohKq2A8Nf8pXOpQhfXt6iLdiWtjBBKdXG066dG7zQTBMuc3BbgoEEw5WIrfeEHKmLQetL7pk2/2xqSYtXEKWT+r4hIhMTCmEllpNdGHOvQlaworxRoPNBCPzh' ENCRYPTED
    CLASSPATH = 'mysql-5'
    DATABASENAME = 'mysql'
    DATABASEVERSION = '5'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    PROPERTIES ('serverTimezone'='GMT', 'vdp.streamRows'='yes')
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 200
        USEEXTERNALTABLES ( 
            ONMOVEREAD = false,
            ONMOVEWRITE = true
        )
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, len, ln, log, lower, ltrim, max, min, mod, mult, now, nullif, pi, position, pow, power, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sql_trim, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date, to_localdate, to_time, to_timestamp, trim, upper)
    );

CHOWN admin DATASOURCE JDBC ds_mysql LASTMODIFICATIONUSER admin;

DROP DATASOURCE JSON IF EXISTS ds_rest_current_weather CASCADE;

CREATE DATASOURCE JSON ds_rest_current_weather
    FOLDER = '/01 - data sources'
    ROUTE HTTP 'http.CommonsHttpClientConnection,120000' GET 'https://samples.openweathermap.org/data/2.5/weather?q=@city,@country'
    AUTHENTICATION OFF
    PROXY OFF;

CHOWN admin DATASOURCE JSON ds_rest_current_weather LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE demo
  CHARSET DEFAULT;

ALTER DATABASE demo
  COST OPTIMIZATION ON;

# #######################################
# WRAPPERS of demo
# #######################################
DROP WRAPPER JDBC IF EXISTS bv_sqlq_randomdata CASCADE;

CREATE WRAPPER JDBC bv_sqlq_randomdata
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='RandomData' 
    OUTPUTSCHEMA (
        rowid = 'RowId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        someint = 'SomeInt' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        somebit = 'SomeBit' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  SORTABLE,
        somevarchar = 'SomeVarchar' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        somedatetime = 'SomeDateTime' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        somenumeric = 'SomeNumeric' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='16', sourcetypeid='2', sourcetypename='numeric')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_sqlq_randomdata LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_customer CASCADE;

CREATE WRAPPER JDBC bv_sqls_customer
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Customer' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        firstname = 'FirstName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        lastname = 'LastName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        city = 'City' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        country = 'Country' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        phone = 'Phone' :'java.lang.String' (OPT) (sourcetypesize='20', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE
    )
    CONSTRAINT 'PK_CUSTOMER' PRIMARY KEY ( 'Id' )
    INDEX 'PK_CUSTOMER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexCustomerName' OTHER ( 'LastName' , 'FirstName' );

CHOWN admin WRAPPER JDBC bv_sqls_customer LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_order CASCADE;

CREATE WRAPPER JDBC bv_sqls_order
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Order' ESCAPE
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        orderdate = 'OrderDate' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  NOT NULL SORTABLE,
        ordernumber = 'OrderNumber' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        customerid = 'CustomerId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        totalamount = 'TotalAmount' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  SORTABLE
    )
    CONSTRAINT 'PK_ORDER' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_ORDER_REFERENCE_CUSTOMER' FOREIGN KEY ( 'CustomerId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Customer'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_ORDER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexOrderCustomerId' OTHER ( 'CustomerId' )
    INDEX 'IndexOrderOrderDate' OTHER ( 'OrderDate' );

CHOWN admin WRAPPER JDBC bv_sqls_order LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_orderitem CASCADE;

CREATE WRAPPER JDBC bv_sqls_orderitem
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='OrderItem' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        orderid = 'OrderId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        productid = 'ProductId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        unitprice = 'UnitPrice' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  NOT NULL SORTABLE,
        quantity = 'Quantity' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PK_ORDERITEM' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_ORDERITE_REFERENCE_ORDER' FOREIGN KEY ( 'OrderId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Order'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    CONSTRAINT 'FK_ORDERITE_REFERENCE_PRODUCT' FOREIGN KEY ( 'ProductId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Product'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_ORDERITEM' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexOrderItemOrderId' OTHER ( 'OrderId' )
    INDEX 'IndexOrderItemProductId' OTHER ( 'ProductId' );

CHOWN admin WRAPPER JDBC bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_product CASCADE;

CREATE WRAPPER JDBC bv_sqls_product
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Product' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        productname = 'ProductName' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        supplierid = 'SupplierId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        unitprice = 'UnitPrice' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  SORTABLE,
        package = 'Package' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        isdiscontinued = 'IsDiscontinued' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PK_PRODUCT' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_PRODUCT_REFERENCE_SUPPLIER' FOREIGN KEY ( 'SupplierId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Supplier'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_PRODUCT' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexProductName' OTHER ( 'ProductName' )
    INDEX 'IndexProductSupplierId' OTHER ( 'SupplierId' );

CHOWN admin WRAPPER JDBC bv_sqls_product LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_randomdata_big CASCADE;

CREATE WRAPPER JDBC bv_sqls_randomdata_big
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='RandomData_big' 
    OUTPUTSCHEMA (
        rowid = 'RowId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        someint = 'SomeInt' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        somebit = 'SomeBit' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  SORTABLE,
        somevarchar = 'SomeVarchar' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        somedatetime = 'SomeDateTime' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        somenumeric = 'SomeNumeric' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='16', sourcetypeid='2', sourcetypename='numeric')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_sqls_randomdata_big LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_supplier CASCADE;

CREATE WRAPPER JDBC bv_sqls_supplier
    FOLDER = '/02 - base views/sqls'
    DATASOURCENAME=ds_ms_sql_server
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Supplier' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        companyname = 'CompanyName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        contactname = 'ContactName' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        contacttitle = 'ContactTitle' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        city = 'City' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        country = 'Country' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        phone = 'Phone' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        fax = 'Fax' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE
    )
    CONSTRAINT 'PK_SUPPLIER' PRIMARY KEY ( 'Id' )
    INDEX 'PK_SUPPLIER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexSupplierCountry' OTHER ( 'Country' )
    INDEX 'IndexSupplierName' OTHER ( 'CompanyName' );

CHOWN admin WRAPPER JDBC bv_sqls_supplier LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS current_dept_emp CASCADE;

CREATE WRAPPER JDBC current_dept_emp
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='current_dept_emp' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        dept_no = 'dept_no' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='4', description='', sourcetypeid='1', sourcetypename='CHAR')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  SORTABLE
    );

CHOWN admin WRAPPER JDBC current_dept_emp LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS departments CASCADE;

CREATE WRAPPER JDBC departments
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='departments' 
    OUTPUTSCHEMA (
        dept_no = 'dept_no' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='4', description='', sourcetypeid='1', sourcetypename='CHAR')  NOT NULL SORTABLE,
        dept_name = 'dept_name' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='40', description='', sourcetypeid='12', sourcetypename='VARCHAR')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'dept_no' )
    INDEX 'dept_name' OTHER UNIQUE ( 'dept_name' )
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'dept_no' );

CHOWN admin WRAPPER JDBC departments LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS dept_emp CASCADE;

CREATE WRAPPER JDBC dept_emp
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='dept_emp' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        dept_no = 'dept_no' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='4', description='', sourcetypeid='1', sourcetypename='CHAR')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'dept_no' )
    CONSTRAINT 'dept_emp_ibfk_1' FOREIGN KEY ( 'emp_no' ) 
    REFERENCES 'employees'.'employees'( 'emp_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    CONSTRAINT 'dept_emp_ibfk_2' FOREIGN KEY ( 'dept_no' ) 
    REFERENCES 'employees'.'departments'( 'dept_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'emp_no' , 'dept_no' )
    INDEX 'dept_no' OTHER ( 'dept_no' );

CHOWN admin WRAPPER JDBC dept_emp LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS dept_emp_latest_date CASCADE;

CREATE WRAPPER JDBC dept_emp_latest_date
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='dept_emp_latest_date' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  SORTABLE
    );

CHOWN admin WRAPPER JDBC dept_emp_latest_date LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS dept_manager CASCADE;

CREATE WRAPPER JDBC dept_manager
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='dept_manager' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        dept_no = 'dept_no' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='4', description='', sourcetypeid='1', sourcetypename='CHAR')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'dept_no' )
    CONSTRAINT 'dept_manager_ibfk_1' FOREIGN KEY ( 'emp_no' ) 
    REFERENCES 'employees'.'employees'( 'emp_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    CONSTRAINT 'dept_manager_ibfk_2' FOREIGN KEY ( 'dept_no' ) 
    REFERENCES 'employees'.'departments'( 'dept_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'emp_no' , 'dept_no' )
    INDEX 'dept_no' OTHER ( 'dept_no' );

CHOWN admin WRAPPER JDBC dept_manager LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS employees CASCADE;

CREATE WRAPPER JDBC employees
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='employees' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        birth_date = 'birth_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE,
        first_name = 'first_name' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='14', description='', sourcetypeid='12', sourcetypename='VARCHAR')  NOT NULL SORTABLE,
        last_name = 'last_name' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='16', description='', sourcetypeid='12', sourcetypename='VARCHAR')  NOT NULL SORTABLE,
        gender = 'gender' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='1', description='', sourcetypeid='1', sourcetypename='ENUM')  NOT NULL NOT SORTABLE,
        hire_date = 'hire_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' )
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'emp_no' );

CHOWN admin WRAPPER JDBC employees LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS salaries CASCADE;

CREATE WRAPPER JDBC salaries
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='salaries' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        salary = 'salary' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'from_date' )
    CONSTRAINT 'salaries_ibfk_1' FOREIGN KEY ( 'emp_no' ) 
    REFERENCES 'employees'.'employees'( 'emp_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'emp_no' , 'from_date' );

CHOWN admin WRAPPER JDBC salaries LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS titles CASCADE;

CREATE WRAPPER JDBC titles
    FOLDER = '/02 - base views'
    DATASOURCENAME=ds_mysql
    CATALOGNAME='employees' 
    RELATIONNAME='titles' 
    OUTPUTSCHEMA (
        emp_no = 'emp_no' :'java.lang.Integer' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='4', sourcetypename='INT')  NOT NULL SORTABLE,
        title = 'title' :'java.lang.String' (OPT) (sourcetyperadix='10', sourcetypesize='50', description='', sourcetypeid='12', sourcetypename='VARCHAR')  NOT NULL SORTABLE,
        from_date = 'from_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  NOT NULL SORTABLE,
        to_date = 'to_date' :'java.time.LocalDate' (OPT) (sourcetyperadix='10', sourcetypesize='10', description='', sourcetypeid='91', sourcetypename='DATE')  SORTABLE
    )
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'title' , 'from_date' )
    CONSTRAINT 'titles_ibfk_1' FOREIGN KEY ( 'emp_no' ) 
    REFERENCES 'employees'.'employees'( 'emp_no' )  ON UPDATE NO ACTION  ON DELETE CASCADE NOT DEFERRABLE 
    INDEX 'PRIMARY' CLUSTER UNIQUE PRIMARY ( 'emp_no' , 'title' , 'from_date' );

CHOWN admin WRAPPER JDBC titles LASTMODIFICATIONUSER admin;

DROP WRAPPER JSON IF EXISTS ds_rest_current_weather CASCADE;

CREATE WRAPPER JSON ds_rest_current_weather
    FOLDER = '/01 - data sources'
    DATASOURCENAME=ds_rest_current_weather
    TUPLEROOT '/JSONFile'
    OUTPUTSCHEMA (jsonfile = 'JSONFile' : REGISTER OF (
        country = 'COUNTRY' : 'java.lang.String' (OBL) (DEFAULTVALUE='be') EXTERN,
        city = 'CITY' : 'java.lang.String' (OBL) (DEFAULTVALUE='Brussels') EXTERN,
        coord = 'coord' : REGISTER OF (
            lon = 'lon' : 'java.lang.Double',
            lat = 'lat' : 'java.lang.Double'
        ),
        weather = 'weather' : ARRAY OF (
            weather = 'weather' : REGISTER OF (
                id = 'id' : 'java.lang.Integer',
                main = 'main' : 'java.lang.String',
                description = 'description' : 'java.lang.String',
                icon = 'icon' : 'java.lang.String'
            )
        ),
        base_0 = 'base' : 'java.lang.String',
        main = 'main' : REGISTER OF (
            temp = 'temp' : 'java.lang.Double',
            pressure = 'pressure' : 'java.lang.Integer',
            humidity = 'humidity' : 'java.lang.Integer',
            temp_min = 'temp_min' : 'java.lang.Double',
            temp_max = 'temp_max' : 'java.lang.Double'
        ),
        visibility = 'visibility' : 'java.lang.Integer',
        wind = 'wind' : REGISTER OF (
            speed = 'speed' : 'java.lang.Double',
            deg = 'deg' : 'java.lang.Integer'
        ),
        clouds = 'clouds' : REGISTER OF (
            all_0 = 'all' : 'java.lang.Integer'
        ),
        dt = 'dt' : 'java.lang.Integer',
        sys = 'sys' : REGISTER OF (
            type = 'type' : 'java.lang.Integer',
            id = 'id' : 'java.lang.Integer',
            message = 'message' : 'java.lang.Double',
            country = 'country' : 'java.lang.String',
            sunrise = 'sunrise' : 'java.lang.Integer',
            sunset = 'sunset' : 'java.lang.Integer'
        ),
        id = 'id' : 'java.lang.Integer',
        name = 'name' : 'java.lang.String',
        cod = 'cod' : 'java.lang.Integer'
    )
    );

CHOWN admin WRAPPER JSON ds_rest_current_weather LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of demo
# #######################################
# No stored procedures in database demo
# #######################################
# TYPES of demo
# #######################################
DROP TYPE IF EXISTS ds_rest_current_weather_clouds CASCADE;

CREATE TYPE ds_rest_current_weather_clouds AS REGISTER OF (all_0:int);

DROP TYPE IF EXISTS ds_rest_current_weather_coord CASCADE;

CREATE TYPE ds_rest_current_weather_coord AS REGISTER OF (lon:double, lat:double);

DROP TYPE IF EXISTS ds_rest_current_weather_main CASCADE;

CREATE TYPE ds_rest_current_weather_main AS REGISTER OF (temp:double (sourcetypedecimals = '2', sourcetypesize, sourcetypeid = '8'), pressure:int, humidity:int, temp_min:double, temp_max:double);

DROP TYPE IF EXISTS ds_rest_current_weather_sys CASCADE;

CREATE TYPE ds_rest_current_weather_sys AS REGISTER OF (type:int, id:int, message:double, country:text, sunrise:int, sunset:int);

DROP TYPE IF EXISTS ds_rest_current_weather_weather_weather CASCADE;

CREATE TYPE ds_rest_current_weather_weather_weather AS REGISTER OF (id:int, main:text, description:text, icon:text);

DROP TYPE IF EXISTS ds_rest_current_weather_wind CASCADE;

CREATE TYPE ds_rest_current_weather_wind AS REGISTER OF (speed:double, deg:int);

DROP TYPE IF EXISTS ds_rest_current_weather_weather CASCADE;

CREATE TYPE ds_rest_current_weather_weather AS ARRAY OF ds_rest_current_weather_weather_weather;

# #######################################
# MAPS of demo
# #######################################
# No maps in database demo
# #######################################
# BASE VIEWS of demo
# #######################################
DROP VIEW IF EXISTS bv_mysql_current_dept_emp CASCADE;

CREATE TABLE bv_mysql_current_dept_emp I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        dept_no:text (sourcetyperadix = '10', sourcetypesize = '4', description = '', sourcetypeid = '1'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD current_dept_emp(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD dept_no (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (dept_no, emp_no, from_date, to_date
        )
        WRAPPER (jdbc current_dept_emp)
    );

CHOWN admin VIEW bv_mysql_current_dept_emp LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_departments CASCADE;

CREATE TABLE bv_mysql_departments I18N be_euro (
        dept_no:text (sourcetyperadix = '10', sourcetypesize = '4', description = '', sourcetypeid = '1'), 
        dept_name:text (sourcetyperadix = '10', sourcetypesize = '40', description = '', sourcetypeid = '12')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'dept_no' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD departments(
        I18N be_euro
        CONSTRAINTS (
             ADD dept_no (any) OPT ANY
             ADD dept_name (any) OPT ANY
        )
        OUTPUTLIST (dept_name, dept_no
        )
        WRAPPER (jdbc departments)
    );

CHOWN admin VIEW bv_mysql_departments LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_dept_emp CASCADE;

CREATE TABLE bv_mysql_dept_emp I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        dept_no:text (sourcetyperadix = '10', sourcetypesize = '4', description = '', sourcetypeid = '1'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'dept_no' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD dept_emp(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD dept_no (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (dept_no, emp_no, from_date, to_date
        )
        WRAPPER (jdbc dept_emp)
    );

CHOWN admin VIEW bv_mysql_dept_emp LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_dept_emp_latest_date CASCADE;

CREATE TABLE bv_mysql_dept_emp_latest_date I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD dept_emp_latest_date(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (emp_no, from_date, to_date
        )
        WRAPPER (jdbc dept_emp_latest_date)
    );

CHOWN admin VIEW bv_mysql_dept_emp_latest_date LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_dept_manager CASCADE;

CREATE TABLE bv_mysql_dept_manager I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        dept_no:text (sourcetyperadix = '10', sourcetypesize = '4', description = '', sourcetypeid = '1'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'dept_no' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD dept_manager(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD dept_no (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (dept_no, emp_no, from_date, to_date
        )
        WRAPPER (jdbc dept_manager)
    );

CHOWN admin VIEW bv_mysql_dept_manager LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_employees CASCADE;

CREATE TABLE bv_mysql_employees I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        birth_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        first_name:text (sourcetyperadix = '10', sourcetypesize = '14', description = '', sourcetypeid = '12'), 
        last_name:text (sourcetyperadix = '10', sourcetypesize = '16', description = '', sourcetypeid = '12'), 
        gender:text (sourcetyperadix = '10', sourcetypesize = '1', description = '', sourcetypeid = '1'), 
        hire_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD employees(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD birth_date (any) OPT ANY
             ADD first_name (any) OPT ANY
             ADD last_name (any) OPT ANY
             ADD gender (any) OPT ANY
             ADD hire_date (any) OPT ANY
        )
        OUTPUTLIST (birth_date, emp_no, first_name, gender, hire_date, last_name
        )
        WRAPPER (jdbc employees)
    );

CHOWN admin VIEW bv_mysql_employees LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_salaries CASCADE;

CREATE TABLE bv_mysql_salaries I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        salary:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'from_date' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD salaries(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD salary (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (emp_no, from_date, salary, to_date
        )
        WRAPPER (jdbc salaries)
    );

CHOWN admin VIEW bv_mysql_salaries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_mysql_titles CASCADE;

CREATE TABLE bv_mysql_titles I18N be_euro (
        emp_no:int (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '4'), 
        title:text (sourcetyperadix = '10', sourcetypesize = '50', description = '', sourcetypeid = '12'), 
        from_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91'), 
        to_date:localdate (sourcetyperadix = '10', sourcetypesize = '10', description = '', sourcetypeid = '91')
    )
    FOLDER = '/02 - base views'
    CONSTRAINT 'PRIMARY' PRIMARY KEY ( 'emp_no' , 'title' , 'from_date' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD titles(
        I18N be_euro
        CONSTRAINTS (
             ADD emp_no (any) OPT ANY
             ADD title (any) OPT ANY
             ADD from_date (any) OPT ANY
             ADD to_date (any) OPT ANY
        )
        OUTPUTLIST (emp_no, from_date, title, to_date
        )
        WRAPPER (jdbc titles)
    );

CHOWN admin VIEW bv_mysql_titles LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqlq_randomdata CASCADE;

CREATE TABLE bv_sqlq_randomdata I18N be_euro (
        rowid:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        someint:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        somebit:boolean (sourcetypesize = '1', sourcetypeid = '-7'), 
        somevarchar:text (sourcetypesize = '10', sourcetypeid = '12'), 
        somedatetime:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        somenumeric:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '16', sourcetypeid = '2')
    )
    FOLDER = '/02 - base views/sqls'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqlq_randomdata(
        I18N be_euro
        CONSTRAINTS (
             ADD rowid (any) OPT ANY
             ADD someint (any) OPT ANY
             ADD somebit (any) OPT ANY
             ADD somevarchar (any) OPT ANY
             ADD somedatetime (any) OPT ANY
             ADD somenumeric (any) OPT ANY
        )
        OUTPUTLIST (rowid, somebit, somedatetime, someint, somenumeric, somevarchar
        )
        WRAPPER (jdbc bv_sqlq_randomdata)
    );

CHOWN admin VIEW bv_sqlq_randomdata LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_customer CASCADE;

CREATE TABLE bv_sqls_customer I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        firstname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        lastname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        city:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        country:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        phone:text (sourcetypesize = '20', sourcetypeid = '-9')
    )
    FOLDER = '/02 - base views/sqls'
    CONSTRAINT 'PK_CUSTOMER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_customer(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD firstname (any) OPT ANY
             ADD lastname (any) OPT ANY
             ADD city (any) OPT ANY
             ADD country (any) OPT ANY
             ADD phone (any) OPT ANY
        )
        OUTPUTLIST (city, country, firstname, id, lastname, phone
        )
        WRAPPER (jdbc bv_sqls_customer)
    );

CHOWN admin VIEW bv_sqls_customer LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_order CASCADE;

CREATE TABLE bv_sqls_order I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        orderdate:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        ordernumber:text (sourcetypesize = '10', sourcetypeid = '-9'), 
        customerid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        totalamount:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3')
    )
    FOLDER = '/02 - base views/sqls'
    CONSTRAINT 'PK_ORDER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_order(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD orderdate (any) OPT ANY
             ADD ordernumber (any) OPT ANY
             ADD customerid (any) OPT ANY
             ADD totalamount (any) OPT ANY
        )
        OUTPUTLIST (customerid, id, orderdate, ordernumber, totalamount
        )
        WRAPPER (jdbc bv_sqls_order)
    );

CHOWN admin VIEW bv_sqls_order LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_orderitem CASCADE;

CREATE TABLE bv_sqls_orderitem I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        orderid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        productid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        unitprice:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3'), 
        quantity:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    FOLDER = '/02 - base views/sqls'
    CONSTRAINT 'PK_ORDERITEM' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_orderitem(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD orderid (any) OPT ANY
             ADD productid (any) OPT ANY
             ADD unitprice (any) OPT ANY
             ADD quantity (any) OPT ANY
        )
        OUTPUTLIST (id, orderid, productid, quantity, unitprice
        )
        WRAPPER (jdbc bv_sqls_orderitem)
    );

CHOWN admin VIEW bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_product CASCADE;

CREATE TABLE bv_sqls_product I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        productname:text (sourcetypesize = '50', sourcetypeid = '-9'), 
        supplierid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        unitprice:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3'), 
        package:text (sourcetypesize = '30', sourcetypeid = '-9'), 
        isdiscontinued:boolean (sourcetypesize = '1', sourcetypeid = '-7')
    )
    FOLDER = '/02 - base views/sqls'
    CONSTRAINT 'PK_PRODUCT' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_product(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD productname (any) OPT ANY
             ADD supplierid (any) OPT ANY
             ADD unitprice (any) OPT ANY
             ADD package (any) OPT ANY
             ADD isdiscontinued (any) OPT ANY
        )
        OUTPUTLIST (id, isdiscontinued, package, productname, supplierid, unitprice
        )
        WRAPPER (jdbc bv_sqls_product)
    );

CHOWN admin VIEW bv_sqls_product LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_randomdata_big CASCADE;

CREATE TABLE bv_sqls_randomdata_big I18N be_euro (
        rowid:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        someint:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        somebit:boolean (sourcetypesize = '1', sourcetypeid = '-7'), 
        somevarchar:text (sourcetypesize = '10', sourcetypeid = '12'), 
        somedatetime:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        somenumeric:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '16', sourcetypeid = '2')
    )
    FOLDER = '/02 - base views/sqls'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_randomdata_big(
        I18N be_euro
        CONSTRAINTS (
             ADD rowid (any) OPT ANY
             ADD someint (any) OPT ANY
             ADD somebit (any) OPT ANY
             ADD somevarchar (any) OPT ANY
             ADD somedatetime (any) OPT ANY
             ADD somenumeric (any) OPT ANY
        )
        OUTPUTLIST (rowid, somebit, somedatetime, someint, somenumeric, somevarchar
        )
        WRAPPER (jdbc bv_sqls_randomdata_big)
    )
    DELEGATESTATSQUERY = false
    SMART_THEN_ATSOURCE_THROUGH_VDP;

CHOWN admin VIEW bv_sqls_randomdata_big LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_supplier CASCADE;

CREATE TABLE bv_sqls_supplier I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        companyname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        contactname:text (sourcetypesize = '50', sourcetypeid = '-9'), 
        contacttitle:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        city:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        country:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        phone:text (sourcetypesize = '30', sourcetypeid = '-9'), 
        fax:text (sourcetypesize = '30', sourcetypeid = '-9')
    )
    FOLDER = '/02 - base views/sqls'
    CONSTRAINT 'PK_SUPPLIER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_supplier(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD companyname (any) OPT ANY
             ADD contactname (any) OPT ANY
             ADD contacttitle (any) OPT ANY
             ADD city (any) OPT ANY
             ADD country (any) OPT ANY
             ADD phone (any) OPT ANY
             ADD fax (any) OPT ANY
        )
        OUTPUTLIST (city, companyname, contactname, contacttitle, country, fax, id, phone
        )
        WRAPPER (jdbc bv_sqls_supplier)
    );

CHOWN admin VIEW bv_sqls_supplier LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_rest_current_weather CASCADE;

CREATE TABLE ds_rest_current_weather I18N be_euro (
        country:text (extern), 
        city:text (extern), 
        coord:ds_rest_current_weather_coord, 
        weather:ds_rest_current_weather_weather, 
        base_0:text, 
        main:ds_rest_current_weather_main, 
        visibility:int, 
        wind:ds_rest_current_weather_wind, 
        clouds:ds_rest_current_weather_clouds, 
        dt:int, 
        sys:ds_rest_current_weather_sys, 
        id:int, 
        name:text, 
        cod:int
    )
    FOLDER = '/01 - data sources'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_rest_current_weather(
        I18N be_euro
        CONSTRAINTS (
             ADD country (=) OBL ONE
             ADD city (=) OBL ONE
             ADD coord NOS ZERO ()
             ADD coord.lon NOS ZERO ()
             ADD coord.lat NOS ZERO ()
             ADD weather NOS ZERO ()
             ADD weather NOS ZERO ()
             ADD weather.id NOS ZERO ()
             ADD weather.main NOS ZERO ()
             ADD weather.description NOS ZERO ()
             ADD weather.icon NOS ZERO ()
             ADD base_0 NOS ZERO ()
             ADD main NOS ZERO ()
             ADD main.temp NOS ZERO ()
             ADD main.pressure NOS ZERO ()
             ADD main.humidity NOS ZERO ()
             ADD main.temp_min NOS ZERO ()
             ADD main.temp_max NOS ZERO ()
             ADD visibility NOS ZERO ()
             ADD wind NOS ZERO ()
             ADD wind.speed NOS ZERO ()
             ADD wind.deg NOS ZERO ()
             ADD clouds NOS ZERO ()
             ADD clouds.all_0 NOS ZERO ()
             ADD dt NOS ZERO ()
             ADD sys NOS ZERO ()
             ADD sys.type NOS ZERO ()
             ADD sys.id NOS ZERO ()
             ADD sys.message NOS ZERO ()
             ADD sys.country NOS ZERO ()
             ADD sys.sunrise NOS ZERO ()
             ADD sys.sunset NOS ZERO ()
             ADD id NOS ZERO ()
             ADD name NOS ZERO ()
             ADD cod NOS ZERO ()
        )
        OUTPUTLIST (base_0, clouds, cod, coord, dt, id, main, name, sys, visibility, weather, wind
        )
        WRAPPER (json ds_rest_current_weather)
    );

CHOWN admin VIEW ds_rest_current_weather LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of demo
# #######################################
DROP VIEW IF EXISTS dv_join_sqls CASCADE;

CREATE VIEW dv_join_sqls FOLDER = '/02 - base views/sqls' AS SELECT bv_sqls_orderitem.id AS id, bv_sqls_product.productname AS productname, bv_sqls_product.package AS package, bv_sqls_product.isdiscontinued AS isdiscontinued, bv_sqls_orderitem.unitprice AS orderitem_unitprice, bv_sqls_orderitem.quantity AS quantity, (bv_sqls_orderitem.unitprice*bv_sqls_orderitem.quantity) AS total_price, bv_sqls_supplier.companyname AS companyname, bv_sqls_supplier.contactname AS contactname, bv_sqls_supplier.contacttitle AS contacttitle, bv_sqls_supplier.city AS supplier_city, bv_sqls_supplier.country AS supplier_country, bv_sqls_supplier.phone AS supplier_phone, bv_sqls_supplier.fax AS supplier_fax, addyear(bv_sqls_order.orderdate, 5) AS orderdate, bv_sqls_order.ordernumber AS ordernumber, bv_sqls_order.totalamount AS totalamount, bv_sqls_customer.firstname AS customer_firstname, bv_sqls_customer.lastname AS customer_lastname, bv_sqls_customer.city AS customer_city, bv_sqls_customer.country AS customer_country, bv_sqls_customer.phone AS customer_phone FROM ((bv_sqls_orderitem AS bv_sqls_orderitem INNER JOIN (bv_sqls_order AS bv_sqls_order INNER JOIN bv_sqls_customer AS bv_sqls_customer ON bv_sqls_order.customerid = bv_sqls_customer.id ) ON bv_sqls_orderitem.orderid = bv_sqls_order.id ) INNER JOIN bv_sqls_product AS bv_sqls_product ON bv_sqls_orderitem.productid = bv_sqls_product.id ) INNER JOIN bv_sqls_supplier AS bv_sqls_supplier ON bv_sqls_product.supplierid = bv_sqls_supplier.id ;

ALTER VIEW dv_join_sqls
 LAYOUT (bv_sqls_orderitem = [590, 420, 200, 126], bv_sqls_order = [940, 240, 200, 126], bv_sqls_customer = [940, 20, 200, 146], bv_sqls_product = [290, 400, 200, 146], bv_sqls_supplier = [30, 220, 200, 186]);

CHOWN admin VIEW dv_join_sqls LASTMODIFICATIONUSER admin;

# #######################################
# ASSOCIATIONS of demo
# #######################################
DROP ASSOCIATION IF EXISTS bv_sqls_customer_bv_sqls_order;

CREATE ASSOCIATION bv_sqls_customer_bv_sqls_order REFERENTIAL CONSTRAINT 
FOLDER = '/02 - base views/sqls'
    ENDPOINT bv_sqls_order bv_sqls_customer PRINCIPAL (0,1)
    ENDPOINT bv_sqls_customer bv_sqls_order (0,*)
    ADD MAPPING id=customerid;

CHOWN admin ASSOCIATION bv_sqls_customer_bv_sqls_order LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_order_bv_sqls_orderitem;

CREATE ASSOCIATION bv_sqls_order_bv_sqls_orderitem REFERENTIAL CONSTRAINT 
FOLDER = '/02 - base views/sqls'
    ENDPOINT bv_sqls_orderitem bv_sqls_order PRINCIPAL (0,1)
    ENDPOINT bv_sqls_order bv_sqls_orderitem (0,*)
    ADD MAPPING id=orderid;

CHOWN admin ASSOCIATION bv_sqls_order_bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_product_bv_sqls_orderitem;

CREATE ASSOCIATION bv_sqls_product_bv_sqls_orderitem REFERENTIAL CONSTRAINT 
FOLDER = '/02 - base views/sqls'
    ENDPOINT bv_sqls_orderitem bv_sqls_product PRINCIPAL (0,1)
    ENDPOINT bv_sqls_product bv_sqls_orderitem (0,*)
    ADD MAPPING id=productid;

CHOWN admin ASSOCIATION bv_sqls_product_bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_supplier_bv_sqls_product;

CREATE ASSOCIATION bv_sqls_supplier_bv_sqls_product REFERENTIAL CONSTRAINT 
FOLDER = '/02 - base views/sqls'
    ENDPOINT bv_sqls_product bv_sqls_supplier PRINCIPAL (0,1)
    ENDPOINT bv_sqls_supplier bv_sqls_product (0,*)
    ADD MAPPING id=supplierid;

CHOWN admin ASSOCIATION bv_sqls_supplier_bv_sqls_product LASTMODIFICATIONUSER admin;

# #######################################
# WEBSERVICES of demo
# #######################################
DROP REST WEBSERVICE IF EXISTS bv_mysql_current_dept_emp;

CREATE REST WEBSERVICE bv_mysql_current_dept_emp
    CONNECTION (
        CHUNKSIZE = 1000
        CHUNKTIMEOUT = 90000
        QUERYTIMEOUT = 900000
        POOLENABLED = true
        POOLINITSIZE = 0
        POOLMAXACTIVE = 30
    )
    DEFAULTREPRESENTATION = HTML
    SUPPORTEDREPRESENTATIONS (HTML, XML, JSON)
    RESOURCES (
        VIEW bv_mysql_current_dept_emp FIELDS (
            emp_no : 'int', 
            dept_no : 'text', 
            from_date : 'localdate', 
            to_date : 'localdate'
        ),
        VIEW bv_mysql_departments FIELDS (
            dept_no : 'text', 
            dept_name : 'text'
        ),
        VIEW bv_mysql_dept_emp FIELDS (
            emp_no : 'int', 
            dept_no : 'text', 
            from_date : 'localdate', 
            to_date : 'localdate'
        ),
        VIEW bv_mysql_dept_emp_latest_date FIELDS (
            emp_no : 'int', 
            from_date : 'localdate', 
            to_date : 'localdate'
        ),
        VIEW bv_mysql_dept_manager FIELDS (
            emp_no : 'int', 
            dept_no : 'text', 
            from_date : 'localdate', 
            to_date : 'localdate'
        ),
        VIEW bv_mysql_employees FIELDS (
            emp_no : 'int', 
            birth_date : 'localdate', 
            first_name : 'text', 
            last_name : 'text', 
            gender : 'text', 
            hire_date : 'localdate'
        ),
        VIEW bv_mysql_salaries FIELDS (
            emp_no : 'int', 
            salary : 'int', 
            from_date : 'localdate', 
            to_date : 'localdate'
        ),
        VIEW bv_mysql_titles FIELDS (
            emp_no : 'int', 
            title : 'text', 
            from_date : 'localdate', 
            to_date : 'localdate'
        )
    )
    OPTIONS ( NULLVALUESASEMPTYXMLELEMENTS = false ) ;

CHOWN admin WEBSERVICE bv_mysql_current_dept_emp LASTMODIFICATIONUSER admin;

# #######################################
# WIDGETS of demo
# #######################################
# No widgets in database demo
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of demo
# #######################################
UNDEPLOY IF EXISTS WEBSERVICE bv_mysql_current_dept_emp;

DEPLOY WEBSERVICE bv_mysql_current_dept_emp LOGIN = 'admin' PASSWORD = 'FsNHm8UrncOUnKatd6c/YI20+oW7Dx+fP72qMIeKaLTNsRQREJW6FXEBICy1aj+HUF82a32/mnaXhPEfFUEn34L9cbvPREbdLfJch6C7t5wmlct/Hf/K3m2+PgUDrGvo' ENCRYPTED;

# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of demo
# #######################################
# No deployed widgets in database demo
# #######################################
# Closing connection with database demo
# #######################################
CLOSE;


# 2 ====================================================================

# #######################################
# DATABASE of denodo_monitor
# #######################################
DROP DATABASE IF EXISTS denodo_monitor;

CREATE DATABASE denodo_monitor '';

CONNECT DATABASE denodo_monitor;

# #######################################
# LISTENERS JMS of denodo_monitor
# #######################################
# No listeners jms in database denodo_monitor
# #######################################
# DATASOURCES of denodo_monitor
# #######################################
DROP DATASOURCE CUSTOM IF EXISTS base_vdp_cache_pattern CASCADE;

CREATE DATASOURCE CUSTOM base_vdp_cache_pattern
    CLASSNAME='com.denodo.connect.log.LogCustomWrapper'
    JARS 'denodo-log-customwrapper-dmr';

CHOWN admin DATASOURCE CUSTOM base_vdp_cache_pattern LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS base_vdp_queries_pattern CASCADE;

CREATE DATASOURCE CUSTOM base_vdp_queries_pattern
    CLASSNAME='com.denodo.connect.log.LogCustomWrapper'
    JARS 'denodo-log-customwrapper-dmr';

CHOWN admin DATASOURCE CUSTOM base_vdp_queries_pattern LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS base_vdp_resources_pattern CASCADE;

CREATE DATASOURCE CUSTOM base_vdp_resources_pattern
    CLASSNAME='com.denodo.connect.log.LogCustomWrapper'
    JARS 'denodo-log-customwrapper-dmr';

CHOWN admin DATASOURCE CUSTOM base_vdp_resources_pattern LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE denodo_monitor
  CHARSET DEFAULT;

# #######################################
# WRAPPERS of denodo_monitor
# #######################################
DROP WRAPPER CUSTOM IF EXISTS base_vdp_cache_pattern CASCADE;

CREATE WRAPPER CUSTOM base_vdp_cache_pattern
    DATASOURCENAME=base_vdp_cache_pattern
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '(?:.*?)(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\})(?:.*?)',
      'Log timezone' = 'PST',
      'Content Extractor Pattern' = '(?:.*?)(endRefreshCacheProcess)\\t(?:.*?)\\t(?:.*?)\\t([0-9]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]*)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t([\^\\t]+)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t([\^\\t]+)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t([\^\\t]+)(?:.*?)',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/19_09_prt1/vdp-loadcacheprocesses.log',
      'Sequential Search Interval' = 100,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        notificationtype = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        querypatternid = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        databasename = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        viewname = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        sqlviewname = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        projectedfields = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        numconditions = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdpconditionlist = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cachestatus = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ttlstatusincache = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ttlincache = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        querypatternstate = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        exception = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        numofinsertedrows = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        numofreceivedrows = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        startquerypatternstoragetime = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        endquerypatternstoragetime = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        querypatternstoragetime = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        startcachedresultmetadatastoragetime = 'out19' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        endcachedresultmetadatastoragetime = 'out20' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cachedresultmetadatastoragetime = 'out21' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        startdatastoragetime = 'out22' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        enddatastoragetime = 'out23' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        datastoragetime = 'out24' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        extracteddate_0 = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchstartdate_0 = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchenddate_0 = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM base_vdp_cache_pattern LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS base_vdp_queries_pattern_1479 CASCADE;

CREATE WRAPPER CUSTOM base_vdp_queries_pattern_1479
    DATASOURCENAME=base_vdp_queries_pattern
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '(?:\\S*\\t+\\S*\\t+\\S*\\t+)?(?:[\^\\t]+)\\t(?:[\^\\t]+)\\t(?:[\^\\t]+)\\t(?:endRequest|startRequest)\\t(?:[0-9]+)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\})(?:.*?)',
      'Log timezone' = 'PST',
      'Content Extractor Pattern' = '(?:\\S*\\t+\\S*\\t+\\S*\\t+)?([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t(endRequest)\\t([0-9]+)\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\})\\t(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\}|\\-)\\t([0-9\\-]+)\\t([0-9\\-]+)\\t(\\-?[0-9]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t(SELECT VIEW|INSERT|CREATE|DELETE|UPDATE|CALL PROCEDURE|QUERY WRAPPER|SELECT BASE VIEW)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)\\t([\^\\t]+)(?:\\t?.*?)',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/19_09_prt1/vdp-queries.log',
      'Sequential Search Interval' = 100,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        id = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        database_0 = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        username = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        notificationtype = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        sessionid = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        starttime = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        endtime = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        duration = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        waitingtime = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        numrows = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        state = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        completed = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cache = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        requesttype = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        elements = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        useragent = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        accessinterface = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        clientip = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        extracteddate_0 = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchstartdate_0 = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchenddate_0 = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM base_vdp_queries_pattern_1479 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS base_vdp_resources_pattern_5451 CASCADE;

CREATE WRAPPER CUSTOM base_vdp_resources_pattern_5451
    DATASOURCENAME=base_vdp_resources_pattern
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '(?:.*?)(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\})(?:.*?)',
      'Log timezone' = 'PST',
      'Content Extractor Pattern' = '(?:.*?)(\\d\{4\}-\\d\{2\}-\\d\{2\}T\\d\{2\}:\\d\{2\}:\\d\{2\}.\\d\{3\})\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)/(\\d+|-1)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+\\.?\\d*)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+)\\t(\\d+\\.?\\d*)\\t(\\d+\\.?\\d*)\\t(\\d+\\.?\\d*)(?:.*?)',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/19_09_prt1/vdp-resources.log',
      'Sequential Search Interval' = 10000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        date = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        permgen = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        permgen_max = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        survivorspace = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        survivorspace_max = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        tenuredgen = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        tenuredgen_max = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        edenspace = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        edenspace_max = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        codecache = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        codecache_max = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        heapmemoryusage = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        heapmemoryusage_max = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        nonheapmemoryusage = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        nonheapmemoryusage_max = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        loadedclasscount = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        totalloadedclasscount = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        threadcount = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        peakthreadcount = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdptotalconn = 'out19' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdpactiveconn = 'out20' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdpactiverequests = 'out21' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdpwaitingrequests = 'out22' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdptotalmem = 'out23' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdpmaxmem = 'out24' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cpupercentage = 'out25' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_cc_psmarksweep = 'out26' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_cc_psscavenge = 'out27' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_ct_psmarksweep = 'out28' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_ct_psscavenge = 'out29' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentagepsmarksweep = 'out30' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentagepsscavenge = 'out31' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentage = 'out32' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        extracteddate_0 = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchstartdate_0 = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        searchenddate_0 = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM base_vdp_resources_pattern_5451 LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of denodo_monitor
# #######################################
DROP PROCEDURE IF EXISTS dmr_getcountbyaccessinterfacevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyaccessinterfacevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByAccessInterfaceVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyaccessinterfacevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbycachevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbycachevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByCacheVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbycachevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyclientipvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyclientipvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByClientIpVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyclientipvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbydatabasevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbydatabasevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByDatabaseVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbydatabasevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbydatabasevdpqueriesbyuser CASCADE;

CREATE PROCEDURE dmr_getcountbydatabasevdpqueriesbyuser
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByDatabaseVdpQueriesByUser'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbydatabasevdpqueriesbyuser LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbydatevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbydatevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByDateVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbydatevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyhourvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyhourvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByHourVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyhourvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyminutevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyminutevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByMinuteVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyminutevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyrequesttypevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyrequesttypevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByRequesttypeVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyrequesttypevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbystatevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbystatevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByStateVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbystatevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbytypeandvdpviewperformancecache CASCADE;

CREATE PROCEDURE dmr_getcountbytypeandvdpviewperformancecache
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByTypeandVdpviewPerformanceCache'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbytypeandvdpviewperformancecache LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyuseragentvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyuseragentvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByUseragentVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyuseragentvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyusernamevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyusernamevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByUsernameVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyusernamevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandaccessinterfacevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandaccessinterfacevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndAccessinterfaceVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandaccessinterfacevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandclientipvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandclientipvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndClientIpVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandclientipvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewanddatabasevdpcache CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewanddatabasevdpcache
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndDatabaseVdpCache'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewanddatabasevdpcache LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandhourvdpcache CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandhourvdpcache
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndHourVdpCache'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandhourvdpcache LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandhourvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandhourvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndHourVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandhourvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandqueryvdpcache CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandqueryvdpcache
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndQueryVdpCache'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandqueryvdpcache LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandrequesttypevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandrequesttypevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndRequesttypeVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandrequesttypevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewandtypevdpcache CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewandtypevdpcache
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndTypeVdpCache'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewandtypevdpcache LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewanduseragentvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewanduseragentvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndUserAgentVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewanduseragentvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountbyvdpviewanduservdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountbyvdpviewanduservdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountByVdpviewAndUserVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountbyvdpviewanduservdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountcachebyvdpview CASCADE;

CREATE PROCEDURE dmr_getcountcachebyvdpview
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountCacheByVdpview'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountcachebyvdpview LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountcompletedbyvdpviewandcachevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountcompletedbyvdpviewandcachevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountCompletedByVdpviewAndCacheVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountcompletedbyvdpviewandcachevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountcompletedbyvdpviewandqueryvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountcompletedbyvdpviewandqueryvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountCompletedByVdpviewAndQueryVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountcompletedbyvdpviewandqueryvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountcompletedbyvdpviewandrequesttypevdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountcompletedbyvdpviewandrequesttypevdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountCompletedByVdpviewAndRequesttypeVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountcompletedbyvdpviewandrequesttypevdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getcountcompletedbyvdpviewvdpqueries CASCADE;

CREATE PROCEDURE dmr_getcountcompletedbyvdpviewvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetCountCompletedByVdpviewVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getcountcompletedbyvdpviewvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getquerybycacheandhourvdpqueries CASCADE;

CREATE PROCEDURE dmr_getquerybycacheandhourvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetQueryByCacheAndHourVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getquerybycacheandhourvdpqueries LASTMODIFICATIONUSER admin;

DROP PROCEDURE IF EXISTS dmr_getquerybyvdpviewandhourvdpqueries CASCADE;

CREATE PROCEDURE dmr_getquerybyvdpviewandhourvdpqueries
    CLASSNAME='com.denodo.connect.dmr.vdp.denodo_dmr_storedprocedures.GetQueryByVdpviewAndHourVdpQueries'
    JARS 'denodo-storedprocedures-vdp-dmr';

CHOWN admin PROCEDURE dmr_getquerybyvdpviewandhourvdpqueries LASTMODIFICATIONUSER admin;

# #######################################
# TYPES of denodo_monitor
# #######################################
# No types in database denodo_monitor
# #######################################
# MAPS of denodo_monitor
# #######################################
DROP MAP simple IF EXISTS requesttype_monitor_vdp_queries CASCADE;

CREATE MAP simple requesttype_monitor_vdp_queries (
    'CALL PROCEDURE' = 'call'
    'DELETE' = 'delete'
    'INSERT' = 'insert'
    'QUERY WRAPPER' = 'other'
    'SELECT BASE VIEW' = 'select'
    'SELECT VIEW' = 'select'
    'UNKNOWN' = 'other'
    'UPDATE' = 'update'
);

# #######################################
# BASE VIEWS of denodo_monitor
# #######################################
DROP VIEW IF EXISTS base_vdp_cache_pattern CASCADE;

CREATE TABLE base_vdp_cache_pattern I18N monitor_vdp_queries_v2 (
        notificationtype:text, 
        querypatternid:text, 
        databasename:text, 
        viewname:text, 
        sqlviewname:text, 
        projectedfields:text, 
        numconditions:text, 
        vdpconditionlist:text, 
        cachestatus:text, 
        ttlstatusincache:text, 
        ttlincache:text, 
        querypatternstate:text, 
        exception:text, 
        numofinsertedrows:long, 
        numofreceivedrows:long, 
        startquerypatternstoragetime:date, 
        endquerypatternstoragetime:date, 
        querypatternstoragetime:long, 
        startcachedresultmetadatastoragetime:date, 
        endcachedresultmetadatastoragetime:date, 
        cachedresultmetadatastoragetime:long, 
        startdatastoragetime:date, 
        enddatastoragetime:date, 
        datastoragetime:text, 
        extracteddate_0:date, 
        searchstartdate_0:date, 
        searchenddate_0:date
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD base_vdp_cache_pattern(
        I18N monitor_vdp_queries_v2
        CONSTRAINTS (
             ADD notificationtype NOS ZERO ()
             ADD querypatternid NOS ZERO ()
             ADD databasename NOS ZERO ()
             ADD viewname NOS ZERO ()
             ADD sqlviewname NOS ZERO ()
             ADD projectedfields NOS ZERO ()
             ADD numconditions NOS ZERO ()
             ADD vdpconditionlist NOS ZERO ()
             ADD cachestatus NOS ZERO ()
             ADD ttlstatusincache NOS ZERO ()
             ADD ttlincache NOS ZERO ()
             ADD querypatternstate NOS ZERO ()
             ADD exception NOS ZERO ()
             ADD numofinsertedrows NOS ZERO ()
             ADD numofreceivedrows NOS ZERO ()
             ADD startquerypatternstoragetime NOS ZERO ()
             ADD endquerypatternstoragetime NOS ZERO ()
             ADD querypatternstoragetime NOS ZERO ()
             ADD startcachedresultmetadatastoragetime NOS ZERO ()
             ADD endcachedresultmetadatastoragetime NOS ZERO ()
             ADD cachedresultmetadatastoragetime NOS ZERO ()
             ADD startdatastoragetime NOS ZERO ()
             ADD enddatastoragetime NOS ZERO ()
             ADD datastoragetime NOS ZERO ()
             ADD extracteddate_0 (any) OPT ANY
             ADD searchstartdate_0 (any) OBL ONE
             ADD searchenddate_0 (any) OPT ANY
        )
        OUTPUTLIST (cachedresultmetadatastoragetime, cachestatus, databasename, datastoragetime, endcachedresultmetadatastoragetime, enddatastoragetime, endquerypatternstoragetime, exception, extracteddate_0, notificationtype, numconditions, numofinsertedrows, numofreceivedrows, projectedfields, querypatternid, querypatternstate, querypatternstoragetime, searchenddate_0, searchstartdate_0, sqlviewname, startcachedresultmetadatastoragetime, startdatastoragetime, startquerypatternstoragetime, ttlincache, ttlstatusincache, vdpconditionlist, viewname
        )
        WRAPPER (custom base_vdp_cache_pattern)
    );

CHOWN admin VIEW base_vdp_cache_pattern LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS base_vdp_queries_pattern CASCADE;

CREATE TABLE base_vdp_queries_pattern I18N monitor_vdp_queries_v2 (
        id:text, 
        database_0:text, 
        username:text, 
        notificationtype:text, 
        sessionid:text, 
        starttime:date, 
        endtime:date, 
        duration:long, 
        waitingtime:long, 
        numrows:long, 
        state:text, 
        completed:boolean, 
        cache:boolean, 
        query:text, 
        requesttype:text, 
        elements:text, 
        useragent:text, 
        accessinterface:text, 
        clientip:text, 
        extracteddate_0:date, 
        searchstartdate_0:date, 
        searchenddate_0:date
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD base_vdp_queries_pattern(
        I18N monitor_vdp_queries_v2
        CONSTRAINTS (
             ADD id NOS ZERO ()
             ADD database_0 NOS ZERO ()
             ADD username NOS ZERO ()
             ADD notificationtype NOS ZERO ()
             ADD sessionid NOS ZERO ()
             ADD starttime NOS ZERO ()
             ADD endtime NOS ZERO ()
             ADD duration NOS ZERO ()
             ADD waitingtime NOS ZERO ()
             ADD numrows NOS ZERO ()
             ADD state NOS ZERO ()
             ADD completed NOS ZERO ()
             ADD cache NOS ZERO ()
             ADD query NOS ZERO ()
             ADD requesttype NOS ZERO ()
             ADD elements NOS ZERO ()
             ADD useragent NOS ZERO ()
             ADD accessinterface NOS ZERO ()
             ADD clientip NOS ZERO ()
             ADD extracteddate_0 (any) OPT ANY
             ADD searchstartdate_0 (any) OBL ONE
             ADD searchenddate_0 (any) OPT ANY
        )
        OUTPUTLIST (accessinterface, cache, clientip, completed, database_0, duration, elements, endtime, extracteddate_0, id, notificationtype, numrows, query, requesttype, searchenddate_0, searchstartdate_0, sessionid, starttime, state, useragent, username, waitingtime
        )
        WRAPPER (custom base_vdp_queries_pattern_1479)
    );

CHOWN admin VIEW base_vdp_queries_pattern LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS base_vdp_resources_pattern CASCADE;

CREATE TABLE base_vdp_resources_pattern I18N monitor_vdp_resources_v2 (
        date:date, 
        permgen:long, 
        permgen_max:long, 
        survivorspace:long, 
        survivorspace_max:long, 
        tenuredgen:long, 
        tenuredgen_max:long, 
        edenspace:long, 
        edenspace_max:long, 
        codecache:long, 
        codecache_max:long, 
        heapmemoryusage:long, 
        heapmemoryusage_max:long, 
        nonheapmemoryusage:long, 
        nonheapmemoryusage_max:long, 
        loadedclasscount:long, 
        totalloadedclasscount:long, 
        threadcount:long, 
        peakthreadcount:long, 
        vdptotalconn:long, 
        vdpactiveconn:long, 
        vdpactiverequests:long, 
        vdpwaitingrequests:long, 
        vdptotalmem:long, 
        vdpmaxmem:long, 
        cpupercentage:float, 
        gc_cc_psmarksweep:long, 
        gc_cc_psscavenge:long, 
        gc_ct_psmarksweep:long, 
        gc_ct_psscavenge:long, 
        gc_percentagepsmarksweep:float, 
        gc_percentagepsscavenge:float, 
        gc_percentage:float, 
        extracteddate_0:date, 
        searchstartdate_0:date, 
        searchenddate_0:date
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD base_vdp_resources_pattern(
        I18N monitor_vdp_resources_v2
        CONSTRAINTS (
             ADD date NOS ZERO ()
             ADD permgen NOS ZERO ()
             ADD permgen_max NOS ZERO ()
             ADD survivorspace NOS ZERO ()
             ADD survivorspace_max NOS ZERO ()
             ADD tenuredgen NOS ZERO ()
             ADD tenuredgen_max NOS ZERO ()
             ADD edenspace NOS ZERO ()
             ADD edenspace_max NOS ZERO ()
             ADD codecache NOS ZERO ()
             ADD codecache_max NOS ZERO ()
             ADD heapmemoryusage NOS ZERO ()
             ADD heapmemoryusage_max NOS ZERO ()
             ADD nonheapmemoryusage NOS ZERO ()
             ADD nonheapmemoryusage_max NOS ZERO ()
             ADD loadedclasscount NOS ZERO ()
             ADD totalloadedclasscount NOS ZERO ()
             ADD threadcount NOS ZERO ()
             ADD peakthreadcount NOS ZERO ()
             ADD vdptotalconn NOS ZERO ()
             ADD vdpactiveconn NOS ZERO ()
             ADD vdpactiverequests NOS ZERO ()
             ADD vdpwaitingrequests NOS ZERO ()
             ADD vdptotalmem NOS ZERO ()
             ADD vdpmaxmem NOS ZERO ()
             ADD cpupercentage NOS ZERO ()
             ADD gc_cc_psmarksweep NOS ZERO ()
             ADD gc_cc_psscavenge NOS ZERO ()
             ADD gc_ct_psmarksweep NOS ZERO ()
             ADD gc_ct_psscavenge NOS ZERO ()
             ADD gc_percentagepsmarksweep NOS ZERO ()
             ADD gc_percentagepsscavenge NOS ZERO ()
             ADD gc_percentage NOS ZERO ()
             ADD extracteddate_0 (any) OPT ANY
             ADD searchstartdate_0 (any) OBL ONE
             ADD searchenddate_0 (any) OPT ANY
        )
        OUTPUTLIST (codecache, codecache_max, cpupercentage, date, edenspace, edenspace_max, extracteddate_0, gc_cc_psmarksweep, gc_cc_psscavenge, gc_ct_psmarksweep, gc_ct_psscavenge, gc_percentage, gc_percentagepsmarksweep, gc_percentagepsscavenge, heapmemoryusage, heapmemoryusage_max, loadedclasscount, nonheapmemoryusage, nonheapmemoryusage_max, peakthreadcount, permgen, permgen_max, searchenddate_0, searchstartdate_0, survivorspace, survivorspace_max, tenuredgen, tenuredgen_max, threadcount, totalloadedclasscount, vdpactiveconn, vdpactiverequests, vdpmaxmem, vdptotalconn, vdptotalmem, vdpwaitingrequests
        )
        WRAPPER (custom base_vdp_resources_pattern_5451)
    );

CHOWN admin VIEW base_vdp_resources_pattern LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of denodo_monitor
# #######################################
DROP VIEW IF EXISTS get_count_by_access_interface_vdp_queries CASCADE;

CREATE VIEW get_count_by_access_interface_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, access_interface AS access_interface, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyaccessinterfacevdpqueries();

CHOWN admin VIEW get_count_by_access_interface_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_cache_vdp_queries CASCADE;

CREATE VIEW get_count_by_cache_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, cached AS cached FROM dmr_getcountbycachevdpqueries();

CHOWN admin VIEW get_count_by_cache_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_cache_vdpview CASCADE;

CREATE VIEW get_count_by_cache_vdpview AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, vdpview AS vdpview, count AS count, max_querypatternstoragetime AS max_querypatternstoragetime, min_querypatternstoragetime AS min_querypatternstoragetime, avg_querypatternstoragetime AS avg_querypatternstoragetime, max_cachedresultmetadatastoragetime AS max_cachedresultmetadatastoragetime, min_cachedresultmetadatastoragetime AS min_cachedresultmetadatastoragetime, avg_cachedresultmetadatastoragetime AS avg_cachedresultmetadatastoragetime, min_datastoragetime AS min_datastoragetime, max_datastoragetime AS max_datastoragetime, avg_datastoragetime AS avg_datastoragetime, max_numofinsertedrows AS max_numofinsertedrows, min_numofinsertedrows AS min_numofinsertedrows, avg_numofinsertedrows AS avg_numofinsertedrows, max_numofreceivedrows AS max_numofreceivedrows, min_numofreceivedrows AS min_numofreceivedrows, avg_numofreceivedrows AS avg_numofreceivedrows, cachestatus_full AS cachestatus_full, cachestatus_partial AS cachestatus_partial, cachestatus_partialexact AS cachestatus_partialexact, cachestatus_partialpreload AS cachestatus_partialpreload, cachestatus_partialexactpreload AS cachestatus_partialexactpreload FROM dmr_getcountcachebyvdpview();

CHOWN admin VIEW get_count_by_cache_vdpview LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_clientip_vdp_queries CASCADE;

CREATE VIEW get_count_by_clientip_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, clientip AS clientip, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyclientipvdpqueries();

CHOWN admin VIEW get_count_by_clientip_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_database_vdp_queries CASCADE;

CREATE VIEW get_count_by_database_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, database_0 AS database_0, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbydatabasevdpqueries();

CHOWN admin VIEW get_count_by_database_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_database_vdp_queries_by_user CASCADE;

CREATE VIEW get_count_by_database_vdp_queries_by_user AS SELECT dbquery AS dbquery, dbcache AS dbcache, database_0 AS database_0, username AS username, useragent AS useragent, clientip AS clientip, accessinterface AS accessinterface, startdate AS startdate, enddate AS enddate, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbydatabasevdpqueriesbyuser();

CHOWN admin VIEW get_count_by_database_vdp_queries_by_user LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_date_vdp_queries CASCADE;

CREATE VIEW get_count_by_date_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, incomingdate AS incomingdate, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached, dateinmillis AS dateinmillis FROM dmr_getcountbydatevdpqueries();

CHOWN admin VIEW get_count_by_date_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_hour_vdp_queries CASCADE;

CREATE VIEW get_count_by_hour_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, incominghour AS incominghour, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached, dateinmillis AS dateinmillis FROM dmr_getcountbyhourvdpqueries();

CHOWN admin VIEW get_count_by_hour_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_minute_vdp_queries CASCADE;

CREATE VIEW get_count_by_minute_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, incomingminute AS incomingminute, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached, dateinmillis AS dateinmillis FROM dmr_getcountbyminutevdpqueries();

CHOWN admin VIEW get_count_by_minute_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_request_type_vdp_queries CASCADE;

CREATE VIEW get_count_by_request_type_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, requesttype AS requesttype, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyrequesttypevdpqueries();

CHOWN admin VIEW get_count_by_request_type_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_state_vdp_queries CASCADE;

CREATE VIEW get_count_by_state_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, state AS state, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbystatevdpqueries();

CHOWN admin VIEW get_count_by_state_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_type_and_vdpview_performance_cache CASCADE;

CREATE VIEW get_count_by_type_and_vdpview_performance_cache AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, vdpview AS vdpview, cachestatus AS cachestatus, count AS count, avgdatastoragetime AS avgdatastoragetime, avgnumofinsertedrows AS avgnumofinsertedrows, avgnumofreceivedrows AS avgnumofreceivedrows, maxdatastoragetime AS maxdatastoragetime, mindatastoragetime AS mindatastoragetime, maxnumofinsertedrows AS maxnumofinsertedrows, minnumofinsertedrows AS minnumofinsertedrows, maxnumofreceivedrows AS maxnumofreceivedrows, minnumofreceivedrows AS minnumofreceivedrows FROM dmr_getcountbytypeandvdpviewperformancecache();

CHOWN admin VIEW get_count_by_type_and_vdpview_performance_cache LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_useragent_vdp_queries CASCADE;

CREATE VIEW get_count_by_useragent_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, useragent AS useragent, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyuseragentvdpqueries();

CHOWN admin VIEW get_count_by_useragent_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_username_vdp_queries CASCADE;

CREATE VIEW get_count_by_username_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, username AS username, user_name AS user_name, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyusernamevdpqueries();

CHOWN admin VIEW get_count_by_username_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_access_interface_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_access_interface_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, startdate AS startdate, enddate AS enddate, count AS count, avgduration AS avgduration, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached, accessinterface AS accessinterface, access_interface AS access_interface FROM dmr_getcountbyvdpviewandaccessinterfacevdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_access_interface_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_clientip_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_clientip_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, clientip AS clientip, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, count AS count, avgduration AS avgduration, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyvdpviewandclientipvdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_clientip_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_database_vdp_cache CASCADE;

CREATE VIEW get_count_by_vdpview_and_database_vdp_cache AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, vdpview AS vdpview, databasename AS databasename, count AS count, avgdatastoragetime AS avgdatastoragetime, avgnumofinsertedrows AS avgnumofinsertedrows, avgnumofreceivedrows AS avgnumofreceivedrows FROM dmr_getcountbyvdpviewanddatabasevdpcache();

CHOWN admin VIEW get_count_by_vdpview_and_database_vdp_cache LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_hour_vdp_cache CASCADE;

CREATE VIEW get_count_by_vdpview_and_hour_vdp_cache AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, startdatastoragetime AS startdatastoragetime, vdpview AS vdpview, count AS count, avgdatastoragetime AS avgdatastoragetime, avgnumreceivedrows AS avgnumreceivedrows, avgnuminsertedrows AS avgnuminsertedrows, countnuminsertedrows AS countnuminsertedrows, countnumreceivedrows AS countnumreceivedrows, dateinmillis AS dateinmillis, cachestatus_full AS cachestatus_full, cachestatus_partial AS cachestatus_partial, cachestatus_partialexact AS cachestatus_partialexact, cachestatus_partialpreload AS cachestatus_partialpreload, cachestatus_partialexactpreload AS cachestatus_partialexactpreload FROM dmr_getcountbyvdpviewandhourvdpcache();

CHOWN admin VIEW get_count_by_vdpview_and_hour_vdp_cache LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_hour_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_hour_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, useragent AS useragent, clientip AS clientip, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, incominghour AS incominghour, count AS count, avgduration AS avgduration, avgwaitingtime AS avgwaitingtime, countnumrows AS countnumrows, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached, dateinmillis AS dateinmillis FROM dmr_getcountbyvdpviewandhourvdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_hour_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_query_vdp_cache CASCADE;

CREATE VIEW get_count_by_vdpview_and_query_vdp_cache AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, vdpview AS vdpview, vdpconditionlist AS vdpconditionlist, count AS count FROM dmr_getcountbyvdpviewandqueryvdpcache();

CHOWN admin VIEW get_count_by_vdpview_and_query_vdp_cache LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_request_type_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_request_type_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, requesttype AS requesttype, count AS count, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyvdpviewandrequesttypevdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_request_type_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_type_vdp_cache CASCADE;

CREATE VIEW get_count_by_vdpview_and_type_vdp_cache AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, cachestatus AS cachestatus, vdpview AS vdpview, count AS count, avgdatastoragetime AS avgdatastoragetime, avgnumofinsertedrows AS avgnumofinsertedrows, avgnumofreceivedrows AS avgnumofreceivedrows FROM dmr_getcountbyvdpviewandtypevdpcache();

CHOWN admin VIEW get_count_by_vdpview_and_type_vdp_cache LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_user_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_user_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, user_name AS user_name, count AS count, avgduration AS avgduration, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyvdpviewanduservdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_user_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_by_vdpview_and_useragent_vdp_queries CASCADE;

CREATE VIEW get_count_by_vdpview_and_useragent_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, useragent AS useragent, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, count AS count, avgduration AS avgduration, avgnumrows AS avgnumrows, countcompleted AS countcompleted, countcached AS countcached FROM dmr_getcountbyvdpviewanduseragentvdpqueries();

CHOWN admin VIEW get_count_by_vdpview_and_useragent_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_completed_by_vdpview_and_cache_vdp_queries CASCADE;

CREATE VIEW get_count_completed_by_vdpview_and_cache_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, cached AS cached, count AS count, maxduration AS maxduration, minduration AS minduration, avgduration AS avgduration, maxnumrows AS maxnumrows, minnumrows AS minnumrows, avgnumrows AS avgnumrows, countnumrows AS countnumrows FROM dmr_getcountcompletedbyvdpviewandcachevdpqueries();

CHOWN admin VIEW get_count_completed_by_vdpview_and_cache_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_completed_by_vdpview_and_query_vdp_queries CASCADE;

CREATE VIEW get_count_completed_by_vdpview_and_query_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, startdate AS startdate, enddate AS enddate, username AS username, useragent AS useragent, clientip AS clientip, accessinterface AS accessinterface, query AS query, count AS count FROM dmr_getcountcompletedbyvdpviewandqueryvdpqueries();

CHOWN admin VIEW get_count_completed_by_vdpview_and_query_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_completed_by_vdpview_and_request_type_vdp_queries CASCADE;

CREATE VIEW get_count_completed_by_vdpview_and_request_type_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, requesttype AS requesttype, count AS count, maxduration AS maxduration, minduration AS minduration, avgduration AS avgduration, maxnumrows AS maxnumrows, minnumrows AS minnumrows, avgnumrows AS avgnumrows, countnumrows AS countnumrows FROM dmr_getcountcompletedbyvdpviewandrequesttypevdpqueries();

CHOWN admin VIEW get_count_completed_by_vdpview_and_request_type_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_count_completed_by_vdpview_vdp_queries CASCADE;

CREATE VIEW get_count_completed_by_vdpview_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, vdpview AS vdpview, username AS username, useragent AS useragent, clientip AS clientip, accessinterface AS accessinterface, var_count AS var_count, var_avgduration AS var_avgduration, var_maxnumrows AS var_maxnumrows, var_minduration AS var_minduration, count AS count, maxduration AS maxduration, minduration AS minduration, avgduration AS avgduration, maxnumrows AS maxnumrows, minnumrows AS minnumrows, avgnumrows AS avgnumrows, countnumrows AS countnumrows, countcompleted AS countcompleted, countcached AS countcached, activatecache AS activatecache, createindex AS createindex FROM dmr_getcountcompletedbyvdpviewvdpqueries();

CHOWN admin VIEW get_count_completed_by_vdpview_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_query_by_cache_and_hour_vdp_queries CASCADE;

CREATE VIEW get_query_by_cache_and_hour_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, startdate AS startdate, enddate AS enddate, startdatastoragetime AS startdatastoragetime, vdpview AS vdpview, databasename AS databasename, vdpconditionlist AS vdpconditionlist, datastoragetime AS datastoragetime, numreceivedrows AS numreceivedrows, numinsertedrows AS numinsertedrows, dateinmillis AS dateinmillis, loadtype AS loadtype FROM dmr_getquerybycacheandhourvdpqueries();

CHOWN admin VIEW get_query_by_cache_and_hour_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS get_query_by_vdp_view_and_hour_vdp_queries CASCADE;

CREATE VIEW get_query_by_vdp_view_and_hour_vdp_queries AS SELECT dbquery AS dbquery, dbcache AS dbcache, vdpdatabase AS vdpdatabase, vdpview AS vdpview, username AS username, incominghour AS incominghour, duration AS duration, waitingtime AS waitingtime, numrows AS numrows, cached AS cached, dateinmillis AS dateinmillis, startdate AS startdate, enddate AS enddate, accessinterface AS accessinterface, query AS query, completed AS completed, useragent AS useragent, clientip AS clientip FROM dmr_getquerybyvdpviewandhourvdpqueries();

CHOWN admin VIEW get_query_by_vdp_view_and_hour_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_cache_pattern CASCADE;

CREATE VIEW p_base_vdp_cache_pattern AS SELECT base_vdp_cache_pattern.databasename AS databasename, base_vdp_cache_pattern.viewname AS viewname, base_vdp_cache_pattern.projectedfields AS projectedfields, base_vdp_cache_pattern.numconditions AS numconditions, base_vdp_cache_pattern.vdpconditionlist AS vdpconditionlist, base_vdp_cache_pattern.cachestatus AS cachestatus, base_vdp_cache_pattern.ttlstatusincache AS ttlstatusincache, base_vdp_cache_pattern.ttlincache AS ttlincache, base_vdp_cache_pattern.querypatternstate AS querypatternstate, base_vdp_cache_pattern.exception AS exception, base_vdp_cache_pattern.numofinsertedrows AS numofinsertedrows, base_vdp_cache_pattern.numofreceivedrows AS numofreceivedrows, formatdate('yyyy/MM/dd/HH', startquerypatternstoragetime) AS startquerypatternstoragetime, base_vdp_cache_pattern.querypatternstoragetime AS querypatternstoragetime, formatdate('yyyy/MM/dd/HH', startcachedresultmetadatastoragetime) AS startcachedresultmetadatastoragetime, base_vdp_cache_pattern.cachedresultmetadatastoragetime AS cachedresultmetadatastoragetime, formatdate('yyyy/MM/dd/HH:mm', base_vdp_cache_pattern.startdatastoragetime) AS startdatastoragetime, cast('long', trim(base_vdp_cache_pattern.datastoragetime)) AS datastoragetime, case WHEN (cachestatus like 'FULL') THEN true END AS cachestatus_full, case WHEN (cachestatus like 'PARTIAL') THEN true END AS cachestatus_partial, case WHEN (cachestatus like 'PARTIAL EXACT') THEN true END AS cachestatus_partialexact, case WHEN (cachestatus like 'PARTIAL PRELOAD') THEN true END AS cachestatus_partialpreload, case WHEN (cachestatus like 'PARTIAL EXACT PRELOAD') THEN true END AS cachestatus_partialexactpreload, base_vdp_cache_pattern.searchstartdate_0 AS searchstartdate_0, base_vdp_cache_pattern.searchenddate_0 AS searchenddate_0 FROM base_vdp_cache_pattern;

CHOWN admin VIEW p_base_vdp_cache_pattern LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_queries_pattern CASCADE;

CREATE VIEW p_base_vdp_queries_pattern AS SELECT base_vdp_queries_pattern.database_0 AS database_0, base_vdp_queries_pattern.username AS username, replacemap(base_vdp_queries_pattern.requesttype, 'requesttype_monitor_vdp_queries') AS requesttype, trim(elements) AS vdpview, base_vdp_queries_pattern.useragent AS useragent, base_vdp_queries_pattern.accessinterface AS accessinterface, base_vdp_queries_pattern.clientip AS clientip, formatdate('yyyy/MM/dd', base_vdp_queries_pattern.starttime) AS incomingdate, formatdate('yyyy/MM/dd/HH', base_vdp_queries_pattern.starttime) AS incominghour, base_vdp_queries_pattern.duration AS duration, base_vdp_queries_pattern.waitingtime AS waitingtime, case WHEN (base_vdp_queries_pattern.numrows = '-1') THEN 0 ELSE base_vdp_queries_pattern.numrows END AS numrows, case WHEN (base_vdp_queries_pattern.state = '-') THEN 'SYNTAX_ERROR' ELSE base_vdp_queries_pattern.state END AS state, formatdate('yyyy/MM/dd/HH:mm', base_vdp_queries_pattern.starttime) AS incomingminute, nullif(base_vdp_queries_pattern.completed, false) AS completed, base_vdp_queries_pattern.query AS query, nullif(base_vdp_queries_pattern.cache, false) AS cached, base_vdp_queries_pattern.searchstartdate_0 AS searchstartdate_0, base_vdp_queries_pattern.searchenddate_0 AS searchenddate_0 FROM base_vdp_queries_pattern;

CHOWN admin VIEW p_base_vdp_queries_pattern LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_resources_pattern CASCADE;

CREATE VIEW p_base_vdp_resources_pattern AS SELECT base_vdp_resources_pattern.date AS date, base_vdp_resources_pattern.permgen AS permgen, base_vdp_resources_pattern.permgen_max AS permgen_max, base_vdp_resources_pattern.survivorspace AS survivorspace, base_vdp_resources_pattern.survivorspace_max AS survivorspace_max, base_vdp_resources_pattern.tenuredgen AS tenuredgen, base_vdp_resources_pattern.tenuredgen_max AS tenuredgen_max, base_vdp_resources_pattern.edenspace AS edenspace, base_vdp_resources_pattern.edenspace_max AS edenspace_max, base_vdp_resources_pattern.codecache AS codecache, base_vdp_resources_pattern.codecache_max AS codecache_max, base_vdp_resources_pattern.heapmemoryusage AS heapmemoryusage, base_vdp_resources_pattern.heapmemoryusage_max AS heapmemoryusage_max, base_vdp_resources_pattern.nonheapmemoryusage AS nonheapmemoryusage, base_vdp_resources_pattern.nonheapmemoryusage_max AS nonheapmemoryusage_max, base_vdp_resources_pattern.loadedclasscount AS loadedclasscount, base_vdp_resources_pattern.totalloadedclasscount AS totalloadedclasscount, base_vdp_resources_pattern.threadcount AS threadcount, base_vdp_resources_pattern.peakthreadcount AS peakthreadcount, base_vdp_resources_pattern.vdptotalconn AS vdptotalconn, base_vdp_resources_pattern.vdpactiveconn AS vdpactiveconn, base_vdp_resources_pattern.vdpactiverequests AS vdpactiverequests, base_vdp_resources_pattern.vdpwaitingrequests AS vdpwaitingrequests, base_vdp_resources_pattern.vdptotalmem AS vdptotalmem, base_vdp_resources_pattern.vdpmaxmem AS vdpmaxmem, gettimeinmillis(base_vdp_resources_pattern.date) AS dateinmillis, base_vdp_resources_pattern.cpupercentage AS cpupercentage, base_vdp_resources_pattern.gc_cc_psmarksweep AS gc_cc_psmarksweep, base_vdp_resources_pattern.gc_cc_psscavenge AS gc_cc_psscavenge, base_vdp_resources_pattern.gc_ct_psmarksweep AS gc_ct_psmarksweep, base_vdp_resources_pattern.gc_ct_psscavenge AS gc_ct_psscavenge, base_vdp_resources_pattern.gc_percentagepsmarksweep AS gc_percentagepsmarksweep, base_vdp_resources_pattern.gc_percentagepsscavenge AS gc_percentagepsscavenge, base_vdp_resources_pattern.gc_percentage AS gc_percentage, base_vdp_resources_pattern.searchstartdate_0 AS searchstartdate_0, base_vdp_resources_pattern.searchenddate_0 AS searchenddate_0 FROM base_vdp_resources_pattern;

CHOWN admin VIEW p_base_vdp_resources_pattern LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_cache_pattern_2 CASCADE;

CREATE VIEW p_base_vdp_cache_pattern_2 AS SELECT p_base_vdp_cache_pattern.startquerypatternstoragetime AS startquerypatternstoragetime, p_base_vdp_cache_pattern.startcachedresultmetadatastoragetime AS startcachedresultmetadatastoragetime, p_base_vdp_cache_pattern.databasename AS databasename, p_base_vdp_cache_pattern.viewname AS vdpview, p_base_vdp_cache_pattern.startdatastoragetime AS startdatastoragetime, p_base_vdp_cache_pattern.datastoragetime AS datastoragetime, p_base_vdp_cache_pattern.projectedfields AS projectedfields, p_base_vdp_cache_pattern.numconditions AS numconditions, p_base_vdp_cache_pattern.vdpconditionlist AS vdpconditionlist, p_base_vdp_cache_pattern.cachestatus AS cachestatus, p_base_vdp_cache_pattern.ttlstatusincache AS ttlstatusincache, p_base_vdp_cache_pattern.ttlincache AS ttlincache, p_base_vdp_cache_pattern.querypatternstate AS querypatternstate, p_base_vdp_cache_pattern.exception AS exception, p_base_vdp_cache_pattern.numofinsertedrows AS numofinsertedrows, p_base_vdp_cache_pattern.numofreceivedrows AS numofreceivedrows, p_base_vdp_cache_pattern.cachestatus_full AS cachestatus_full, p_base_vdp_cache_pattern.cachestatus_partial AS cachestatus_partial, p_base_vdp_cache_pattern.querypatternstoragetime AS querypatternstoragetime, p_base_vdp_cache_pattern.cachestatus_partialexact AS cachestatus_partialexact, p_base_vdp_cache_pattern.cachestatus_partialpreload AS cachestatus_partialpreload, p_base_vdp_cache_pattern.cachedresultmetadatastoragetime AS cachedresultmetadatastoragetime, p_base_vdp_cache_pattern.cachestatus_partialexactpreload AS cachestatus_partialexactpreload, startdate, enddate FROM p_base_vdp_cache_pattern WHERE (searchstartdate_0 = startdate AND searchenddate_0 = enddate) USING PARAMETERS ( startdate : date to_date('yyyy-MM-dd HH:mm:ssXXX', '1970-01-01 01:00:00+01:00'), enddate : date to_date('yyyy-MM-dd HH:mm:ssXXX', '3013-11-07 06:00:00+01:00'));

CHOWN admin VIEW p_base_vdp_cache_pattern_2 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_queries_pattern_2 CASCADE;

CREATE VIEW p_base_vdp_queries_pattern_2 AS SELECT p_base_vdp_queries_pattern.database_0 AS database_0, p_base_vdp_queries_pattern.requesttype AS requesttype, p_base_vdp_queries_pattern.vdpview AS vdpview, p_base_vdp_queries_pattern.incomingdate AS incomingdate, p_base_vdp_queries_pattern.incominghour AS incominghour, p_base_vdp_queries_pattern.duration AS duration, p_base_vdp_queries_pattern.waitingtime AS waitingtime, case WHEN (p_base_vdp_queries_pattern.numrows = '-1') THEN 0 ELSE p_base_vdp_queries_pattern.numrows END AS numrows, case WHEN (p_base_vdp_queries_pattern.state = '-') THEN 'SYNTAX_ERROR' ELSE p_base_vdp_queries_pattern.state END AS state, p_base_vdp_queries_pattern.incomingminute AS incomingminute, p_base_vdp_queries_pattern.completed AS completed, p_base_vdp_queries_pattern.query AS query, p_base_vdp_queries_pattern.cached AS cached, p_base_vdp_queries_pattern.username AS output_username, p_base_vdp_queries_pattern.useragent AS useragent, p_base_vdp_queries_pattern.accessinterface AS output_accessinterface, accessinterface, p_base_vdp_queries_pattern.clientip AS clientip, startdate, enddate, username FROM p_base_vdp_queries_pattern WHERE (searchstartdate_0 = startdate AND searchenddate_0 = enddate) USING PARAMETERS ( startdate : date to_date('yyyy-MM-dd''T''HH:mm:ssXXX', '1970-01-01T01:00:00+01:00'), enddate : date to_date('yyyy-MM-dd''T''HH:mm:ssXXX', '3013-11-07T06:00:00+01:00'));

CHOWN admin VIEW p_base_vdp_queries_pattern_2 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_base_vdp_resources_pattern_2 CASCADE;

CREATE VIEW p_base_vdp_resources_pattern_2 AS SELECT p_base_vdp_resources_pattern.date AS date, p_base_vdp_resources_pattern.permgen AS permgen, p_base_vdp_resources_pattern.permgen_max AS permgen_max, p_base_vdp_resources_pattern.survivorspace AS survivorspace, p_base_vdp_resources_pattern.survivorspace_max AS survivorspace_max, p_base_vdp_resources_pattern.tenuredgen AS tenuredgen, p_base_vdp_resources_pattern.tenuredgen_max AS tenuredgen_max, p_base_vdp_resources_pattern.edenspace AS edenspace, p_base_vdp_resources_pattern.edenspace_max AS edenspace_max, p_base_vdp_resources_pattern.codecache AS codecache, p_base_vdp_resources_pattern.codecache_max AS codecache_max, p_base_vdp_resources_pattern.heapmemoryusage AS heapmemoryusage, p_base_vdp_resources_pattern.heapmemoryusage_max AS heapmemoryusage_max, p_base_vdp_resources_pattern.nonheapmemoryusage AS nonheapmemoryusage, p_base_vdp_resources_pattern.nonheapmemoryusage_max AS nonheapmemoryusage_max, p_base_vdp_resources_pattern.loadedclasscount AS loadedclasscount, p_base_vdp_resources_pattern.totalloadedclasscount AS totalloadedclasscount, p_base_vdp_resources_pattern.threadcount AS threadcount, p_base_vdp_resources_pattern.peakthreadcount AS peakthreadcount, p_base_vdp_resources_pattern.vdptotalconn AS vdptotalconn, p_base_vdp_resources_pattern.vdpactiveconn AS vdpactiveconn, p_base_vdp_resources_pattern.vdpactiverequests AS vdpactiverequests, p_base_vdp_resources_pattern.vdpwaitingrequests AS vdpwaitingrequests, p_base_vdp_resources_pattern.vdptotalmem AS vdptotalmem, p_base_vdp_resources_pattern.vdpmaxmem AS vdpmaxmem, p_base_vdp_resources_pattern.dateinmillis AS dateinmillis, p_base_vdp_resources_pattern.cpupercentage AS cpupercentage, p_base_vdp_resources_pattern.gc_cc_psmarksweep AS gc_cc_psmarksweep, p_base_vdp_resources_pattern.gc_cc_psscavenge AS gc_cc_psscavenge, p_base_vdp_resources_pattern.gc_ct_psmarksweep AS gc_ct_psmarksweep, p_base_vdp_resources_pattern.gc_ct_psscavenge AS gc_ct_psscavenge, p_base_vdp_resources_pattern.gc_percentagepsmarksweep AS gc_percentagepsmarksweep, p_base_vdp_resources_pattern.gc_percentagepsscavenge AS gc_percentagepsscavenge, p_base_vdp_resources_pattern.gc_percentage AS gc_percentage, p_base_vdp_resources_pattern.searchstartdate_0 AS searchstartdate_0, p_base_vdp_resources_pattern.searchenddate_0 AS searchenddate_0, startdate, enddate FROM p_base_vdp_resources_pattern WHERE (searchstartdate_0 = startdate AND searchenddate_0 = enddate) USING PARAMETERS ( startdate : date to_date('yyyy-MM-dd''T''HH:mm:ssXXX', '1970-01-01T01:00:00+01:00'), enddate : date to_date('yyyy-MM-dd''T''HH:mm:ssXXX', '3013-11-07T06:00:00+01:00'));

CHOWN admin VIEW p_base_vdp_resources_pattern_2 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS completed_vdp_queries CASCADE;

CREATE VIEW completed_vdp_queries AS SELECT p_base_vdp_queries_pattern_2.database_0 AS database_0, ltrim(rtrim(lower(query))) AS query, p_base_vdp_queries_pattern_2.requesttype AS requesttype, p_base_vdp_queries_pattern_2.vdpview AS vdpview, p_base_vdp_queries_pattern_2.incomingdate AS incomingdate, p_base_vdp_queries_pattern_2.incominghour AS incominghour, p_base_vdp_queries_pattern_2.duration AS duration, p_base_vdp_queries_pattern_2.waitingtime AS waitingtime, p_base_vdp_queries_pattern_2.numrows AS numrows, p_base_vdp_queries_pattern_2.state AS state, p_base_vdp_queries_pattern_2.incomingminute AS incomingminute, p_base_vdp_queries_pattern_2.completed AS completed, p_base_vdp_queries_pattern_2.cached AS cached, p_base_vdp_queries_pattern_2.startdate AS startdate, p_base_vdp_queries_pattern_2.enddate AS enddate, p_base_vdp_queries_pattern_2.username AS username, p_base_vdp_queries_pattern_2.useragent AS useragent, p_base_vdp_queries_pattern_2.clientip AS clientip, p_base_vdp_queries_pattern_2.accessinterface AS accessinterface FROM p_base_vdp_queries_pattern_2 WHERE state <> 'ERROR';

CHOWN admin VIEW completed_vdp_queries LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS final_connections_vdp_resources CASCADE;

CREATE VIEW final_connections_vdp_resources AS SELECT date AS date, dateinmillis AS dateinmillis, threadcount AS threadcount, peakthreadcount AS peakthreadcount, vdptotalconn AS vdptotalconn, vdpactiveconn AS vdpactiveconn, vdpactiverequests AS vdpactiverequests, vdpwaitingrequests AS vdpwaitingrequests, startdate AS startdate, enddate AS enddate FROM p_base_vdp_resources_pattern_2 ORDER BY date ASC;

CHOWN admin VIEW final_connections_vdp_resources LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS final_cpu_gc_usage_vdp_resources CASCADE;

CREATE VIEW final_cpu_gc_usage_vdp_resources AS SELECT date AS date, cpupercentage AS cpupercentage, gc_percentagepsmarksweep AS gc_percentagepsmarksweep, gc_percentagepsscavenge AS gc_percentagepsscavenge, gc_percentage AS gc_percentage, dateinmillis AS dateinmillis, startdate AS startdate, enddate AS enddate FROM p_base_vdp_resources_pattern_2 ORDER BY date ASC;

CHOWN admin VIEW final_cpu_gc_usage_vdp_resources LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS final_memory_usage_vdp_resources CASCADE;

CREATE VIEW final_memory_usage_vdp_resources AS SELECT date AS date, permgen AS permgen, permgen_max AS permgen_max, survivorspace AS survivorspace, survivorspace_max AS survivorspace_max, tenuredgen AS tenuredgen, tenuredgen_max AS tenuredgen_max, edenspace AS edenspace, edenspace_max AS edenspace_max, codecache AS codecache, codecache_max AS codecache_max, heapmemoryusage AS heapmemoryusage, heapmemoryusage_max AS heapmemoryusage_max, nonheapmemoryusage AS nonheapmemoryusage, nonheapmemoryusage_max AS nonheapmemoryusage_max, loadedclasscount AS loadedclasscount, totalloadedclasscount AS totalloadedclasscount, vdptotalmem AS vdptotalmem, vdpmaxmem AS vdpmaxmem, dateinmillis AS dateinmillis, startdate AS startdate, enddate AS enddate FROM p_base_vdp_resources_pattern_2 ORDER BY date ASC;

CHOWN admin VIEW final_memory_usage_vdp_resources LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS final_query_by_vdpview_and_hour_vdp_queries CASCADE;

CREATE VIEW final_query_by_vdpview_and_hour_vdp_queries AS SELECT vdpview AS vdpview, username AS username, formatdate('yyyy/MM/dd HH', to_date('yyyy/MM/dd/HH', incominghour)) AS incominghour, duration AS duration, waitingtime AS waitingtime, numrows AS numrows, cached AS cached, gettimeinmillis(to_date('yyyy/MM/dd/HH', incominghour)) AS dateinmillis, useragent AS useragent, clientip AS clientip, accessinterface AS accessinterface, query AS query, completed AS completed, startdate AS startdate, enddate AS enddate FROM p_base_vdp_queries_pattern_2 ORDER BY incominghour DESC;

CHOWN admin VIEW final_query_by_vdpview_and_hour_vdp_queries LASTMODIFICATIONUSER admin;

# #######################################
# ASSOCIATIONS of denodo_monitor
# #######################################
# No associations in database denodo_monitor
# #######################################
# WEBSERVICES of denodo_monitor
# #######################################
DROP REST WEBSERVICE IF EXISTS wsdefault;

CREATE REST WEBSERVICE wsdefault
    CONNECTION (
        CHUNKSIZE = 1000
        CHUNKTIMEOUT = 90000
        QUERYTIMEOUT = 900000
        POOLENABLED = true
        POOLINITSIZE = 0
        POOLMAXACTIVE = 30
    )
    DEFAULTREPRESENTATION = JSON
    SUPPORTEDREPRESENTATIONS (JSON)    AUTHENTICATION (BASIC
    USER 'dmr'
    PASSWORD 'IMV8E00r+AO2jh1sYrdeYcWMcZBxSeU0FeNDdcf2luiS6D3Po7LolS8FK1C2GLYYTGZQMc6Z7rx73jgB1ugFH3BUO1pLGlE6INIRFwG/N6NFOOR1+w1wIZWmsDWNRVWR' ENCRYPTED )

    RESOURCES (
        VIEW final_connections_vdp_resources FIELDS (
            date : 'date'('/date'='DATE'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            threadcount : 'long'('/threadcount'='THREADCOUNT'), 
            peakthreadcount : 'long'('/peakthreadcount'='PEAKTHREADCOUNT'), 
            vdptotalconn : 'long'('/vdptotalconn'='VDPTOTALCONN'), 
            vdpactiveconn : 'long'('/vdpactiveconn'='VDPACTIVECONN'), 
            vdpactiverequests : 'long'('/vdpactiverequests'='VDPACTIVEREQUESTS'), 
            vdpwaitingrequests : 'long'('/vdpwaitingrequests'='VDPWAITINGREQUESTS'), 
            startdate : 'date'('/startdate'='STARTDATE'), 
            enddate : 'date'('/enddate'='ENDDATE')
        ),
        VIEW final_cpu_gc_usage_vdp_resources FIELDS (
            date : 'date'('/date'='DATE'), 
            cpupercentage : 'float'('/cpupercentage'='CPUPERCENTAGE'), 
            gc_percentagepsmarksweep : 'float'('/gc_percentagepsmarksweep'='GC_PERCENTAGEPSMARKSWEEP'), 
            gc_percentagepsscavenge : 'float'('/gc_percentagepsscavenge'='GC_PERCENTAGEPSSCAVENGE'), 
            gc_percentage : 'float'('/gc_percentage'='GC_PERCENTAGE'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            startdate : 'date'('/startdate'='STARTDATE'), 
            enddate : 'date'('/enddate'='ENDDATE')
        ),
        VIEW final_memory_usage_vdp_resources FIELDS (
            date : 'date'('/date'='DATE'), 
            permgen : 'long'('/permgen'='PERMGEN'), 
            permgen_max : 'long'('/permgen_max'='PERMGEN_MAX'), 
            survivorspace : 'long'('/survivorspace'='SURVIVORSPACE'), 
            survivorspace_max : 'long'('/survivorspace_max'='SURVIVORSPACE_MAX'), 
            tenuredgen : 'long'('/tenuredgen'='TENUREDGEN'), 
            tenuredgen_max : 'long'('/tenuredgen_max'='TENUREDGEN_MAX'), 
            edenspace : 'long'('/edenspace'='EDENSPACE'), 
            edenspace_max : 'long'('/edenspace_max'='EDENSPACE_MAX'), 
            codecache : 'long'('/codecache'='CODECACHE'), 
            codecache_max : 'long'('/codecache_max'='CODECACHE_MAX'), 
            heapmemoryusage : 'long'('/heapmemoryusage'='HEAPMEMORYUSAGE'), 
            heapmemoryusage_max : 'long'('/heapmemoryusage_max'='HEAPMEMORYUSAGE_MAX'), 
            nonheapmemoryusage : 'long'('/nonheapmemoryusage'='NONHEAPMEMORYUSAGE'), 
            nonheapmemoryusage_max : 'long'('/nonheapmemoryusage_max'='NONHEAPMEMORYUSAGE_MAX'), 
            loadedclasscount : 'long'('/loadedclasscount'='LOADEDCLASSCOUNT'), 
            totalloadedclasscount : 'long'('/totalloadedclasscount'='TOTALLOADEDCLASSCOUNT'), 
            vdptotalmem : 'long'('/vdptotalmem'='VDPTOTALMEM'), 
            vdpmaxmem : 'long'('/vdpmaxmem'='VDPMAXMEM'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            startdate : 'date'('/startdate'='STARTDATE'), 
            enddate : 'date'('/enddate'='ENDDATE')
        ),
        VIEW final_query_by_vdpview_and_hour_vdp_queries FIELDS (
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            incominghour : 'text'('/incominghour'='INCOMINGHOUR'), 
            duration : 'long'('/duration'='DURATION'), 
            waitingtime : 'long'('/waitingtime'='WAITINGTIME'), 
            numrows : 'long'('/numrows'='NUMROWS'), 
            cached : 'boolean'('/cached'='CACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            query : 'text'('/query'='QUERY'), 
            completed : 'boolean'('/completed'='COMPLETED'), 
            startdate : 'date'('/startdate'='STARTDATE'), 
            enddate : 'date'('/enddate'='ENDDATE')
        ),
        VIEW get_count_by_access_interface_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            access_interface : 'text'('/access_interface'='ACCESS_INTERFACE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_database_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            database_0 : 'text'('/database_0'='DATABASE_0'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_cache_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            cached : 'boolean'('/cached'='CACHED')
        ),
        VIEW get_count_by_database_vdp_queries_by_user FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            database_0 : 'text'('/database_0'='DATABASE_0'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            clientip : 'text'('/clientip'='CLIENTIP'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE')
        ),
        VIEW get_count_by_date_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            incomingdate : 'text'('/incomingdate'='INCOMINGDATE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS')
        ),
        VIEW get_count_by_hour_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            incominghour : 'text'('/incominghour'='INCOMINGHOUR'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE')
        ),
        VIEW get_count_by_minute_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            incomingminute : 'text'('/incomingminute'='INCOMINGMINUTE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            startdate : 'text'('/startdate'='STARTDATE')
        ),
        VIEW get_count_by_request_type_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            requesttype : 'text'('/requesttype'='REQUESTTYPE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_state_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            state : 'text'('/state'='STATE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_type_and_vdpview_performance_cache FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            cachestatus : 'text'('/cachestatus'='CACHESTATUS'), 
            count : 'int'('/count'='COUNT'), 
            avgdatastoragetime : 'double'('/avgdatastoragetime'='AVGDATASTORAGETIME'), 
            avgnumofinsertedrows : 'double'('/avgnumofinsertedrows'='AVGNUMOFINSERTEDROWS'), 
            avgnumofreceivedrows : 'double'('/avgnumofreceivedrows'='AVGNUMOFRECEIVEDROWS'), 
            maxdatastoragetime : 'long'('/maxdatastoragetime'='MAXDATASTORAGETIME'), 
            mindatastoragetime : 'long'('/mindatastoragetime'='MINDATASTORAGETIME'), 
            maxnumofinsertedrows : 'long'('/maxnumofinsertedrows'='MAXNUMOFINSERTEDROWS'), 
            minnumofinsertedrows : 'long'('/minnumofinsertedrows'='MINNUMOFINSERTEDROWS'), 
            maxnumofreceivedrows : 'long'('/maxnumofreceivedrows'='MAXNUMOFRECEIVEDROWS'), 
            minnumofreceivedrows : 'long'('/minnumofreceivedrows'='MINNUMOFRECEIVEDROWS')
        ),
        VIEW get_count_by_username_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            username : 'text'('/username'='USERNAME'), 
            user_name : 'text'('/user_name'='USER_NAME'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_useragent_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            count : 'int'('/count'='COUNT'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_clientip_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            count : 'int'('/count'='COUNT'), 
            clientip : 'text'('/clientip'='CLIENTIP'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_vdpview_and_access_interface_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            access_interface : 'text'('/access_interface'='ACCESS_INTERFACE')
        ),
        VIEW get_count_by_vdpview_and_database_vdp_cache FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            databasename : 'text'('/databasename'='DATABASENAME'), 
            count : 'int'('/count'='COUNT'), 
            avgdatastoragetime : 'double'('/avgdatastoragetime'='AVGDATASTORAGETIME'), 
            avgnumofinsertedrows : 'double'('/avgnumofinsertedrows'='AVGNUMOFINSERTEDROWS'), 
            avgnumofreceivedrows : 'double'('/avgnumofreceivedrows'='AVGNUMOFRECEIVEDROWS')
        ),
        VIEW get_count_by_vdpview_and_hour_vdp_cache FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            startdatastoragetime : 'text'('/startdatastoragetime'='STARTDATASTORAGETIME'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            count : 'int'('/count'='COUNT'), 
            avgdatastoragetime : 'double'('/avgdatastoragetime'='AVGDATASTORAGETIME'), 
            avgnumreceivedrows : 'double'('/avgnumreceivedrows'='AVGNUMRECEIVEDROWS'), 
            avgnuminsertedrows : 'double'('/avgnuminsertedrows'='AVGNUMINSERTEDROWS'), 
            countnuminsertedrows : 'int'('/countnuminsertedrows'='COUNTNUMINSERTEDROWS'), 
            countnumreceivedrows : 'int'('/countnumreceivedrows'='COUNTNUMRECEIVEDROWS'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            cachestatus_full : 'int'('/cachestatus_full'='CACHESTATUS_FULL'), 
            cachestatus_partial : 'int'('/cachestatus_partial'='CACHESTATUS_PARTIAL'), 
            cachestatus_partialexact : 'int'('/cachestatus_partialexact'='CACHESTATUS_PARTIALEXACT'), 
            cachestatus_partialpreload : 'int'('/cachestatus_partialpreload'='CACHESTATUS_PARTIALPRELOAD'), 
            cachestatus_partialexactpreload : 'int'('/cachestatus_partialexactpreload'='CACHESTATUS_PARTIALEXACTPRELOAD')
        ),
        VIEW get_count_by_vdpview_and_hour_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            incominghour : 'text'('/incominghour'='INCOMINGHOUR'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgwaitingtime : 'double'('/avgwaitingtime'='AVGWAITINGTIME'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            clientip : 'text'('/clientip'='CLIENTIP')
        ),
        VIEW get_count_by_vdpview_and_query_vdp_cache FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            vdpconditionlist : 'text'('/vdpconditionlist'='VDPCONDITIONLIST'), 
            count : 'int'('/count'='COUNT')
        ),
        VIEW get_count_by_vdpview_and_request_type_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            requesttype : 'text'('/requesttype'='REQUESTTYPE'), 
            count : 'int'('/count'='COUNT'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_vdpview_and_type_vdp_cache FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            cachestatus : 'text'('/cachestatus'='CACHESTATUS'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            count : 'int'('/count'='COUNT'), 
            avgdatastoragetime : 'double'('/avgdatastoragetime'='AVGDATASTORAGETIME'), 
            avgnumofinsertedrows : 'double'('/avgnumofinsertedrows'='AVGNUMOFINSERTEDROWS'), 
            avgnumofreceivedrows : 'double'('/avgnumofreceivedrows'='AVGNUMOFRECEIVEDROWS')
        ),
        VIEW get_count_by_vdpview_and_user_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            user_name : 'text'('/user_name'='USER_NAME'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_vdpview_and_useragent_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_vdpview_and_clientip_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            clientip : 'text'('/clientip'='CLIENTIP'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            count : 'int'('/count'='COUNT'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED')
        ),
        VIEW get_count_by_cache_vdpview FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            count : 'int'('/count'='COUNT'), 
            max_querypatternstoragetime : 'long'('/max_querypatternstoragetime'='MAX_QUERYPATTERNSTORAGETIME'), 
            min_querypatternstoragetime : 'long'('/min_querypatternstoragetime'='MIN_QUERYPATTERNSTORAGETIME'), 
            avg_querypatternstoragetime : 'double'('/avg_querypatternstoragetime'='AVG_QUERYPATTERNSTORAGETIME'), 
            max_cachedresultmetadatastoragetime : 'long'('/max_cachedresultmetadatastoragetime'='MAX_CACHEDRESULTMETADATASTORAGETIME'), 
            min_cachedresultmetadatastoragetime : 'long'('/min_cachedresultmetadatastoragetime'='MIN_CACHEDRESULTMETADATASTORAGETIME'), 
            avg_cachedresultmetadatastoragetime : 'double'('/avg_cachedresultmetadatastoragetime'='AVG_CACHEDRESULTMETADATASTORAGETIME'), 
            min_datastoragetime : 'long'('/min_datastoragetime'='MIN_DATASTORAGETIME'), 
            max_datastoragetime : 'long'('/max_datastoragetime'='MAX_DATASTORAGETIME'), 
            avg_datastoragetime : 'double'('/avg_datastoragetime'='AVG_DATASTORAGETIME'), 
            max_numofinsertedrows : 'long'('/max_numofinsertedrows'='MAX_NUMOFINSERTEDROWS'), 
            min_numofinsertedrows : 'long'('/min_numofinsertedrows'='MIN_NUMOFINSERTEDROWS'), 
            avg_numofinsertedrows : 'double'('/avg_numofinsertedrows'='AVG_NUMOFINSERTEDROWS'), 
            max_numofreceivedrows : 'long'('/max_numofreceivedrows'='MAX_NUMOFRECEIVEDROWS'), 
            min_numofreceivedrows : 'long'('/min_numofreceivedrows'='MIN_NUMOFRECEIVEDROWS'), 
            avg_numofreceivedrows : 'double'('/avg_numofreceivedrows'='AVG_NUMOFRECEIVEDROWS'), 
            cachestatus_full : 'int'('/cachestatus_full'='CACHESTATUS_FULL'), 
            cachestatus_partial : 'int'('/cachestatus_partial'='CACHESTATUS_PARTIAL'), 
            cachestatus_partialexact : 'int'('/cachestatus_partialexact'='CACHESTATUS_PARTIALEXACT'), 
            cachestatus_partialpreload : 'int'('/cachestatus_partialpreload'='CACHESTATUS_PARTIALPRELOAD'), 
            cachestatus_partialexactpreload : 'int'('/cachestatus_partialexactpreload'='CACHESTATUS_PARTIALEXACTPRELOAD')
        ),
        VIEW get_count_completed_by_vdpview_and_query_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            username : 'text'('/username'='USERNAME'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            query : 'text'('/query'='QUERY'), 
            count : 'int'('/count'='COUNT'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            clientip : 'text'('/clientip'='CLIENTIP')
        ),
        VIEW get_count_completed_by_vdpview_and_request_type_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            requesttype : 'text'('/requesttype'='REQUESTTYPE'), 
            count : 'int'('/count'='COUNT'), 
            maxduration : 'double'('/maxduration'='MAXDURATION'), 
            minduration : 'double'('/minduration'='MINDURATION'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            maxnumrows : 'long'('/maxnumrows'='MAXNUMROWS'), 
            minnumrows : 'long'('/minnumrows'='MINNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS')
        ),
        VIEW get_count_completed_by_vdpview_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            var_count : 'int'('/var_count'='VAR_COUNT'), 
            var_avgduration : 'double'('/var_avgduration'='VAR_AVGDURATION'), 
            var_maxnumrows : 'long'('/var_maxnumrows'='VAR_MAXNUMROWS'), 
            var_minduration : 'long'('/var_minduration'='VAR_MINDURATION'), 
            count : 'int'('/count'='COUNT'), 
            maxduration : 'double'('/maxduration'='MAXDURATION'), 
            minduration : 'double'('/minduration'='MINDURATION'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            maxnumrows : 'long'('/maxnumrows'='MAXNUMROWS'), 
            minnumrows : 'long'('/minnumrows'='MINNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS'), 
            countcompleted : 'int'('/countcompleted'='COUNTCOMPLETED'), 
            countcached : 'int'('/countcached'='COUNTCACHED'), 
            activatecache : 'boolean'('/activatecache'='ACTIVATECACHE'), 
            createindex : 'boolean'('/createindex'='CREATEINDEX'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            clientip : 'text'('/clientip'='CLIENTIP')
        ),
        VIEW get_query_by_cache_and_hour_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            startdatastoragetime : 'text'('/startdatastoragetime'='STARTDATASTORAGETIME'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            databasename : 'text'('/databasename'='DATABASENAME'), 
            vdpconditionlist : 'text'('/vdpconditionlist'='VDPCONDITIONLIST'), 
            datastoragetime : 'long'('/datastoragetime'='DATASTORAGETIME'), 
            numreceivedrows : 'long'('/numreceivedrows'='NUMRECEIVEDROWS'), 
            numinsertedrows : 'long'('/numinsertedrows'='NUMINSERTEDROWS'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            loadtype : 'text'('/loadtype'='LOADTYPE')
        ),
        VIEW get_query_by_vdp_view_and_hour_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            incominghour : 'text'('/incominghour'='INCOMINGHOUR'), 
            duration : 'double'('/duration'='DURATION'), 
            waitingtime : 'long'('/waitingtime'='WAITINGTIME'), 
            numrows : 'long'('/numrows'='NUMROWS'), 
            cached : 'boolean'('/cached'='CACHED'), 
            dateinmillis : 'long'('/dateinmillis'='DATEINMILLIS'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            query : 'text'('/query'='QUERY'), 
            completed : 'boolean'('/completed'='COMPLETED'), 
            useragent : 'text'('/useragent'='USERAGENT'), 
            clientip : 'text'('/clientip'='CLIENTIP')
        ),
        VIEW get_count_completed_by_vdpview_and_cache_vdp_queries FIELDS (
            dbquery : 'boolean'('/dbquery'='DBQUERY'), 
            dbcache : 'boolean'('/dbcache'='DBCACHE'), 
            vdpdatabase : 'text'('/vdpdatabase'='VDPDATABASE'), 
            vdpview : 'text'('/vdpview'='VDPVIEW'), 
            username : 'text'('/username'='USERNAME'), 
            startdate : 'text'('/startdate'='STARTDATE'), 
            enddate : 'text'('/enddate'='ENDDATE'), 
            accessinterface : 'text'('/accessinterface'='ACCESSINTERFACE'), 
            cached : 'boolean'('/cached'='CACHED'), 
            count : 'int'('/count'='COUNT'), 
            maxduration : 'double'('/maxduration'='MAXDURATION'), 
            minduration : 'double'('/minduration'='MINDURATION'), 
            avgduration : 'double'('/avgduration'='AVGDURATION'), 
            maxnumrows : 'long'('/maxnumrows'='MAXNUMROWS'), 
            minnumrows : 'long'('/minnumrows'='MINNUMROWS'), 
            avgnumrows : 'double'('/avgnumrows'='AVGNUMROWS'), 
            countnumrows : 'long'('/countnumrows'='COUNTNUMROWS')
        )
    )
    OPTIONS ( NULLVALUESASEMPTYXMLELEMENTS = false
        ALLOW_CORS_ORIGINS (*) ENABLED ) ;

CHOWN admin WEBSERVICE wsdefault LASTMODIFICATIONUSER admin;

# #######################################
# WIDGETS of denodo_monitor
# #######################################
# No widgets in database denodo_monitor
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of denodo_monitor
# #######################################
UNDEPLOY IF EXISTS WEBSERVICE wsdefault;

DEPLOY WEBSERVICE wsdefault LOGIN = 'admin' PASSWORD = '6gZO0zpScRdH4W7dfiJvGDuSqNJWyhq+XXaTTo8zB6AYMebPf1jpQhjLW29WI7ZtQzrje1acsQ4/tafo6rQe5HVFogIP3Y0fxAMrjCusffXuT1Brv0tQ1vnrkfwLTn4M' ENCRYPTED;

# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of denodo_monitor
# #######################################
# No deployed widgets in database denodo_monitor
# #######################################
# Closing connection with database denodo_monitor
# #######################################
CLOSE;


# 3 ====================================================================

# #######################################
# DATABASE of developer_test_db
# #######################################
DROP DATABASE IF EXISTS developer_test_db;

CREATE DATABASE developer_test_db '';

CONNECT DATABASE developer_test_db;

# #######################################
# FOLDERS of developer_test_db
# #######################################
CREATE OR REPLACE FOLDER '/01 - Connectivity_Layer' ;

CHOWN admin FOLDER '/01 - Connectivity_Layer';

CREATE OR REPLACE FOLDER '/01 - connectivity_layer/01 - Data_sources' ;

CHOWN admin FOLDER '/01 - connectivity_layer/01 - Data_sources';

CREATE OR REPLACE FOLDER '/01 - connectivity_layer/02 - Base_views' ;

CHOWN admin FOLDER '/01 - connectivity_layer/02 - Base_views';

CREATE OR REPLACE FOLDER '/01 - Data sources' ;

CHOWN admin FOLDER '/01 - Data sources';

CREATE OR REPLACE FOLDER '/02 - Base views' ;

CHOWN admin FOLDER '/02 - Base views';

CREATE OR REPLACE FOLDER '/02 - base views/Coreact' ;

CHOWN admin FOLDER '/02 - base views/Coreact';

CREATE OR REPLACE FOLDER '/02 - Integration_Layer' ;

CHOWN admin FOLDER '/02 - Integration_Layer';

CREATE OR REPLACE FOLDER '/03 - Business_Entities_Layer' ;

CHOWN admin FOLDER '/03 - Business_Entities_Layer';

CREATE OR REPLACE FOLDER '/03 - Derived views' ;

CHOWN admin FOLDER '/03 - Derived views';

CREATE OR REPLACE FOLDER '/03 - derived views/01 - Projections' ;

CHOWN admin FOLDER '/03 - derived views/01 - Projections';

CREATE OR REPLACE FOLDER '/03 - derived views/01 - projections/Coreact' ;

CHOWN admin FOLDER '/03 - derived views/01 - projections/Coreact';

CREATE OR REPLACE FOLDER '/04 - Application_Layer' ;

CHOWN admin FOLDER '/04 - Application_Layer';

CREATE OR REPLACE FOLDER '/05 - Web_Services_Layer' ;

CHOWN admin FOLDER '/05 - Web_Services_Layer';

# #######################################
# LISTENERS JMS of developer_test_db
# #######################################
# No listeners jms in database developer_test_db
# #######################################
# DATASOURCES of developer_test_db
# #######################################
DROP DATASOURCE CUSTOM IF EXISTS ds_map1 CASCADE;

CREATE DATASOURCE CUSTOM ds_map1
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CLASSNAME='com.denodo.vdb.contrib.wrapper.xls.ExcelWrapper';

CHOWN admin DATASOURCE CUSTOM ds_map1 LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS ds_map2 CASCADE;

CREATE DATASOURCE CUSTOM ds_map2
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CLASSNAME='com.denodo.vdb.contrib.wrapper.xls.ExcelWrapper';

CHOWN admin DATASOURCE CUSTOM ds_map2 LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS ds_sharepoint CASCADE;

CREATE DATASOURCE CUSTOM ds_sharepoint
    FOLDER = '/01 - data sources'
    CLASSNAME='com.denodo.connect.odata.wrapper.ODataWrapper'
    JARS 'denodo-odata2-wrapper-7.0';

CHOWN admin DATASOURCE CUSTOM ds_sharepoint LASTMODIFICATIONUSER admin;

DROP DATASOURCE JDBC IF EXISTS sqlexpress CASCADE;

CREATE DATASOURCE JDBC sqlexpress
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=testdb'
    USERNAME = 'admin'
    USERPASSWORD = 'Ysbjic0EA6Lztba3ec1ZZHen0adJbNb0MoWnzRSr3NAaRHKLe2O6RjZTIvFYj+BWPg0hGcJ/DJEJMoi5eIdClJ+/uyLIVrbdEcJvLTmG6jbmHlaBRtvmWgmqKn87i5Fi' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    );

CHOWN admin DATASOURCE JDBC sqlexpress LASTMODIFICATIONUSER admin;

DROP DATASOURCE XML IF EXISTS ds_xml_kiidoc_copy CASCADE;

CREATE DATASOURCE XML ds_xml_kiidoc_copy
    FOLDER = '/01 - data sources'
    ROUTE HTTP 'http.CommonsHttpClientConnection,120000' GET 'https://doreme.ip.is.echonet/APP%20Library/HORUS/99%20-%20Archive/@filename'
    AUTHENTICATION NTLM ( 
      USER 'b36170'
      PASSWORD 'C1tZ0pgb9TP7g3DOAKMRDHGDyLH/T2CLooYwRNa6IaweJOgKAYjRYoe0oz/7TkRk7mY/+1tfHDbaHrxFcNGfHEjzPsKmjnaZUhqYCz+OPUImUn/htnjAUmzjl+D7Gyzp' ENCRYPTED
      DOMAIN 'adroot' )
    PROXY OFF;

CHOWN admin DATASOURCE XML ds_xml_kiidoc_copy LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE developer_test_db
  CHARSET DEFAULT;

ALTER DATABASE developer_test_db
  VCS ON (
    REMOTEDB = test_db
  );

# #######################################
# WRAPPERS of developer_test_db
# #######################################
DROP WRAPPER CUSTOM IF EXISTS bv_sharepoint CASCADE;

CREATE WRAPPER CUSTOM bv_sharepoint
    FOLDER = '/02 - base views/coreact'
    DATASOURCENAME=ds_sharepoint
    PARAMETERS (
      'Service Endpoint *' = 'https://doreme.ip.is.echonet/_vti_bin/ListData.svc',
      'Entity Collection *' = 'APPLibrary',
      'Service Format *' = 'XML-Atom',
      'Service Version' = 'V2',
      'Expand Related Entities' = false,
      'Use NTLM Authentication' = true,
      'Enable Pagination' = false,
      'User' = 'b36170',
      'Password' = 'NFE8piq/TPGjAA7loSKxyOSo8JyDAXH11K3ccE4KAvAaq8WUDsI8pfQPLmpg2dvFnLw7ObVOrLvLNcyL9a1cb1hKbRRrPFAUvmFSwikDESOck++8dLRLs7HgYjB5e9vn' ENCRYPTED,
      'NTLM Domain' = 'adroot'
    )
    OUTPUTSCHEMA (
        "ContentTypeID" = 'ContentTypeID' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ApproverComments" = 'ApproverComments' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Name" = 'Name' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Title" = 'Title' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "DocumentIDValue" = 'DocumentIDValue' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "DocumentID" = 'DocumentID' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ApprovalStatus" = 'ApprovalStatus' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ActivityTypeId" = 'ActivityTypeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "DocumentTypeId" = 'DocumentTypeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "ITLanguageValue" = 'ITLanguageValue' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "APPCodeId" = 'APPCodeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Description" = 'Description' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Manager1Id" = 'Manager1Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Manager2Id" = 'Manager2Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "URL" = 'URL' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Approval" = 'Approval' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Id" = 'Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  NOT NULL SORTABLE,
        "ContentType" = 'ContentType' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Created" = 'Created' : 'java.sql.Timestamp' (OPT) (sourcetypeid='93')  SORTABLE,
        "CreatedById" = 'CreatedById' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Modified" = 'Modified' : 'java.sql.Timestamp' (OPT) (sourcetypeid='93')  SORTABLE,
        "ModifiedById" = 'ModifiedById' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "CopySource" = 'CopySource' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Path" = 'Path' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "CheckedOutToId" = 'CheckedOutToId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "VirusStatus" = 'VirusStatus' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "IsCurrentVersion" = 'IsCurrentVersion' : 'java.lang.Boolean' (OPT) (sourcetypeid='16')  SORTABLE,
        "Owshiddenversion" = 'Owshiddenversion' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Version" = 'Version' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM bv_sharepoint LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS ds_map1 CASCADE;

CREATE WRAPPER CUSTOM ds_map1
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DATASOURCENAME=ds_map1
    PARAMETERS (
      'Type of file' = 'Excel 2007 or later (*.xlsx)',
      'File location' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo Test/Map1.xlsx',
      'Extract data from all sheets' = true,
      'Extract sheet name as a new column' = false,
      'Has headers' = false,
      'Stream tuples' = true
    )
    OUTPUTSCHEMA (
        column_0 = 'Column_0' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        column_1 = 'Column_1' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM ds_map1 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS ds_map2 CASCADE;

CREATE WRAPPER CUSTOM ds_map2
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DATASOURCENAME=ds_map2
    PARAMETERS (
      'Type of file' = 'Excel 2007 or later (*.xlsx)',
      'File location' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo Test/Map2.xlsx',
      'Extract data from all sheets' = true,
      'Extract sheet name as a new column' = false,
      'Has headers' = false,
      'Stream tuples' = true
    )
    OUTPUTSCHEMA (
        column_0 = 'Column_0' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        column_1 = 'Column_1' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM ds_map2 LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_table_historical CASCADE;

CREATE WRAPPER JDBC bv_table_historical
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_Historical' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_table_historical LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_table_operational CASCADE;

CREATE WRAPPER JDBC bv_table_operational
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_Operational' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_table_operational LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS sqlexpress_bv_table_historical CASCADE;

CREATE WRAPPER JDBC sqlexpress_bv_table_historical
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_test' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypesize='10', sourcetypeid='4', sourcetypedecimals='0', sourcetypename='int', sourcetyperadix='10')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypesize='23', sourcetypeid='93', sourcetypedecimals='3', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        column_added = 'column_added' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC sqlexpress_bv_table_historical LASTMODIFICATIONUSER admin;

DROP WRAPPER XML IF EXISTS ds_xml_kiidoc_copy CASCADE;

CREATE WRAPPER XML ds_xml_kiidoc_copy
    FOLDER = '/02 - base views/coreact'
    DATASOURCENAME=ds_xml_kiidoc_copy
    TUPLEROOT 'DOCUMENT'
    OUTPUTSCHEMA ("DOCUMENT" = 'DOCUMENT' : REGISTER OF (
        "FILENAME" = 'FILENAME' : 'java.lang.String' (OBL) (DEFAULTVALUE='KIIDOC-2017-11-08-fr-FR_LU-2017-11-08-FR0013041530.xml') EXTERN,
        "PROPERTIES" = 'PROPERTIES' : REGISTER OF (
            "ID" = 'ID' : 'java.lang.Integer',
            "PROJECT_ID" = 'PROJECT_ID' : 'java.lang.Short',
            "NAME" = 'NAME' : 'java.lang.String',
            "ISIN" = 'ISIN' : 'java.lang.String',
            "FILE_NAME" = 'FILE_NAME' : 'java.lang.String',
            "LANGUAGE_CODE" = 'LANGUAGE_CODE' : 'java.lang.String',
            "VALID_FROM" = 'VALID_FROM' : 'java.lang.String',
            "CREATION_DATE" = 'CREATION_DATE' : 'java.lang.String',
            "COUNTRIES" = 'COUNTRIES' : REGISTER OF (
                "COUNTRY" = 'COUNTRY' : ARRAY OF (
                    "register_COUNTRY" = 'COUNTRY' : REGISTER OF (
                        "COUNTRY" = 'COUNTRY' : 'java.lang.String'
                    )
                )
            )
        ),
        "HIERARCHY" = 'HIERARCHY' : REGISTER OF (
            "SPONSOR" = 'SPONSOR' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.String',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "FUND" = 'FUND' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "SUB_FOND" = 'SUB_FOND' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "SHARE_CLASS" = 'SHARE_CLASS' : REGISTER OF (
                "ISIN" = 'ISIN' : 'java.lang.String',
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            )
        ),
        "CONDITIONS" = 'CONDITIONS' : REGISTER OF (
            "CONDITION" = 'CONDITION' : ARRAY OF (
                "CONDITION" = 'CONDITION' : REGISTER OF (
                    "CODE" = '#CODE' : 'java.lang.String',
                    "RESULT" = '#RESULT' : 'java.lang.Boolean',
                    "CONDITION" = 'CONDITION' : 'java.lang.String'
                )
            )
        ),
        "CATEGORIES" = 'CATEGORIES' : REGISTER OF (
            "CATEGORY" = 'CATEGORY' : ARRAY OF (
                "CATEGORY" = 'CATEGORY' : REGISTER OF (
                    "CODE" = '#CODE' : 'java.lang.String',
                    "INFORMATIONS" = 'INFORMATIONS' : REGISTER OF (
                        "INFORMATION" = 'INFORMATION' : ARRAY OF (
                            "INFORMATION" = 'INFORMATION' : REGISTER OF (
                                "ID" = '#ID' : 'java.lang.Integer',
                                "VALID_FROM" = '#VALID_FROM' : 'java.lang.String',
                                "CODE" = '#CODE' : 'java.lang.String',
                                "LEVEL" = '#LEVEL' : 'java.lang.String',
                                "NAME" = 'NAME' : 'java.lang.String',
                                "VALUE" = 'VALUE' : REGISTER OF (
                                    "BASE_TYPE" = '#BASE_TYPE' : 'java.lang.String',
                                    "VALUE" = 'VALUE' : 'java.lang.String'
                                )
                            )
                        )
                    )
                )
            )
        )
    )
    );

CHOWN admin WRAPPER XML ds_xml_kiidoc_copy LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of developer_test_db
# #######################################
# No stored procedures in database developer_test_db
# #######################################
# TYPES of developer_test_db
# #######################################
DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE" AS REGISTER OF ("BASE_TYPE":text, "VALUE":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION" AS REGISTER OF ("CODE":text, "RESULT":boolean, "CONDITION":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_FUND" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_FUND" AS REGISTER OF ("CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS" AS REGISTER OF ("ISIN":text, "CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SPONSOR" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SPONSOR" AS REGISTER OF ("CODE":text, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND" AS REGISTER OF ("CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY" AS REGISTER OF ("COUNTRY":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION" AS REGISTER OF ("ID":int, "VALID_FROM":text, "CODE":text, "LEVEL":text, "NAME":text, "VALUE":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS_CONDITION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS_CONDITION" AS ARRAY OF "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY" AS REGISTER OF ("SPONSOR":"ds_xml_kiidoc_copy_HIERARCHY_SPONSOR", "FUND":"ds_xml_kiidoc_copy_HIERARCHY_FUND", "SUB_FOND":"ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND", "SHARE_CLASS":"ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY" AS ARRAY OF "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION" AS ARRAY OF "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS" AS REGISTER OF ("CONDITION":"ds_xml_kiidoc_copy_CONDITIONS_CONDITION");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES" AS REGISTER OF ("COUNTRY":"ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS" AS REGISTER OF ("INFORMATION":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES" AS REGISTER OF ("ID":int, "PROJECT_ID":int, "NAME":text, "ISIN":text, "FILE_NAME":text, "LANGUAGE_CODE":text, "VALID_FROM":text, "CREATION_DATE":text, "COUNTRIES":"ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY" AS REGISTER OF ("CODE":text, "INFORMATIONS":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY" AS ARRAY OF "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES" AS REGISTER OF ("CATEGORY":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY");

# #######################################
# MAPS of developer_test_db
# #######################################
# No maps in database developer_test_db
# #######################################
# BASE VIEWS of developer_test_db
# #######################################
DROP VIEW IF EXISTS bv_sharepoint CASCADE;

CREATE TABLE bv_sharepoint I18N be_bnpp_am (
        "ContentTypeID":text (sourcetypeid = '12'), 
        "ApproverComments":text (sourcetypeid = '12'), 
        "Name":text (sourcetypeid = '12'), 
        "Title":text (sourcetypeid = '12'), 
        "DocumentIDValue":text (sourcetypeid = '12'), 
        "DocumentID":text (sourcetypeid = '12'), 
        "ApprovalStatus":text (sourcetypeid = '12'), 
        "ActivityTypeId":int (sourcetypeid = '4'), 
        "DocumentTypeId":int (sourcetypeid = '4'), 
        "ITLanguageValue":text (sourcetypeid = '12'), 
        "APPCodeId":int (sourcetypeid = '4'), 
        "Description":text (sourcetypeid = '12'), 
        "Manager1Id":int (sourcetypeid = '4'), 
        "Manager2Id":int (sourcetypeid = '4'), 
        "URL":text (sourcetypeid = '12'), 
        "Approval":int (sourcetypeid = '4'), 
        "Id":int (sourcetypeid = '4'), 
        "ContentType":text (sourcetypeid = '12'), 
        "Created":date (sourcetypeid = '93'), 
        "CreatedById":int (sourcetypeid = '4'), 
        "Modified":date (sourcetypeid = '93'), 
        "ModifiedById":int (sourcetypeid = '4'), 
        "CopySource":text (sourcetypeid = '12'), 
        "Path":text (sourcetypeid = '12'), 
        "CheckedOutToId":int (sourcetypeid = '4'), 
        "VirusStatus":text (sourcetypeid = '12'), 
        "IsCurrentVersion":boolean (sourcetypeid = '16'), 
        "Owshiddenversion":int (sourcetypeid = '4'), 
        "Version":text (sourcetypeid = '12')
    )
    FOLDER = '/02 - base views/coreact'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sharepoint(
        I18N be_bnpp_am
        CONSTRAINTS (
             ADD "ContentTypeID" (any) OPT ANY
             ADD "ApproverComments" (any) OPT ANY
             ADD "Name" (any) OPT ANY
             ADD "Title" (any) OPT ANY
             ADD "DocumentIDValue" (any) OPT ANY
             ADD "DocumentID" (any) OPT ANY
             ADD "ApprovalStatus" (any) OPT ANY
             ADD "ActivityTypeId" (any) OPT ANY
             ADD "DocumentTypeId" (any) OPT ANY
             ADD "ITLanguageValue" (any) OPT ANY
             ADD "APPCodeId" (any) OPT ANY
             ADD "Description" (any) OPT ANY
             ADD "Manager1Id" (any) OPT ANY
             ADD "Manager2Id" (any) OPT ANY
             ADD "URL" (any) OPT ANY
             ADD "Approval" (any) OPT ANY
             ADD "Id" (any) OPT ANY
             ADD "ContentType" (any) OPT ANY
             ADD "Created" (any) OPT ANY
             ADD "CreatedById" (any) OPT ANY
             ADD "Modified" (any) OPT ANY
             ADD "ModifiedById" (any) OPT ANY
             ADD "CopySource" (any) OPT ANY
             ADD "Path" (any) OPT ANY
             ADD "CheckedOutToId" (any) OPT ANY
             ADD "VirusStatus" (any) OPT ANY
             ADD "IsCurrentVersion" (any) OPT ANY
             ADD "Owshiddenversion" (any) OPT ANY
             ADD "Version" (any) OPT ANY
        )
        OUTPUTLIST ("APPCodeId", "ActivityTypeId", "Approval", "ApprovalStatus", "ApproverComments", "CheckedOutToId", "ContentType", "ContentTypeID", "CopySource", "Created", "CreatedById", "Description", "DocumentID", "DocumentIDValue", "DocumentTypeId", "ITLanguageValue", "Id", "IsCurrentVersion", "Manager1Id", "Manager2Id", "Modified", "ModifiedById", "Name", "Owshiddenversion", "Path", "Title", "URL", "Version", "VirusStatus"
        )
        WRAPPER (custom bv_sharepoint)
    );

CHOWN admin VIEW bv_sharepoint LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_table_historical CASCADE;

CREATE TABLE bv_table_historical I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        datum:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        description:text (sourcetypesize = '50', sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    CACHE OFF
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_table_historical(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD datum (any) OPT ANY
             ADD description (any) OPT ANY
        )
        OUTPUTLIST (datum, description, id
        )
        WRAPPER (jdbc bv_table_historical)
        ALTERNATIVE_WRAPPERS (jdbc sqlexpress_bv_table_historical)
    )
    DELEGATESTATSQUERY = false
    SMART_THEN_ATSOURCE_THROUGH_VDP;

CHOWN admin VIEW bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_table_operational CASCADE;

CREATE TABLE bv_table_operational I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        datum:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        description:text (sourcetypesize = '50', sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    CACHE OFF
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_table_operational(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD datum (any) OPT ANY
             ADD description (any) OPT ANY
        )
        OUTPUTLIST (datum, description, id
        )
        WRAPPER (jdbc bv_table_operational)
    )
    DELEGATESTATSQUERY = false
    SMART_THEN_ATSOURCE_THROUGH_VDP;

CHOWN admin VIEW bv_table_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_xml_kiidoc_share CASCADE;

CREATE TABLE bv_xml_kiidoc_share I18N be_bnpp_am (
        "FILENAME":text (defaultvalue = 'KIIDOC-2017-11-08-fr-FR_LU-2017-11-08-FR0013041530.xml'), 
        "PROPERTIES":"ds_xml_kiidoc_copy_PROPERTIES", 
        "HIERARCHY":"ds_xml_kiidoc_copy_HIERARCHY", 
        "CONDITIONS":"ds_xml_kiidoc_copy_CONDITIONS", 
        "CATEGORIES":"ds_xml_kiidoc_copy_CATEGORIES"
    )
    FOLDER = '/02 - base views/coreact'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_xml_kiidoc_copy(
        I18N be_bnpp_am
        CONSTRAINTS (
             ADD "FILENAME" (=) OBL ONE
             ADD "PROPERTIES" NOS ZERO ()
             ADD "PROPERTIES"."ID" NOS ZERO ()
             ADD "PROPERTIES"."PROJECT_ID" NOS ZERO ()
             ADD "PROPERTIES"."NAME" NOS ZERO ()
             ADD "PROPERTIES"."ISIN" NOS ZERO ()
             ADD "PROPERTIES"."FILE_NAME" NOS ZERO ()
             ADD "PROPERTIES"."LANGUAGE_CODE" NOS ZERO ()
             ADD "PROPERTIES"."VALID_FROM" NOS ZERO ()
             ADD "PROPERTIES"."CREATION_DATE" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY"."COUNTRY" NOS ZERO ()
             ADD "HIERARCHY" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."FUND" NOS ZERO ()
             ADD "HIERARCHY"."FUND"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."FUND"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."ISIN" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."NAME" NOS ZERO ()
             ADD "CONDITIONS" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."CODE" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."RESULT" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."CONDITION" NOS ZERO ()
             ADD "CATEGORIES" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."CODE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."ID" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALID_FROM" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."CODE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."LEVEL" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."NAME" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE"."BASE_TYPE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE"."VALUE" NOS ZERO ()
        )
        OUTPUTLIST ("CATEGORIES", "CONDITIONS", "HIERARCHY", "PROPERTIES"
        )
        WRAPPER (xml ds_xml_kiidoc_copy)
    );

CHOWN admin VIEW bv_xml_kiidoc_share LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map1 CASCADE;

CREATE TABLE ds_map1 I18N be_euro (
        column_0:int (sourcetypeid = '4'), 
        column_1:text (sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_map1(
        I18N be_euro
        CONSTRAINTS (
             ADD column_0 (any) OPT ANY
             ADD column_1 (any) OPT ANY
        )
        OUTPUTLIST (column_0, column_1
        )
        WRAPPER (custom ds_map1)
    );

CHOWN admin VIEW ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2 CASCADE;

CREATE TABLE ds_map2 I18N be_euro (
        column_0:int (sourcetypeid = '4'), 
        column_1:text (sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_map2(
        I18N be_euro
        CONSTRAINTS (
             ADD column_0 (any) OPT ANY
             ADD column_1 (any) OPT ANY
        )
        OUTPUTLIST (column_0, column_1
        )
        WRAPPER (custom ds_map2)
    );

CHOWN admin VIEW ds_map2 LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of developer_test_db
# #######################################
DROP VIEW IF EXISTS as_map1_j_ds_map2 CASCADE;

CREATE VIEW as_map1_j_ds_map2 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT ds_map1.column_0 AS column_0v, ds_map1.column_1 AS column_1v, ds_map2.column_0 AS column_0, ds_map2.column_1 AS column_1 FROM ds_map1 AS ds_map1, ds_map2 AS ds_map2;

ALTER VIEW as_map1_j_ds_map2
 LAYOUT (ds_map1 = [20, 20, 200, 66], ds_map2 = [250, 20, 200, 66]);

CHOWN admin VIEW as_map1_j_ds_map2 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2_j_ds_map1 CASCADE;

CREATE VIEW ds_map2_j_ds_map1 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT ds_map2.column_0 AS map2_column_0, ds_map2.column_1 AS map2_column_1, ds_map1.column_0 AS map1_column_0, ds_map1.column_1 AS map1_column_1 FROM ds_map2 AS ds_map2 NESTED LEFT OUTER JOIN ds_map1 AS ds_map1 ON ds_map2.column_0 = ds_map1.column_0 ;

ALTER VIEW ds_map2_j_ds_map1
 LAYOUT (ds_map2 = [20, 50, 200, 66], ds_map1 = [440, 20, 200, 66]);

CHOWN admin VIEW ds_map2_j_ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2_u_ds_map1 CASCADE;

CREATE VIEW ds_map2_u_ds_map1 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT column_0, column_1 FROM (SELECT * FROM ds_map2 UNION SELECT column_0, column_1 FROM ds_map1);

ALTER VIEW ds_map2_u_ds_map1
 LAYOUT (ds_map2 = [20, 20, 200, 66], ds_map1 = [250, 20, 200, 66]);

CHOWN admin VIEW ds_map2_u_ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_sharepoint_list CASCADE;

CREATE VIEW dv_01_sharepoint_list FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT bv_sharepoint."Name" AS "Name", bv_sharepoint."Title" AS "Title", bv_sharepoint."DocumentIDValue" AS "DocumentIDValue", bv_sharepoint."DocumentID" AS "DocumentID" FROM bv_sharepoint WHERE "Path" = '/APP Library/HORUS/99 - Archive';

CHOWN admin VIEW dv_01_sharepoint_list LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_sharepoint_list
 LAYOUT (bv_sharepoint = [20, 20, 222, 606]);

DROP VIEW IF EXISTS dv_01_table_historical_max CASCADE;

CREATE VIEW dv_01_table_historical_max FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT max(datum) AS max_date FROM bv_table_historical;

CHOWN admin VIEW dv_01_table_historical_max LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_table_historical_max
 LAYOUT (bv_table_historical = [20, 20, 200, 86]);

DROP VIEW IF EXISTS dv_01_table_operational_min CASCADE;

CREATE VIEW dv_01_table_operational_min FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT min(datum) AS max_date FROM bv_table_operational;

CHOWN admin VIEW dv_01_table_operational_min LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_table_operational_min
 LAYOUT (bv_table_operational = [20, 20, 200, 86]);

DROP VIEW IF EXISTS p_bv_table_historical CASCADE;

CREATE VIEW p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT bv_table_historical.id AS id, bv_table_historical.datum AS datum, bv_table_historical.description AS description FROM bv_table_historical;

CHOWN admin VIEW p_bv_table_historical LASTMODIFICATIONUSER admin;

ALTER VIEW p_bv_table_historical
 LAYOUT (bv_table_historical = [20, 20, 200, 86]);

DROP VIEW IF EXISTS p_bv_table_operational CASCADE;

CREATE VIEW p_bv_table_operational FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT bv_table_operational.id AS id, bv_table_operational.datum AS datum, bv_table_operational.description AS description FROM bv_table_operational;

CHOWN admin VIEW p_bv_table_operational LASTMODIFICATIONUSER admin;

ALTER VIEW p_bv_table_operational
 LAYOUT (bv_table_operational = [20, 20, 200, 86]);

DROP VIEW IF EXISTS union_historical_operational CASCADE;

CREATE VIEW union_historical_operational FOLDER = '/02 - integration_layer' AS SELECT id, datum, description FROM (SELECT * FROM bv_table_historical UNION SELECT description, id, datum FROM bv_table_operational);

ALTER VIEW union_historical_operational
 LAYOUT (bv_table_historical = [20, 20, 200, 86], bv_table_operational = [250, 20, 200, 86]);

CHOWN admin VIEW union_historical_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_historical_max_j_p_bv_table_historical CASCADE;

CREATE VIEW dv_01_table_historical_max_j_p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT p_bv_table_historical.id AS id, p_bv_table_historical.datum AS datum, p_bv_table_historical.description AS description FROM dv_01_table_historical_max AS dv_01_table_historical_max NESTED INNER JOIN p_bv_table_historical AS p_bv_table_historical ON dv_01_table_historical_max.max_date > p_bv_table_historical.datum  WHERE p_bv_table_historical.datum <= dv_01_table_historical_max.max_date;

ALTER VIEW dv_01_table_historical_max_j_p_bv_table_historical
 LAYOUT (dv_01_table_historical_max = [20, 20, 200, 46], p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_historical_max_j_p_bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_operational_max_j_p_bv_table_operational CASCADE;

CREATE VIEW dv_01_table_operational_max_j_p_bv_table_operational FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT p_bv_table_operational.id AS id, p_bv_table_operational.datum AS datum, p_bv_table_operational.description AS description FROM dv_01_table_operational_min AS dv_01_table_operational_max NESTED INNER JOIN p_bv_table_operational AS p_bv_table_operational ON dv_01_table_operational_max.max_date < p_bv_table_operational.datum  WHERE p_bv_table_operational.datum > dv_01_table_operational_max.max_date;

ALTER VIEW dv_01_table_operational_max_j_p_bv_table_operational
 LAYOUT (dv_01_table_operational_min = [20, 50, 200, 46], p_bv_table_operational = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_operational_max_j_p_bv_table_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_02_xml_share_kiidoc CASCADE;

CREATE VIEW dv_02_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT bv_xml_kiidoc_share."PROPERTIES" AS "PROPERTIES", bv_xml_kiidoc_share."HIERARCHY" AS "HIERARCHY", bv_xml_kiidoc_share."CONDITIONS" AS "CONDITIONS", (bv_xml_kiidoc_share."CATEGORIES")."CATEGORY" AS "CATEGORY", dv_01_sharepoint_list."Name" AS "Name" FROM bv_xml_kiidoc_share AS bv_xml_kiidoc_share RIGHT OUTER JOIN dv_01_sharepoint_list AS dv_01_sharepoint_list ON bv_xml_kiidoc_share."FILENAME" = dv_01_sharepoint_list."Name" ;

ALTER VIEW dv_02_xml_share_kiidoc
 LAYOUT (bv_xml_kiidoc_share = [20, 20, 200, 126], dv_01_sharepoint_list = [350, 10, 200, 106]);

CHOWN admin VIEW dv_02_xml_share_kiidoc LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_bv_table_operational_u_p_bv_table_historical CASCADE;

CREATE VIEW p_bv_table_operational_u_p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT id, datum, description FROM (SELECT * FROM p_bv_table_operational UNION SELECT description, datum, id FROM p_bv_table_historical);

ALTER VIEW p_bv_table_operational_u_p_bv_table_historical
 LAYOUT (p_bv_table_operational = [20, 20, 200, 86], p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW p_bv_table_operational_u_p_bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo CASCADE;

CREATE VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT id, datum, description FROM (SELECT * FROM dv_01_table_operational_max_j_p_bv_table_operational UNION SELECT datum, id, description FROM dv_01_table_historical_max_j_p_bv_table_historical);

ALTER VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo
 LAYOUT (dv_01_table_operational_max_j_p_bv_table_operational = [20, 20, 200, 86], dv_01_table_historical_max_j_p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_03_xml_share_kiidoc CASCADE;

CREATE VIEW dv_03_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT ("INFORMATIONS")."INFORMATION" AS "INFORMATION", "Name" AS "Name", "CODE" AS "CODE" FROM FLATTEN dv_02_xml_share_kiidoc AS v ( v."CATEGORY") WHERE v."CODE" = 'OBJECTIVES';

CHOWN admin VIEW dv_03_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_03_xml_share_kiidoc
 LAYOUT (dv_02_xml_share_kiidoc = [20, 20, 519, 747]);

DROP VIEW IF EXISTS dv_04_xml_share_kiidoc CASCADE;

CREATE VIEW dv_04_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT "Name" AS "Name_file", "CODE" AS "CODE", ("VALUE")."VALUE" AS "VALUE" FROM FLATTEN dv_03_xml_share_kiidoc AS v ( v."INFORMATION");

CHOWN admin VIEW dv_04_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_04_xml_share_kiidoc
 LAYOUT (dv_03_xml_share_kiidoc = [20, 20, 519, 246]);

DROP VIEW IF EXISTS dv_05_xml_share_kiidoc CASCADE;

CREATE VIEW dv_05_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT substring("Name_file", 0, (position('.' IN "Name_file")-1)) AS "Name_file", replace(replace(group_concat(' ', "VALUE"), char(10), ''), char(32), '') AS "Objective" FROM dv_04_xml_share_kiidoc GROUP BY "Name_file";

CHOWN admin VIEW dv_05_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_05_xml_share_kiidoc
 LAYOUT (dv_04_xml_share_kiidoc = [20, 20, 205, 86]);

# #######################################
# ASSOCIATIONS of developer_test_db
# #######################################
# No associations in database developer_test_db
# #######################################
# WEBSERVICES of developer_test_db
# #######################################
DROP REST WEBSERVICE IF EXISTS bv_xml_kiidoc_share;

CREATE REST WEBSERVICE bv_xml_kiidoc_share
    CONNECTION (
        CHUNKSIZE = 1000
        CHUNKTIMEOUT = 90000
        QUERYTIMEOUT = 900000
        POOLENABLED = true
        POOLINITSIZE = 0
        POOLMAXACTIVE = 30
    )
    DEFAULTREPRESENTATION = HTML
    SUPPORTEDREPRESENTATIONS (HTML, XML, JSON)
    RESOURCES (
        VIEW bv_xml_kiidoc_share FIELDS (
            "FILENAME" : 'text' OBL, 
            "PROPERTIES" : 'ds_xml_kiidoc_copy_PROPERTIES', 
            "HIERARCHY" : 'ds_xml_kiidoc_copy_HIERARCHY', 
            "CONDITIONS" : 'ds_xml_kiidoc_copy_CONDITIONS', 
            "CATEGORIES" : 'ds_xml_kiidoc_copy_CATEGORIES'
        )
    )
    OPTIONS ( NULLVALUESASEMPTYXMLELEMENTS = false ) 
    OPENAPI2 ( API_VERSION = '1.0.0' ) 
    FOLDER = '/02 - base views/coreact';

CHOWN admin WEBSERVICE bv_xml_kiidoc_share LASTMODIFICATIONUSER admin;

# #######################################
# WIDGETS of developer_test_db
# #######################################
# No widgets in database developer_test_db
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of developer_test_db
# #######################################
# No deployed web services in database developer_test_db
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of developer_test_db
# #######################################
# No deployed widgets in database developer_test_db
# #######################################
# Closing connection with database developer_test_db
# #######################################
CLOSE;


# 4 ====================================================================

# #######################################
# DATABASE of diagnostic
# #######################################
DROP DATABASE IF EXISTS diagnostic;

CREATE DATABASE diagnostic 'Database managed by the Diagnostic & Monitoring Tool.';

CONNECT DATABASE diagnostic;

# #######################################
# FOLDERS of diagnostic
# #######################################
CREATE OR REPLACE FOLDER '/20180922181056033' ;

CHOWN admin FOLDER '/20180922181056033';

CREATE OR REPLACE FOLDER '/20180922181056033/cache_loads' ;

CHOWN admin FOLDER '/20180922181056033/cache_loads';

CREATE OR REPLACE FOLDER '/20180922181056033/cache_loads/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/cache_loads/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/datasources' ;

CHOWN admin FOLDER '/20180922181056033/datasources';

CREATE OR REPLACE FOLDER '/20180922181056033/datasources/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/datasources/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/errors' ;

CHOWN admin FOLDER '/20180922181056033/errors';

CREATE OR REPLACE FOLDER '/20180922181056033/errors/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/errors/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/requests' ;

CHOWN admin FOLDER '/20180922181056033/requests';

CREATE OR REPLACE FOLDER '/20180922181056033/requests/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/requests/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/resources' ;

CHOWN admin FOLDER '/20180922181056033/resources';

CREATE OR REPLACE FOLDER '/20180922181056033/resources/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/resources/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/sessions' ;

CHOWN admin FOLDER '/20180922181056033/sessions';

CREATE OR REPLACE FOLDER '/20180922181056033/sessions/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/sessions/intermediate_views';

CREATE OR REPLACE FOLDER '/20180922181056033/threads' ;

CHOWN admin FOLDER '/20180922181056033/threads';

CREATE OR REPLACE FOLDER '/20180922181056033/threads/intermediate_views' ;

CHOWN admin FOLDER '/20180922181056033/threads/intermediate_views';

CREATE OR REPLACE FOLDER '/monitor_logging_dates' ;

CHOWN admin FOLDER '/monitor_logging_dates';

CREATE OR REPLACE FOLDER '/monitor_logging_dates/intermediate_views' ;

CHOWN admin FOLDER '/monitor_logging_dates/intermediate_views';

# #######################################
# LISTENERS JMS of diagnostic
# #######################################
# No listeners jms in database diagnostic
# #######################################
# DATASOURCES of diagnostic
# #######################################
DROP DATASOURCE CUSTOM IF EXISTS log_custom_wrapper CASCADE;

CREATE DATASOURCE CUSTOM log_custom_wrapper
    CLASSNAME='com.denodo.connect.log.LogCustomWrapper';

CHOWN admin DATASOURCE CUSTOM log_custom_wrapper LASTMODIFICATIONUSER admin;

DROP DATASOURCE JDBC IF EXISTS customvdpcachedatasource CASCADE;

CREATE DATASOURCE JDBC customvdpcachedatasource
    DRIVERCLASSNAME = 'org.apache.derby.jdbc.ClientDriver'
    DATABASEURI = 'jdbc:derby://localhost:1527/cache'
    USERNAME = 'vdpcache'
    USERPASSWORD = '2z0pQRUCmqRloKGh5oOguwcg8l+xz+KtPKel0aK/DS+kQwTQbFq9vdlD698V8mx89rHdrIIpXFYjrIEKcNScJKz0iQMfVzZEW0IxiiLpV+BgJG/MO8qf/xo9jWTvH0AO' ENCRYPTED
    CLASSPATH = 'derby-10'
    DATABASENAME = 'derby'
    DATABASEVERSION = '10'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'values 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 5000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegateaggregatefunctionslist = (avg, count, max, min, sum),
        delegatescalarfunctionslist = (abs, acos, asin, atan, atan2, ceil, cos, cot, current_date, degrees, div, exp, floor, getday, gethour, getminute, getmonth, getsecond, getyear, len, ln, log, lower, mod, mult, now, nullif, position, radians, round, sign, sin, sqrt, subtract, sum, tan, textconstant, to_date, trim, upper)
    );

CHOWN admin DATASOURCE JDBC customvdpcachedatasource LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE diagnostic
  CHARSET RESTRICTED;

ALTER DATABASE diagnostic
  COST OPTIMIZATION OFF
  QUERY SIMPLIFICATION OFF
  CACHE ON (
    MAINTENANCE OFF
    MAINTAINERPERIOD 2160021600
    TIMETOLIVE NOEXPIRE
    DATASOURCE CUSTOM
  );

# #######################################
# WRAPPERS of diagnostic
# #######################################
DROP WRAPPER CUSTOM IF EXISTS cache_loads_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM cache_loads_instant_log_20180922181056033
    FOLDER = '/20180922181056033/cache_loads/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*?\\t(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\r\\n]*)\\r?\\n?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-loadcacheprocesses.log',
      'Sequential Search Interval' = 1000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        session_id = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        server_name = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        host = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        port = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        notification_type = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        notification_timestamp_as_text = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        id = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query_pattern_id = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        database_name = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        view_name = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        sql_view_name = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        projected_fields = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        num_conditions = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_condition_list = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cache_status = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ttl_status_in_cache = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ttl_in_cache = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query_pattern_state = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        exception = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        num_inserted_rows = 'out19' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        num_received_rows = 'out20' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query_pattern_storage_start_time_as_text = 'out21' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query_pattern_storage_end_time_as_text = 'out22' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query_pattern_storage_duration_as_text = 'out23' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cached_result_metadata_storage_start_time_as_text = 'out24' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cached_result_metadata_storage_end_time_as_text = 'out25' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cached_result_metadata_storage_duration_as_text = 'out26' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        data_storage_start_time_as_text = 'out27' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        data_storage_end_time_as_text = 'out28' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        data_storage_duration_as_text = 'out29' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM cache_loads_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS datasources_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM datasources_instant_log_20180922181056033
    FOLDER = '/20180922181056033/datasources/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*?(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d)\\t.*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t\\r\\n]*)(?:\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\r\\n]*))?\\r?\\n?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-datasources.log',
      'Sequential Search Interval' = 30000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        date_as_text = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        database_name = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        type = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        name = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        active_requests = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        total_requests = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        pool_size_as_text = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        active_connections_as_text = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        idle_connections_as_text = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ping_status = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ping_execution_time_as_text = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ping_duration_as_text = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        ping_down_cause = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM datasources_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS errors_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM errors_instant_log_20180922181056033
    FOLDER = '/20180922181056033/errors/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*?\\s(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d)\\s.*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '(\\d+)\\s+\\[([\^\\]]+)\\]\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s(\\S*)\\s-\\s(.*?)\\s*((?<=\\n)\\w+\\.\\w+\\..*\\S)?\\s*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp.log',
      'Sequential Search Interval' = 1000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.DefaultLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        elapsed_milliseconds = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        thread_name = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        priority = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date_as_text = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        category = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        nested_diagnostic_context = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        message = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        error_trace = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM errors_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS monitor_logging_dates_aux CASCADE;

CREATE WRAPPER CUSTOM monitor_logging_dates_aux
    FOLDER = '/monitor_logging_dates/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*[Ll]ogging started at: (\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '.*[Ll]ogging started at: \\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d(?:\\. Denodo Monitor.*? started at: (\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d))?(?:\\. VDP Server.*? started at: (\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d))?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' '@MONITOR_LOG_FILE',
      'Sequential Search Interval' = 1,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        monitor_start_date_as_text = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_start_date_as_text = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        logging_date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE,
        monitor_log_file = 'MONITOR_LOG_FILE' : 'java.lang.String' (OBL) EXTERN NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM monitor_logging_dates_aux LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS requests_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM requests_instant_log_20180922181056033
    FOLDER = '/20180922181056033/requests/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*\\t(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\r\\n]*)\\r?\\n?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-queries.log',
      'Sequential Search Interval' = 1000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        server_name = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        host = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        port = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        id = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        database_name = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        user_name = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        notification_type = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        session_id = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        start_time_as_text = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        end_time_as_text = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        duration_as_text = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        waiting_time_as_text = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        num_rows_as_text = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        state = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        completed_as_text = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cache_as_text = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        query = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        request_type = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        elements = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        user_agent = 'out19' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        access_interface = 'out20' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        client_ip = 'out21' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        transaction_id_as_text = 'out22' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM requests_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS resources_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM resources_instant_log_20180922181056033
    FOLDER = '/20180922181056033/resources/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^/]*)/([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\r\\n]*)\\r?\\n?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-resources.log',
      'Sequential Search Interval' = 30000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        server_name = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        host = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        port = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date_as_text = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        perm_gen = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_perm_gen = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        survivor_space = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_survivor_space = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        old_gen = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_old_gen = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        eden_space = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_eden_space = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        code_cache = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_code_cache = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        heap_memory_usage = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_heap_memory_usage = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        non_heap_memory_usage = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        max_non_heap_memory_usage = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        loaded_class_count = 'out18' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        total_loaded_class_count = 'out19' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        thread_count = 'out20' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        peak_thread_count = 'out21' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_total_connections = 'out22' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_active_connections = 'out23' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_active_requests = 'out24' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_waiting_requests = 'out25' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_total_memory = 'out26' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        vdp_max_memory = 'out27' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        cpu_percentage = 'out28' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_collection_count_old = 'out29' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_collection_count_young = 'out30' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_collection_time_old = 'out31' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_collection_time_young = 'out32' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentage_old = 'out33' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentage_young = 'out34' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        gc_percentage = 'out35' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM resources_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS sessions_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM sessions_instant_log_20180922181056033
    FOLDER = '/20180922181056033/sessions/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = '.*\\t(\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\t]*)\\t([\^\\r\\n]*)\\r?\\n?.*',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-connections.log',
      'Sequential Search Interval' = 1000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        server_name = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        host = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        port = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        notification_type = 'out3' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        connection_id = 'out4' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        connection_start_time_as_text = 'out5' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        connection_end_time_as_text = 'out6' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        client_ip = 'out7' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        user_agent = 'out8' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        access_interface = 'out9' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        session_id = 'out10' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        session_start_time_as_text = 'out11' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        session_end_time_as_text = 'out12' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        login = 'out13' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        database_name = 'out14' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        webservice_name = 'out15' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        jms_queue_name = 'out16' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        intermediate_client_ip = 'out17' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM sessions_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS threads_instant_log_20180922181056033 CASCADE;

CREATE WRAPPER CUSTOM threads_instant_log_20180922181056033
    FOLDER = '/20180922181056033/threads/intermediate_views'
    DATASOURCENAME=log_custom_wrapper
    PARAMETERS (
      'Date Pattern' = 'yyyy-MM-dd''T''HH:mm:ss.SSS',
      'Date Extractor Pattern' = 'Thread dump start at: (\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\d).*',
      'Log timezone' = 'GMT',
      'Content Extractor Pattern' = '[\^"]*(.*\\S)\\s+Thread Cpu info dump start at:[\^I]+(I.*")\\s+(?:No deadlock found|\\*+\\s+\\*+\\s+Deadlock found\\s+\\*+\\s+\\*+[\^"]*(.*?))(?:\\s|=|Thread logging started at:.*)+',
      'Filepath' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo monitor_logs_bnpp/Diagnistic_info/vdp-threads.log',
      'Sequential Search Interval' = 60000,
      'Rolling Implementation Class Name' = 'com.denodo.connect.log.rollingpolicy.ByDayLogRollingPolicy'
    )
    OUTPUTSCHEMA (
        thread_dump_as_text = 'out0' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        thread_cpu_info_dump_as_text = 'out1' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        deadlock_thread_dump_as_text = 'out2' : 'java.lang.String' NOT SORTABLE NOT UPDATEABLE,
        date = 'Extracted Date' : 'java.util.Date' (OPT) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_start_date = 'Search Start Date' : 'java.util.Date' (OBL) NOT NULL NOT SORTABLE NOT UPDATEABLE,
        cw_search_end_date = 'Search End Date' : 'java.util.Date' (OPT) NOT SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER CUSTOM threads_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of diagnostic
# #######################################
# No stored procedures in database diagnostic
# #######################################
# TYPES of diagnostic
# #######################################
DROP TYPE IF EXISTS _cf_parse_thread_dump_text_text_text_array_record CASCADE;

CREATE TYPE _cf_parse_thread_dump_text_text_text_array_record AS REGISTER OF (name:text, id:long, lock_object:text, lock_owner_id:long, lock_owner_name:text, previous_cpu_time:long, cpu_time:long, elapsed_cpu_time:long, elapsed_time:long, cpu_usage:float, in_native:boolean, suspended:boolean, in_deadlock:boolean, state:text, stack_trace:text);

DROP TYPE IF EXISTS _register_monitor_start_date CASCADE;

CREATE TYPE _register_monitor_start_date AS REGISTER OF (monitor_start_date:date);

DROP TYPE IF EXISTS _register_vdp_start_date CASCADE;

CREATE TYPE _register_vdp_start_date AS REGISTER OF (vdp_start_date:date);

DROP TYPE IF EXISTS _array_register_monitor_start_date CASCADE;

CREATE TYPE _array_register_monitor_start_date AS ARRAY OF _register_monitor_start_date;

DROP TYPE IF EXISTS _array_register_vdp_start_date CASCADE;

CREATE TYPE _array_register_vdp_start_date AS ARRAY OF _register_vdp_start_date;

DROP TYPE IF EXISTS _cf_parse_thread_dump_text_text_text_array CASCADE;

CREATE TYPE _cf_parse_thread_dump_text_text_text_array AS ARRAY OF _cf_parse_thread_dump_text_text_text_array_record;

# #######################################
# MAPS of diagnostic
# #######################################
# No maps in database diagnostic
# #######################################
# BASE VIEWS of diagnostic
# #######################################
DROP VIEW IF EXISTS cache_loads_instant_log_20180922181056033 CASCADE;

CREATE TABLE cache_loads_instant_log_20180922181056033 I18N rfc_restful (
        session_id:long, 
        server_name:text, 
        host:text, 
        port:int, 
        notification_type:text, 
        notification_timestamp_as_text:text, 
        id:long, 
        query_pattern_id:long, 
        database_name:text, 
        view_name:text, 
        sql_view_name:text, 
        projected_fields:text, 
        num_conditions:int, 
        vdp_condition_list:text, 
        cache_status:text, 
        ttl_status_in_cache:text, 
        ttl_in_cache:long, 
        query_pattern_state:text, 
        exception:text, 
        num_inserted_rows:long, 
        num_received_rows:long, 
        query_pattern_storage_start_time_as_text:text, 
        query_pattern_storage_end_time_as_text:text, 
        query_pattern_storage_duration_as_text:text, 
        cached_result_metadata_storage_start_time_as_text:text, 
        cached_result_metadata_storage_end_time_as_text:text, 
        cached_result_metadata_storage_duration_as_text:text, 
        data_storage_start_time_as_text:text, 
        data_storage_end_time_as_text:text, 
        data_storage_duration_as_text:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/cache_loads/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD cache_loads_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD session_id NOS ZERO ()
             ADD server_name NOS ZERO ()
             ADD host NOS ZERO ()
             ADD port NOS ZERO ()
             ADD notification_type NOS ZERO ()
             ADD notification_timestamp_as_text NOS ZERO ()
             ADD id NOS ZERO ()
             ADD query_pattern_id NOS ZERO ()
             ADD database_name NOS ZERO ()
             ADD view_name NOS ZERO ()
             ADD sql_view_name NOS ZERO ()
             ADD projected_fields NOS ZERO ()
             ADD num_conditions NOS ZERO ()
             ADD vdp_condition_list NOS ZERO ()
             ADD cache_status NOS ZERO ()
             ADD ttl_status_in_cache NOS ZERO ()
             ADD ttl_in_cache NOS ZERO ()
             ADD query_pattern_state NOS ZERO ()
             ADD exception NOS ZERO ()
             ADD num_inserted_rows NOS ZERO ()
             ADD num_received_rows NOS ZERO ()
             ADD query_pattern_storage_start_time_as_text NOS ZERO ()
             ADD query_pattern_storage_end_time_as_text NOS ZERO ()
             ADD query_pattern_storage_duration_as_text NOS ZERO ()
             ADD cached_result_metadata_storage_start_time_as_text NOS ZERO ()
             ADD cached_result_metadata_storage_end_time_as_text NOS ZERO ()
             ADD cached_result_metadata_storage_duration_as_text NOS ZERO ()
             ADD data_storage_start_time_as_text NOS ZERO ()
             ADD data_storage_end_time_as_text NOS ZERO ()
             ADD data_storage_duration_as_text NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (cache_status, cached_result_metadata_storage_duration_as_text, cached_result_metadata_storage_end_time_as_text, cached_result_metadata_storage_start_time_as_text, cw_search_end_date, cw_search_start_date, data_storage_duration_as_text, data_storage_end_time_as_text, data_storage_start_time_as_text, database_name, date, exception, host, id, notification_timestamp_as_text, notification_type, num_conditions, num_inserted_rows, num_received_rows, port, projected_fields, query_pattern_id, query_pattern_state, query_pattern_storage_duration_as_text, query_pattern_storage_end_time_as_text, query_pattern_storage_start_time_as_text, server_name, session_id, sql_view_name, ttl_in_cache, ttl_status_in_cache, vdp_condition_list, view_name
        )
        WRAPPER (custom cache_loads_instant_log_20180922181056033)
    );

CHOWN admin VIEW cache_loads_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS datasources_instant_log_20180922181056033 CASCADE;

CREATE TABLE datasources_instant_log_20180922181056033 I18N rfc_restful (
        date_as_text:text, 
        database_name:text, 
        type:text, 
        name:text, 
        active_requests:long, 
        total_requests:long, 
        pool_size_as_text:text, 
        active_connections_as_text:text, 
        idle_connections_as_text:text, 
        ping_status:text, 
        ping_execution_time_as_text:text, 
        ping_duration_as_text:text, 
        ping_down_cause:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/datasources/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD datasources_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD date_as_text NOS ZERO ()
             ADD database_name NOS ZERO ()
             ADD type NOS ZERO ()
             ADD name NOS ZERO ()
             ADD active_requests NOS ZERO ()
             ADD total_requests NOS ZERO ()
             ADD pool_size_as_text NOS ZERO ()
             ADD active_connections_as_text NOS ZERO ()
             ADD idle_connections_as_text NOS ZERO ()
             ADD ping_status NOS ZERO ()
             ADD ping_execution_time_as_text NOS ZERO ()
             ADD ping_duration_as_text NOS ZERO ()
             ADD ping_down_cause NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (=) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (active_connections_as_text, active_requests, cw_search_end_date, cw_search_start_date, database_name, date, date_as_text, idle_connections_as_text, name, ping_down_cause, ping_duration_as_text, ping_execution_time_as_text, ping_status, pool_size_as_text, total_requests, type
        )
        WRAPPER (custom datasources_instant_log_20180922181056033)
    );

CHOWN admin VIEW datasources_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS errors_instant_log_20180922181056033 CASCADE;

CREATE TABLE errors_instant_log_20180922181056033 I18N rfc_restful (
        elapsed_milliseconds:long, 
        thread_name:text, 
        priority:text, 
        date_as_text:text, 
        category:text, 
        nested_diagnostic_context:text, 
        message:text, 
        error_trace:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/errors/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD errors_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD elapsed_milliseconds NOS ZERO ()
             ADD thread_name NOS ZERO ()
             ADD priority NOS ZERO ()
             ADD date_as_text NOS ZERO ()
             ADD category NOS ZERO ()
             ADD nested_diagnostic_context NOS ZERO ()
             ADD message NOS ZERO ()
             ADD error_trace NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (category, cw_search_end_date, cw_search_start_date, date, date_as_text, elapsed_milliseconds, error_trace, message, nested_diagnostic_context, priority, thread_name
        )
        WRAPPER (custom errors_instant_log_20180922181056033)
    );

CHOWN admin VIEW errors_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS monitor_logging_dates_aux CASCADE;

CREATE TABLE monitor_logging_dates_aux I18N rfc_restful (
        monitor_start_date_as_text:text, 
        vdp_start_date_as_text:text, 
        logging_date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date, 
        monitor_log_file:text
    )
    FOLDER = '/monitor_logging_dates/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD monitor_logging_dates_aux(
        I18N rfc_restful
        CONSTRAINTS (
             ADD monitor_start_date_as_text NOS ZERO ()
             ADD vdp_start_date_as_text NOS ZERO ()
             ADD logging_date (any) OPT ANY
             ADD cw_search_start_date (=) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
             ADD monitor_log_file (=) OBL ONE
        )
        OUTPUTLIST (cw_search_end_date, cw_search_start_date, logging_date, monitor_start_date_as_text, vdp_start_date_as_text
        )
        WRAPPER (custom monitor_logging_dates_aux)
    );

CHOWN admin VIEW monitor_logging_dates_aux LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS requests_instant_log_20180922181056033 CASCADE;

CREATE TABLE requests_instant_log_20180922181056033 I18N rfc_restful (
        server_name:text, 
        host:text, 
        port:int, 
        id:long, 
        database_name:text, 
        user_name:text, 
        notification_type:text, 
        session_id:long, 
        start_time_as_text:text, 
        end_time_as_text:text, 
        duration_as_text:text, 
        waiting_time_as_text:text, 
        num_rows_as_text:text, 
        state:text, 
        completed_as_text:text, 
        cache_as_text:text, 
        query:text, 
        request_type:text, 
        elements:text, 
        user_agent:text, 
        access_interface:text, 
        client_ip:text, 
        transaction_id_as_text:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/requests/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD requests_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD server_name NOS ZERO ()
             ADD host NOS ZERO ()
             ADD port NOS ZERO ()
             ADD id NOS ZERO ()
             ADD database_name NOS ZERO ()
             ADD user_name NOS ZERO ()
             ADD notification_type NOS ZERO ()
             ADD session_id NOS ZERO ()
             ADD start_time_as_text NOS ZERO ()
             ADD end_time_as_text NOS ZERO ()
             ADD duration_as_text NOS ZERO ()
             ADD waiting_time_as_text NOS ZERO ()
             ADD num_rows_as_text NOS ZERO ()
             ADD state NOS ZERO ()
             ADD completed_as_text NOS ZERO ()
             ADD cache_as_text NOS ZERO ()
             ADD query NOS ZERO ()
             ADD request_type NOS ZERO ()
             ADD elements NOS ZERO ()
             ADD user_agent NOS ZERO ()
             ADD access_interface NOS ZERO ()
             ADD client_ip NOS ZERO ()
             ADD transaction_id_as_text NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (access_interface, cache_as_text, client_ip, completed_as_text, cw_search_end_date, cw_search_start_date, database_name, date, duration_as_text, elements, end_time_as_text, host, id, notification_type, num_rows_as_text, port, query, request_type, server_name, session_id, start_time_as_text, state, transaction_id_as_text, user_agent, user_name, waiting_time_as_text
        )
        WRAPPER (custom requests_instant_log_20180922181056033)
    );

CHOWN admin VIEW requests_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS resources_instant_log_20180922181056033 CASCADE;

CREATE TABLE resources_instant_log_20180922181056033 I18N rfc_restful (
        server_name:text, 
        host:text, 
        port:int, 
        date_as_text:text, 
        perm_gen:long, 
        max_perm_gen:long, 
        survivor_space:long, 
        max_survivor_space:long, 
        old_gen:long, 
        max_old_gen:long, 
        eden_space:long, 
        max_eden_space:long, 
        code_cache:long, 
        max_code_cache:long, 
        heap_memory_usage:long, 
        max_heap_memory_usage:long, 
        non_heap_memory_usage:long, 
        max_non_heap_memory_usage:long, 
        loaded_class_count:int, 
        total_loaded_class_count:long, 
        thread_count:int, 
        peak_thread_count:int, 
        vdp_total_connections:long, 
        vdp_active_connections:long, 
        vdp_active_requests:long, 
        vdp_waiting_requests:long, 
        vdp_total_memory:long, 
        vdp_max_memory:long, 
        cpu_percentage:float, 
        gc_collection_count_old:long, 
        gc_collection_count_young:long, 
        gc_collection_time_old:long, 
        gc_collection_time_young:long, 
        gc_percentage_old:float, 
        gc_percentage_young:float, 
        gc_percentage:float, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/resources/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD resources_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD server_name NOS ZERO ()
             ADD host NOS ZERO ()
             ADD port NOS ZERO ()
             ADD date_as_text NOS ZERO ()
             ADD perm_gen NOS ZERO ()
             ADD max_perm_gen NOS ZERO ()
             ADD survivor_space NOS ZERO ()
             ADD max_survivor_space NOS ZERO ()
             ADD old_gen NOS ZERO ()
             ADD max_old_gen NOS ZERO ()
             ADD eden_space NOS ZERO ()
             ADD max_eden_space NOS ZERO ()
             ADD code_cache NOS ZERO ()
             ADD max_code_cache NOS ZERO ()
             ADD heap_memory_usage NOS ZERO ()
             ADD max_heap_memory_usage NOS ZERO ()
             ADD non_heap_memory_usage NOS ZERO ()
             ADD max_non_heap_memory_usage NOS ZERO ()
             ADD loaded_class_count NOS ZERO ()
             ADD total_loaded_class_count NOS ZERO ()
             ADD thread_count NOS ZERO ()
             ADD peak_thread_count NOS ZERO ()
             ADD vdp_total_connections NOS ZERO ()
             ADD vdp_active_connections NOS ZERO ()
             ADD vdp_active_requests NOS ZERO ()
             ADD vdp_waiting_requests NOS ZERO ()
             ADD vdp_total_memory NOS ZERO ()
             ADD vdp_max_memory NOS ZERO ()
             ADD cpu_percentage NOS ZERO ()
             ADD gc_collection_count_old NOS ZERO ()
             ADD gc_collection_count_young NOS ZERO ()
             ADD gc_collection_time_old NOS ZERO ()
             ADD gc_collection_time_young NOS ZERO ()
             ADD gc_percentage_old NOS ZERO ()
             ADD gc_percentage_young NOS ZERO ()
             ADD gc_percentage NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (code_cache, cpu_percentage, cw_search_end_date, cw_search_start_date, date, date_as_text, eden_space, gc_collection_count_old, gc_collection_count_young, gc_collection_time_old, gc_collection_time_young, gc_percentage, gc_percentage_old, gc_percentage_young, heap_memory_usage, host, loaded_class_count, max_code_cache, max_eden_space, max_heap_memory_usage, max_non_heap_memory_usage, max_old_gen, max_perm_gen, max_survivor_space, non_heap_memory_usage, old_gen, peak_thread_count, perm_gen, port, server_name, survivor_space, thread_count, total_loaded_class_count, vdp_active_connections, vdp_active_requests, vdp_max_memory, vdp_total_connections, vdp_total_memory, vdp_waiting_requests
        )
        WRAPPER (custom resources_instant_log_20180922181056033)
    );

CHOWN admin VIEW resources_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS sessions_instant_log_20180922181056033 CASCADE;

CREATE TABLE sessions_instant_log_20180922181056033 I18N rfc_restful (
        server_name:text, 
        host:text, 
        port:int, 
        notification_type:text, 
        connection_id:long, 
        connection_start_time_as_text:text, 
        connection_end_time_as_text:text, 
        client_ip:text, 
        user_agent:text, 
        access_interface:text, 
        session_id:long, 
        session_start_time_as_text:text, 
        session_end_time_as_text:text, 
        login:text, 
        database_name:text, 
        webservice_name:text, 
        jms_queue_name:text, 
        intermediate_client_ip:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/sessions/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD sessions_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD server_name NOS ZERO ()
             ADD host NOS ZERO ()
             ADD port NOS ZERO ()
             ADD notification_type NOS ZERO ()
             ADD connection_id NOS ZERO ()
             ADD connection_start_time_as_text NOS ZERO ()
             ADD connection_end_time_as_text NOS ZERO ()
             ADD client_ip NOS ZERO ()
             ADD user_agent NOS ZERO ()
             ADD access_interface NOS ZERO ()
             ADD session_id NOS ZERO ()
             ADD session_start_time_as_text NOS ZERO ()
             ADD session_end_time_as_text NOS ZERO ()
             ADD login NOS ZERO ()
             ADD database_name NOS ZERO ()
             ADD webservice_name NOS ZERO ()
             ADD jms_queue_name NOS ZERO ()
             ADD intermediate_client_ip NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (access_interface, client_ip, connection_end_time_as_text, connection_id, connection_start_time_as_text, cw_search_end_date, cw_search_start_date, database_name, date, host, intermediate_client_ip, jms_queue_name, login, notification_type, port, server_name, session_end_time_as_text, session_id, session_start_time_as_text, user_agent, webservice_name
        )
        WRAPPER (custom sessions_instant_log_20180922181056033)
    );

CHOWN admin VIEW sessions_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS threads_instant_log_20180922181056033 CASCADE;

CREATE TABLE threads_instant_log_20180922181056033 I18N rfc_restful (
        thread_dump_as_text:text, 
        thread_cpu_info_dump_as_text:text, 
        deadlock_thread_dump_as_text:text, 
        date:date, 
        cw_search_start_date:date, 
        cw_search_end_date:date
    )
    FOLDER = '/20180922181056033/threads/intermediate_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD threads_instant_log_20180922181056033(
        I18N rfc_restful
        CONSTRAINTS (
             ADD thread_dump_as_text NOS ZERO ()
             ADD thread_cpu_info_dump_as_text NOS ZERO ()
             ADD deadlock_thread_dump_as_text NOS ZERO ()
             ADD date (any) OPT ANY
             ADD cw_search_start_date (any) OBL ONE
             ADD cw_search_end_date (any) OPT ANY
        )
        OUTPUTLIST (cw_search_end_date, cw_search_start_date, date, deadlock_thread_dump_as_text, thread_cpu_info_dump_as_text, thread_dump_as_text
        )
        WRAPPER (custom threads_instant_log_20180922181056033)
    );

CHOWN admin VIEW threads_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of diagnostic
# #######################################
DROP VIEW IF EXISTS cache_loads_interval_log_20180922181056033 CASCADE;

CREATE VIEW cache_loads_interval_log_20180922181056033 FOLDER = '/20180922181056033/cache_loads/intermediate_views' AS SELECT session_id, last_notification_type AS notification_type, id, query_pattern_id, database_name, view_name, sql_view_name, projected_fields, num_conditions, vdp_condition_list, nullif(cache_status, 'UNKNOWN') AS cache_status, nullif(ttl_status_in_cache, 'UNKNOWN') AS ttl_status_in_cache, ttl_in_cache, nullif(query_pattern_state, 'UNKNOWN') AS query_pattern_state, nullif(exception, '-') AS exception, num_inserted_rows, num_received_rows, case first_notification_type WHEN 'endRefreshCacheProcess' THEN NULL ELSE first_date END AS start_time, case last_notification_type WHEN 'startRefreshCacheProcess' THEN NULL ELSE last_date END AS end_time, case WHEN ((first_notification_type = 'startRefreshCacheProcess' AND last_notification_type = 'endRefreshCacheProcess')) THEN (gettimeinmillis(last_date)-gettimeinmillis(first_date)) ELSE NULL END AS duration FROM (SELECT cache_loads_instant_log_20180922181056033.session_id, first(cache_loads_instant_log_20180922181056033.notification_type) AS first_notification_type, last(cache_loads_instant_log_20180922181056033.notification_type) AS last_notification_type, cache_loads_instant_log_20180922181056033.id, cache_loads_instant_log_20180922181056033.query_pattern_id, last(cache_loads_instant_log_20180922181056033.database_name) AS database_name, last(cache_loads_instant_log_20180922181056033.view_name) AS view_name, last(cache_loads_instant_log_20180922181056033.sql_view_name) AS sql_view_name, last(cache_loads_instant_log_20180922181056033.projected_fields) AS projected_fields, last(cache_loads_instant_log_20180922181056033.num_conditions) AS num_conditions, last(cache_loads_instant_log_20180922181056033.vdp_condition_list) AS vdp_condition_list, last(cache_loads_instant_log_20180922181056033.cache_status) AS cache_status, last(cache_loads_instant_log_20180922181056033.ttl_status_in_cache) AS ttl_status_in_cache, last(cache_loads_instant_log_20180922181056033.ttl_in_cache) AS ttl_in_cache, last(cache_loads_instant_log_20180922181056033.query_pattern_state) AS query_pattern_state, last(cache_loads_instant_log_20180922181056033.exception) AS exception, last(cache_loads_instant_log_20180922181056033.num_inserted_rows) AS num_inserted_rows, last(cache_loads_instant_log_20180922181056033.num_received_rows) AS num_received_rows, first(cache_loads_instant_log_20180922181056033.date) AS first_date, last(cache_loads_instant_log_20180922181056033.date) AS last_date FROM cache_loads_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') GROUP BY cache_loads_instant_log_20180922181056033.session_id, cache_loads_instant_log_20180922181056033.id, cache_loads_instant_log_20180922181056033.query_pattern_id) CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW cache_loads_interval_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS datasources_log_20180922181056033 CASCADE;

CREATE VIEW datasources_log_20180922181056033 FOLDER = '/20180922181056033/datasources' AS SELECT database_name, type, name, active_requests, total_requests, case WHEN (pool_size_as_text = '-') THEN NULL ELSE cast('long', pool_size_as_text) END AS pool_size, case pool_size_as_text WHEN '-' THEN NULL WHEN '0' THEN 0 ELSE (cast('double', active_connections_as_text)/cast('double', pool_size_as_text)) END AS pool_load, case WHEN (active_connections_as_text = '-') THEN NULL ELSE cast('long', active_connections_as_text) END AS active_connections, case WHEN (idle_connections_as_text = '-') THEN NULL ELSE cast('long', idle_connections_as_text) END AS idle_connections, nullif(ping_status, '-') AS ping_status, case WHEN (ping_execution_time_as_text = '-') THEN NULL ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', ping_execution_time_as_text) END AS ping_execution_time, case WHEN (ping_duration_as_text = '-') THEN NULL ELSE cast('long', ping_duration_as_text) END AS ping_duration, nullif(ping_down_cause, '-') AS ping_down_cause, date FROM datasources_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW datasources_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW datasources_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX datasources_20180922181056033_date_idx ON (date ASC);

DROP VIEW IF EXISTS errors_log_20180922181056033 CASCADE;

CREATE VIEW errors_log_20180922181056033 FOLDER = '/20180922181056033/errors' AS SELECT elapsed_milliseconds, thread_name, priority, date, category, nullif(nested_diagnostic_context, '') AS nested_diagnostic_context, substr(message FROM 1 FOR 32672) AS message, substr(error_trace FROM 1 FOR 32672) AS error_trace FROM errors_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW errors_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW errors_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX errors_20180922181056033_date_idx ON (date ASC);

DROP VIEW IF EXISTS monitor_logging_dates CASCADE;

CREATE VIEW monitor_logging_dates FOLDER = '/monitor_logging_dates' AS SELECT max(monitor_logging_dates_aux.logging_date) AS last_logging_date, nest(monitor_start_date) AS monitor_start_dates, nest(vdp_start_date) AS vdp_start_dates, monitor_logging_dates_aux.monitor_log_file FROM (SELECT logging_date, case WHEN (monitor_start_date_as_text is null ) THEN NULL ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', monitor_start_date_as_text) END AS monitor_start_date, case WHEN (vdp_start_date_as_text is null ) THEN NULL ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', vdp_start_date_as_text) END AS vdp_start_date, monitor_log_file FROM monitor_logging_dates_aux WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01')) GROUP BY monitor_logging_dates_aux.monitor_log_file CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW monitor_logging_dates LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS parsed_threads_instant_log_20180922181056033 CASCADE;

CREATE VIEW parsed_threads_instant_log_20180922181056033 FOLDER = '/20180922181056033/threads/intermediate_views' AS SELECT parse_thread_dump(thread_dump_as_text, thread_cpu_info_dump_as_text, deadlock_thread_dump_as_text) AS thread_dump, date FROM threads_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW parsed_threads_instant_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS requests_interval_log_20180922181056033 CASCADE;

CREATE VIEW requests_interval_log_20180922181056033 FOLDER = '/20180922181056033/requests/intermediate_views' AS SELECT id, database_name, user_name, last_notification_type AS notification_type, session_id, case WHEN (first_notification_type = 'startRequest') THEN first_date ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', start_time_as_text) END AS start_time, case WHEN (last_notification_type = 'endRequest') THEN last_date ELSE NULL END AS end_time, case duration_as_text WHEN '-' THEN NULL ELSE cast('long', duration_as_text) END AS duration, case waiting_time_as_text WHEN '-' THEN NULL ELSE cast('long', waiting_time_as_text) END AS waiting_time, case num_rows_as_text WHEN '-' THEN NULL ELSE cast('long', num_rows_as_text) END AS num_rows, nullif(state, '-') AS state, case cache_as_text WHEN '-' THEN NULL ELSE cast('boolean', cache_as_text) END AS cache, substr(query FROM 1 FOR 32672) AS query, request_type, nullif(elements, '-') AS elements, nullif(user_agent, '-') AS user_agent, access_interface, nullif(client_ip, '-') AS client_ip, case transaction_id_as_text WHEN '-' THEN NULL ELSE cast('long', transaction_id_as_text) END AS transaction_id FROM (SELECT requests_instant_log_20180922181056033.id, last(requests_instant_log_20180922181056033.database_name) AS database_name, last(requests_instant_log_20180922181056033.user_name) AS user_name, first(requests_instant_log_20180922181056033.notification_type) AS first_notification_type, last(requests_instant_log_20180922181056033.notification_type) AS last_notification_type, last(requests_instant_log_20180922181056033.session_id) AS session_id, requests_instant_log_20180922181056033.start_time_as_text, last(requests_instant_log_20180922181056033.duration_as_text) AS duration_as_text, last(requests_instant_log_20180922181056033.waiting_time_as_text) AS waiting_time_as_text, last(requests_instant_log_20180922181056033.num_rows_as_text) AS num_rows_as_text, last(requests_instant_log_20180922181056033.state) AS state, last(requests_instant_log_20180922181056033.cache_as_text) AS cache_as_text, last(requests_instant_log_20180922181056033.query) AS query, last(requests_instant_log_20180922181056033.request_type) AS request_type, last(requests_instant_log_20180922181056033.elements) AS elements, last(requests_instant_log_20180922181056033.user_agent) AS user_agent, last(requests_instant_log_20180922181056033.access_interface) AS access_interface, last(requests_instant_log_20180922181056033.client_ip) AS client_ip, last(requests_instant_log_20180922181056033.transaction_id_as_text) AS transaction_id_as_text, first(requests_instant_log_20180922181056033.date) AS first_date, last(requests_instant_log_20180922181056033.date) AS last_date FROM requests_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') GROUP BY requests_instant_log_20180922181056033.id, requests_instant_log_20180922181056033.start_time_as_text) CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW requests_interval_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS resources_log_20180922181056033 CASCADE;

CREATE VIEW resources_log_20180922181056033 FOLDER = '/20180922181056033/resources' AS SELECT date, (survivor_space+eden_space) AS young_space, (nullif(max_survivor_space, -1)+nullif(max_eden_space, -1)) AS max_young_space, old_gen, nullif(max_old_gen, -1) AS max_old_gen, heap_memory_usage, vdp_total_memory AS commited_heap_memory_usage, nullif(max_heap_memory_usage, -1) AS max_heap_memory_usage, vdp_total_connections, vdp_active_connections, vdp_active_requests, vdp_waiting_requests, cpu_percentage, nullif(gc_collection_count_old, -1) AS gc_collection_count_old, nullif(gc_collection_count_young, -1) AS gc_collection_count_young, nullif(gc_collection_time_old, -1) AS gc_collection_time_old, nullif(gc_collection_time_young, -1) AS gc_collection_time_young, gc_percentage_old, gc_percentage_young, gc_percentage FROM resources_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW resources_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW resources_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX resources_20180922181056033_date_idx ON (date ASC);

DROP VIEW IF EXISTS sessions_interval_log_20180922181056033 CASCADE;

CREATE VIEW sessions_interval_log_20180922181056033 FOLDER = '/20180922181056033/sessions/intermediate_views' AS SELECT last_notification_type AS notification_type, connection_id, case WHEN (last_notification_type = 'loginFailure') THEN last_date ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', connection_start_time_as_text) END AS connection_start_time, case WHEN (last_notification_type = 'loginFailure') THEN last_date WHEN (connection_end_time_as_text = '-') THEN NULL ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', connection_end_time_as_text) END AS connection_end_time, nullif(client_ip, '-') AS client_ip, nullif(user_agent, '-') AS user_agent, access_interface, session_id, case WHEN (first_notification_type in ('openSession', 'loginOk')) THEN first_date WHEN (session_start_time_as_text = '-') THEN NULL ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', session_start_time_as_text) END AS session_start_time, case WHEN (last_notification_type in ('closeSession', 'logout')) THEN last_date ELSE NULL END AS session_end_time, nullif(login, '-') AS login, nullif(database_name, '-') AS database_name, nullif(webservice_name, '-') AS webservice_name, nullif(jms_queue_name, '-') AS jms_queue_name, nullif(intermediate_client_ip, '-') AS intermediate_client_ip, case WHEN (first_notification_type in ('openSession', 'loginOk', 'loginFailure')) THEN first_date ELSE to_date('yyyy-MM-dd''T''HH:mm:ss.SSS', session_start_time_as_text) END AS start_time, case WHEN (last_notification_type in ('closeSession', 'logout', 'loginFailure')) THEN last_date ELSE NULL END AS end_time FROM (SELECT first(sessions_instant_log_20180922181056033.notification_type) AS first_notification_type, last(sessions_instant_log_20180922181056033.notification_type) AS last_notification_type, last(sessions_instant_log_20180922181056033.connection_id) AS connection_id, sessions_instant_log_20180922181056033.connection_start_time_as_text, last(sessions_instant_log_20180922181056033.connection_end_time_as_text) AS connection_end_time_as_text, last(sessions_instant_log_20180922181056033.client_ip) AS client_ip, last(sessions_instant_log_20180922181056033.user_agent) AS user_agent, last(sessions_instant_log_20180922181056033.access_interface) AS access_interface, sessions_instant_log_20180922181056033.session_id, last(sessions_instant_log_20180922181056033.session_start_time_as_text) AS session_start_time_as_text, last(sessions_instant_log_20180922181056033.login) AS login, last(sessions_instant_log_20180922181056033.database_name) AS database_name, last(sessions_instant_log_20180922181056033.webservice_name) AS webservice_name, last(sessions_instant_log_20180922181056033.jms_queue_name) AS jms_queue_name, last(sessions_instant_log_20180922181056033.intermediate_client_ip) AS intermediate_client_ip, first(sessions_instant_log_20180922181056033.date) AS first_date, last(sessions_instant_log_20180922181056033.date) AS last_date FROM sessions_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') GROUP BY sessions_instant_log_20180922181056033.session_id, sessions_instant_log_20180922181056033.connection_start_time_as_text) CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW sessions_interval_log_20180922181056033 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS threads_summary_log_20180922181056033 CASCADE;

CREATE VIEW threads_summary_log_20180922181056033 FOLDER = '/20180922181056033/threads' AS SELECT count_threads(thread_dump_as_text) AS threads_count, count_threads(deadlock_thread_dump_as_text) AS deadlock_threads_count, date FROM threads_instant_log_20180922181056033 WHERE cw_search_start_date = to_date('yyyy-MM-dd', '1970-01-01') CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW threads_summary_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW threads_summary_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX threads_summary_20180922181056033_date_idx ON (date ASC);

DROP VIEW IF EXISTS cache_loads_log_20180922181056033 CASCADE;

CREATE VIEW cache_loads_log_20180922181056033 FOLDER = '/20180922181056033/cache_loads' AS SELECT session_id, notification_type, id, query_pattern_id, database_name, view_name, sql_view_name, projected_fields, num_conditions, vdp_condition_list, cache_status, ttl_status_in_cache, ttl_in_cache, query_pattern_state, exception, num_inserted_rows, num_received_rows, start_time, case WHEN (end_time is not null ) THEN end_time ELSE NULL END AS end_time, duration FROM cache_loads_interval_log_20180922181056033 CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW cache_loads_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW cache_loads_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX cache_loads_20180922181056033_start_time_idx ON (start_time ASC)
    DECLARE CACHE INDEX cache_loads_20180922181056033_end_time_idx ON (end_time ASC);

DROP VIEW IF EXISTS requests_log_20180922181056033 CASCADE;

CREATE VIEW requests_log_20180922181056033 FOLDER = '/20180922181056033/requests' AS SELECT id, database_name, user_name, notification_type, session_id, start_time, case WHEN (end_time is not null ) THEN end_time ELSE NULL END AS end_time, duration, waiting_time, num_rows, state, cache, query, request_type, elements, user_agent, access_interface, client_ip, transaction_id FROM requests_interval_log_20180922181056033 CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW requests_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW requests_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX requests_20180922181056033_start_time_idx ON (start_time ASC)
    DECLARE CACHE INDEX requests_20180922181056033_end_time_idx ON (end_time ASC);

DROP VIEW IF EXISTS sessions_log_20180922181056033 CASCADE;

CREATE VIEW sessions_log_20180922181056033 FOLDER = '/20180922181056033/sessions' AS SELECT notification_type, connection_id, connection_start_time, case WHEN (notification_type <> 'loginOk') THEN connection_end_time ELSE NULL END AS connection_end_time, client_ip, user_agent, access_interface, session_id, session_start_time, case WHEN (notification_type not in ('loginOk', 'openSession')) THEN session_end_time ELSE NULL END AS session_end_time, login, database_name, webservice_name, jms_queue_name, intermediate_client_ip, start_time, case WHEN (end_time is not null ) THEN end_time ELSE NULL END AS end_time FROM sessions_interval_log_20180922181056033 CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW sessions_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW sessions_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX sessions_20180922181056033_start_time_idx ON (start_time ASC)
    DECLARE CACHE INDEX sessions_20180922181056033_end_time_idx ON (end_time ASC);

DROP VIEW IF EXISTS threads_log_20180922181056033 CASCADE;

CREATE VIEW threads_log_20180922181056033 FOLDER = '/20180922181056033/threads' AS SELECT date, name, id, lock_object, lock_owner_id, lock_owner_name, previous_cpu_time, cpu_time, elapsed_cpu_time, elapsed_time, cpu_usage, in_native, suspended, in_deadlock, state, stack_trace FROM FLATTEN parsed_threads_instant_log_20180922181056033 AS v ( v.thread_dump) CONTEXT ('I18N' = 'rfc_restful');

CHOWN admin VIEW threads_log_20180922181056033 LASTMODIFICATIONUSER admin;

ALTER VIEW threads_log_20180922181056033
 CACHE FULL
     BATCHSIZEINCACHE DEFAULT TIMETOLIVEINCACHE NOEXPIRE
    DECLARE CACHE INDEX threads_20180922181056033_date_idx ON (date ASC);

# #######################################
# ASSOCIATIONS of diagnostic
# #######################################
# No associations in database diagnostic
# #######################################
# WEBSERVICES of diagnostic
# #######################################
# No web services in database diagnostic
# #######################################
# WIDGETS of diagnostic
# #######################################
# No widgets in database diagnostic
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of diagnostic
# #######################################
# No deployed web services in database diagnostic
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of diagnostic
# #######################################
# No deployed widgets in database diagnostic
# #######################################
# Closing connection with database diagnostic
# #######################################
CLOSE;


# 5 ====================================================================

# #######################################
# DATABASE of itpilot
# #######################################
CONNECT DATABASE itpilot;

# #######################################
# LISTENERS JMS of itpilot
# #######################################
# No listeners jms in database itpilot
# #######################################
# DATASOURCES of itpilot
# #######################################
# No data sources in database itpilot
# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE itpilot
  CHARSET DEFAULT;

# #######################################
# WRAPPERS of itpilot
# #######################################
DROP WRAPPER ITP IF EXISTS test_fundinfo CASCADE;

CREATE WRAPPER ITP test_fundinfo
    VERIFICATION false
    JSCRIPT '
function getInit() {
    var Start_1 = new INIT();
    Start_1.setI18n("FR_EURO");
    return Start_1;

}

function getOutputSchema() {
    var _structure_Record_Constructor_1_output = new RECORD_STRUCTURE("Record_Constructor_1_output");
    var _structure_Record_Constructor_1_output_test = new RECORD_STRUCTURE("Extractor_1_ITEM");
    _structure_Record_Constructor_1_output_test.setText("test",NOT_SENSITIVE);
    _structure_Record_Constructor_1_output.setArray("test", _structure_Record_Constructor_1_output_test);
    return _structure_Record_Constructor_1_output;
}

function main() {
    var Start_1_output = null;
    var Start_1 = null;
    Start_1 = new INIT(null,"Start_1_output");
    Start_1.onError(RUNTIME_ERROR, ON_ERROR_RAISE);
    Start_1.onError(INVALID_QUERY_ERROR, ON_ERROR_RAISE);
    Start_1.setI18n("FR_EURO");
    Start_1.setComponentName("Start_1");
    Start_1_output = Start_1.exec();
    var Sequence_1 = null;
    var Sequence_1_output = null;
    var Extractor_1_output = null;
    var _structure_Record_Constructor_1_output = new RECORD_STRUCTURE("Record_Constructor_1_output");
    var _structure_Record_Constructor_1_output_test = new RECORD_STRUCTURE("Extractor_1_ITEM");
    _structure_Record_Constructor_1_output_test.setText("test",NOT_SENSITIVE);
    _structure_Record_Constructor_1_output.setArray("test", _structure_Record_Constructor_1_output_test);
    var Record_Constructor_1_output = null;
    try {
        Sequence_1 = new SEQUENCE("sequence://ClearPersistentCookies();Navigate(https://www.fundinfo.com,0);ExtendedWaitPages(-1);ExtendedWaitPages(-1);FindElementByXPath(//INPUT[\\@id = \"searchfield\"]);FireEventOnSelectedElement(onmousemove>onmouseover>onmousedown>onmouseup>onclick,true);SetValue(LU0792613431);FireEventOnSelectedElement(onkeydown>onkeypress>oninput>onkeyup>onchange,true);FindElementByXPath(//BUTTON[matches\\\\(.\\\\,\"\\\\\\\\s*Search\\\\\\\\s*\"\\\\)]);FireEventOnSelectedElement(onmousemove>onmouseover>onmousedown>onmouseup>onclick);ExtendedWaitPages(-1);", SEQUENCE_IEBROWSER);
        Sequence_1.onError(RUNTIME_ERROR, ON_ERROR_RAISE);
        Sequence_1.onError(CONNECTION_ERROR, ON_ERROR_RAISE);
        Sequence_1.onError(SEQUENCE_ERROR, ON_ERROR_RAISE);
        Sequence_1.onError(HTTP_ERROR, ON_ERROR_RAISE);
        Sequence_1.onError(TIMEOUT_ERROR, ON_ERROR_RAISE);
        Sequence_1.setRetries(3);
        Sequence_1.setRetryDelay(3000);
        Sequence_1.setHttpConfigurationSequence("Navigate(about:config?,0);");
        Sequence_1.setComponentName("Sequence_1");
        Sequence_1_output = Sequence_1.exec([Start_1_output]);
        var Extractor_1 = null;
        var _structure_Extractor_1_ITEM = new RECORD_STRUCTURE("Extractor_1_ITEM");
        _structure_Extractor_1_ITEM.setText("test",NOT_SENSITIVE);
        Extractor_1 = new EXTRACTOR("Extractor_1", Sequence_1_output, "#include \"scanners/CYBER_LETTERS_LEXER\"  { NAME=\"Extractor_1_ITEM\"   TAGSET=\"ALL4_6\"   ENDANCHOR() ENDTD() ENDTR() TR() TD() ENDTD() TD() ENDTD() TD() ANCHOR() :test ENDANCHOR() }", _structure_Extractor_1_ITEM);
        Extractor_1.onError(NO_RESULTS_ERROR, ON_ERROR_IGNORE);
        Extractor_1.onError(INVALID_RECORD_ERROR, ON_ERROR_RAISE);
        Extractor_1.onError(RUNTIME_ERROR, ON_ERROR_RAISE);
        Extractor_1.setI18n("FR_EURO");
        Extractor_1.setNormalizeSource(true);
        Extractor_1.setComponentName("Extractor_1");
        Extractor_1_output = Extractor_1.exec([]);
        var Record_Constructor_1 = null;
        Record_Constructor_1 = new RECORD_CONSTRUCTOR([Extractor_1_output], "Record_Constructor_1_output");
        Record_Constructor_1.setComponentName("Record_Constructor_1");
        Record_Constructor_1.onError(RUNTIME_ERROR, ON_ERROR_RAISE);
        Record_Constructor_1.add("test", "$0");
        Record_Constructor_1_output = Record_Constructor_1.exec();
        var Output_1 = null;
        Output_1 = new OUTPUT(_structure_Record_Constructor_1_output);
        Output_1.setComponentName("Output_1");
        Output_1.onError(RUNTIME_ERROR, ON_ERROR_RAISE);
        Output_1.add(Record_Constructor_1_output);
        Output_1.close();
    } finally {
        Sequence_1.close();
    }
}
'
    MODEL '<?xml version="1.0" encoding="UTF-8" ?>
  <InitComponent className="com.denodo.itp.model.components.InitComponent">
    <browserType>0</browserType>
    <checkoutTime>0</checkoutTime>
    <comment>This is the initial component.
The output of this component is a record that defines the inputs of the wrapper: when executing it, these values will be specified externally.
The output is not yet set, the configuration of the component can be edited by double-clicking in the component.</comment>
    <componentName>Start_1</componentName>
    <context/>
    <customErrorExpressions/>
    <errorManagers>
      <entry>
        <key>2</key>
        <value>
          <actionManagers/>
          <handler>RAISE</handler>
        </value>
      </entry>
      <entry>
        <key>10</key>
        <value>
          <actionManagers/>
          <handler>RAISE</handler>
        </value>
      </entry>
    </errorManagers>
    <errorRecords/>
    <expirationTime>0</expirationTime>
    <globalBackSequence/>
    <inRetryMode>false</inRetryMode>
    <inputs/>
    <locale>
      <country>FR</country>
      <currency/>
      <currencyDecimalPosition/>
      <currencyDecimalSeparator/>
      <currencyGroupSeparator/>
      <currencySymbol/>
      <datePattern>d MMM yyyy HH:mm:ss</datePattern>
      <displayName>FR_EURO :  French (France)</displayName>
      <doubleDecimalPosition>2</doubleDecimalPosition>
      <doubleDecimalSeparator/>
      <doubleGroupSeparator/>
      <language>fr</language>
      <moneyPattern/>
      <name>FR_EURO</name>
      <sizeDecimalPosition/>
      <sizeDecimalSeparator/>
      <sizeGroupSeparator/>
      <sizeUnits/>
      <timePattern/>
      <timezone>Europe/Paris</timezone>
      <variant/>
    </locale>
    <mandatoryFields/>
    <maxBrowserTTL>0</maxBrowserTTL>
    <maxPoolSize>0</maxPoolSize>
    <minPoolSize>0</minPoolSize>
    <nextComponent className="com.denodo.itp.model.components.SequenceComponent">
      <backSequence/>
      <backSequenceWithComments/>
      <browserOptions>
        <entry>
          <key>JSBrowser.OPTIMIZATION_MODE</key>
          <value>none</value>
        </entry>
        <entry>
          <key>JSBrowser.MINIMIZE_DOM</key>
          <value>0</value>
        </entry>
      </browserOptions>
      <comment>This is the first sequence component.
This component makes the navigation to the first page of results. This navigation will probably include filling web forms and/or authenticating the user.
The configuration of the component can be edited by double-clicking in the component.</comment>
      <componentName>Sequence_1</componentName>
      <context/>
      <customErrorExpressions/>
      <errorManagers>
        <entry>
          <key>2</key>
          <value>
            <actionManagers/>
            <handler>RAISE</handler>
          </value>
        </entry>
        <entry>
          <key>4</key>
          <value>
            <actionManagers/>
            <handler>RAISE</handler>
          </value>
        </entry>
        <entry>
          <key>5</key>
          <value>
            <actionManagers/>
            <handler>RAISE</handler>
          </value>
        </entry>
        <entry>
          <key>6</key>
          <value>
            <actionManagers/>
            <handler>RAISE</handler>
          </value>
        </entry>
        <entry>
          <key>7</key>
          <value>
            <actionManagers/>
            <handler>RAISE</handler>
          </value>
        </entry>
      </errorManagers>
      <errorRecords/>
      <httpConfigurationSequence>Navigate(about:config?,0);</httpConfigurationSequence>
      <httpOptimizationData/>
      <inRetryMode>false</inRetryMode>
      <inputBrowserType>0</inputBrowserType>
      <inputReuseConnections>false</inputReuseConnections>
      <inputSequence>ClearPersistentCookies();
Navigate(https://www.fundinfo.com,0);
ExtendedWaitPages(-1);
ExtendedWaitPages(-1);
FindElementByXPath(//INPUT[\@id = "searchfield"]);
FireEventOnSelectedElement(onmousemove&gt;onmouseover&gt;onmousedown&gt;onmouseup&gt;onclick,true);
SetValue(LU0792613431);
FireEventOnSelectedElement(onkeydown&gt;onkeypress&gt;oninput&gt;onkeyup&gt;onchange,true);
FindElementByXPath(//BUTTON[matches\\(.\\,"\\\\s*Search\\\\s*"\\)]);
FireEventOnSelectedElement(onmousemove&gt;onmouseover&gt;onmousedown&gt;onmouseup&gt;onclick);
ExtendedWaitPages(-1);

</inputSequence>
      <inputSequenceType>1</inputSequenceType>
      <inputSequenceWithComments>ClearPersistentCookies();
Navigate(https://www.fundinfo.com,0);
ExtendedWaitPages(-1);
ExtendedWaitPages(-1);
FindElementByXPath(//INPUT[\@id = "searchfield"]);
FireEventOnSelectedElement(onmousemove&gt;onmouseover&gt;onmousedown&gt;onmouseup&gt;onclick,true);
SetValue(LU0792613431);
FireEventOnSelectedElement(onkeydown&gt;onkeypress&gt;oninput&gt;onkeyup&gt;onchange,true);
FindElementByXPath(//BUTTON[matches\\(.\\,"\\\\s*Search\\\\s*"\\)]);
FireEventOnSelectedElement(onmousemove&gt;onmouseover&gt;onmousedown&gt;onmouseup&gt;onclick);
ExtendedWaitPages(-1);

</inputSequenceWithComments>
      <inputs>
        <input className="com.denodo.itp.model.ComponentParameter">
          <firstParameterType className="com.denodo.itp.model.types.RecordType">
            <empty>true</empty>
            <fieldNames/>
            <listTypes/>
            <lists/>
            <name>Start_1_output</name>
            <pages/>
            <recordTypes/>
            <records/>
            <simpleTypes/>
            <simples/>
            <type>3</type>
          </firstParameterType>
          <firstParameterVariableName/>
          <parameterName>Input values</parameterName>
          <parameterTypes>
            <parameterType className="com.denodo.itp.model.types.RecordType">
              <empty>true</empty>
              <fieldNames/>
              <listTypes/>
              <lists/>
              <name>Start_1_output</name>
              <pages/>
              <recordTypes/>
              <records/>
              <simpleTypes/>
              <simples/>
              <type>3</type>
            </parameterType>
          </parameterTypes>
          <parameterVariableNames/>
        </input>
        <input className="com.denodo.itp.model.ComponentParameter">
          <firstParameterVariableName/>
          <parameterName>Input page</parameterName>
          <parameterTypes/>
          <parameterVariableNames/>
        </input>
      </inputs>
      <maxRetries>3</maxRetries>
      <nextComponent className="com.denodo.itp.model.components.ExtractorComponent">
        <comment>The Extractor component extracts information from each results page. It defines a record structure and matches the current page into a list of records with that structure.
The configuration of the component can be edited by double-clicking in the component.</comment>
        <componentName>Extractor_1</componentName>
        <context/>
        <customErrorExpressions/>
        <errorManagers>
          <entry>
            <key>16</key>
            <value>
              <actionManagers/>
              <handler>IGNORE</handler>
            </value>
          </entry>
          <entry>
            <key>2</key>
            <value>
              <actionManagers/>
              <handler>RAISE</handler>
            </value>
          </entry>
          <entry>
            <key>8</key>
            <value>
              <actionManagers/>
              <handler>RAISE</handler>
            </value>
          </entry>
        </errorManagers>
        <errorRecords/>
        <inRetryMode>false</inRetryMode>
        <inputSpecification>#include "scanners/CYBER_LETTERS_LEXER"

{ NAME="Extractor_1_ITEM"
  TAGSET="ALL4_6"
  ENDANCHOR() ENDTD() ENDTR() TR() TD() ENDTD() TD() ENDTD() TD() ANCHOR() :test ENDANCHOR()
}
</inputSpecification>
        <inputSpecificationWithoutComments>#include "scanners/CYBER_LETTERS_LEXER"

{ NAME="Extractor_1_ITEM"
  TAGSET="ALL4_6"
  ENDANCHOR() ENDTD() ENDTR() TR() TD() ENDTD() TD() ENDTD() TD() ANCHOR() :test ENDANCHOR()
}
</inputSpecificationWithoutComments>
        <inputs>
          <input className="com.denodo.itp.model.ComponentParameter">
            <firstParameterType className="com.denodo.itp.model.types.PageType">
              <name>Sequence_1_output</name>
              <type>2</type>
            </firstParameterType>
            <firstParameterVariableName/>
            <parameterName>Input page</parameterName>
            <parameterTypes>
              <parameterType className="com.denodo.itp.model.types.PageType">
                <name>Sequence_1_output</name>
                <type>2</type>
              </parameterType>
            </parameterTypes>
            <parameterVariableNames/>
          </input>
          <input className="com.denodo.itp.model.ComponentParameter">
            <firstParameterVariableName/>
            <parameterName>Input values</parameterName>
            <parameterTypes/>
            <parameterVariableNames/>
          </input>
        </inputs>
        <locale>
          <country>FR</country>
          <currency/>
          <currencyDecimalPosition/>
          <currencyDecimalSeparator/>
          <currencyGroupSeparator/>
          <currencySymbol/>
          <datePattern>d MMM yyyy HH:mm:ss</datePattern>
          <displayName>FR_EURO :  French (France)</displayName>
          <doubleDecimalPosition>2</doubleDecimalPosition>
          <doubleDecimalSeparator/>
          <doubleGroupSeparator/>
          <language>fr</language>
          <moneyPattern/>
          <name>FR_EURO</name>
          <sizeDecimalPosition/>
          <sizeDecimalSeparator/>
          <sizeGroupSeparator/>
          <sizeUnits/>
          <timePattern/>
          <timezone>Europe/Paris</timezone>
          <variant/>
        </locale>
        <nextComponent className="com.denodo.itp.model.components.RecordConstructorComponent">
          <comment>The record constructor component takes several lists, records and values as inputs and builds a new record from them. In this case,  it is typically used to: a) apply transformations on the fields of an extracted record, b) add new derived fields to an extracted record. The configuration of the component can be edited by double-clicking in the component.</comment>
          <componentName>Record_Constructor_1</componentName>
          <context/>
          <customErrorExpressions/>
          <errorManagers>
            <entry>
              <key>2</key>
              <value>
                <actionManagers/>
                <handler>RAISE</handler>
              </value>
            </entry>
          </errorManagers>
          <errorRecords/>
          <inRetryMode>false</inRetryMode>
          <inputAddValues>
            <entry>
              <key>test</key>
              <value>$0</value>
            </entry>
          </inputAddValues>
          <inputUserValues/>
          <inputs>
            <input className="com.denodo.itp.model.ComponentParameter">
              <firstParameterType className="com.denodo.itp.model.types.ListType">
                <name>Extractor_1_output</name>
                <record className="com.denodo.itp.model.types.RecordType">
                  <empty>false</empty>
                  <fieldNames>
                    <String>test</String>
                  </fieldNames>
                  <listTypes/>
                  <lists/>
                  <name>Extractor_1_ITEM</name>
                  <pages/>
                  <recordTypes/>
                  <records/>
                  <simpleTypes/>
                  <simples>
                    <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                      <fieldName>test</fieldName>
                      <fieldType className="com.denodo.itp.model.types.simple.StringType">
                        <alias/>
                        <loginField>false</loginField>
                        <name>string</name>
                        <passwordField>false</passwordField>
                        <regexp/>
                        <sensitive>false</sensitive>
                        <type>4</type>
                      </fieldType>
                    </simple>
                  </simples>
                  <type>3</type>
                </record>
                <type>1</type>
              </firstParameterType>
              <firstParameterVariableName/>
              <parameterName>Input values</parameterName>
              <parameterTypes>
                <parameterType className="com.denodo.itp.model.types.ListType">
                  <name>Extractor_1_output</name>
                  <record className="com.denodo.itp.model.types.RecordType">
                    <empty>false</empty>
                    <fieldNames>
                      <String>test</String>
                    </fieldNames>
                    <listTypes/>
                    <lists/>
                    <name>Extractor_1_ITEM</name>
                    <pages/>
                    <recordTypes/>
                    <records/>
                    <simpleTypes/>
                    <simples>
                      <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                        <fieldName>test</fieldName>
                        <fieldType className="com.denodo.itp.model.types.simple.StringType">
                          <alias/>
                          <loginField>false</loginField>
                          <name>string</name>
                          <passwordField>false</passwordField>
                          <regexp/>
                          <sensitive>false</sensitive>
                          <type>4</type>
                        </fieldType>
                      </simple>
                    </simples>
                    <type>3</type>
                  </record>
                  <type>1</type>
                </parameterType>
              </parameterTypes>
              <parameterVariableNames/>
            </input>
          </inputs>
          <nextComponent className="com.denodo.itp.model.components.OutputComponent">
            <comment>The Output component takes a record and sends it to the output of the wrapper.
Here the component outputs all the result records found by the Extractor component.
The component has no configuration.</comment>
            <componentName>Output_1</componentName>
            <context/>
            <customErrorExpressions/>
            <errorManagers>
              <entry>
                <key>2</key>
                <value>
                  <actionManagers/>
                  <handler>RAISE</handler>
                </value>
              </entry>
            </errorManagers>
            <errorRecords/>
            <inRetryMode>false</inRetryMode>
            <inputs>
              <input className="com.denodo.itp.model.ComponentParameter">
                <firstParameterType className="com.denodo.itp.model.types.RecordType">
                  <empty>false</empty>
                  <fieldNames>
                    <String>test</String>
                  </fieldNames>
                  <listTypes/>
                  <lists>
                    <list className="com.denodo.itp.model.types.RecordFieldEntry">
                      <fieldName>test</fieldName>
                      <fieldType className="com.denodo.itp.model.types.ListType">
                        <name>Extractor_1_output</name>
                        <record className="com.denodo.itp.model.types.RecordType">
                          <empty>false</empty>
                          <fieldNames>
                            <String>test</String>
                          </fieldNames>
                          <listTypes/>
                          <lists/>
                          <name>Extractor_1_ITEM</name>
                          <pages/>
                          <recordTypes/>
                          <records/>
                          <simpleTypes/>
                          <simples>
                            <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                              <fieldName>test</fieldName>
                              <fieldType className="com.denodo.itp.model.types.simple.StringType">
                                <alias/>
                                <loginField>false</loginField>
                                <name>string</name>
                                <passwordField>false</passwordField>
                                <regexp/>
                                <sensitive>false</sensitive>
                                <type>4</type>
                              </fieldType>
                            </simple>
                          </simples>
                          <type>3</type>
                        </record>
                        <type>1</type>
                      </fieldType>
                    </list>
                  </lists>
                  <name>Record_Constructor_1_output</name>
                  <pages/>
                  <recordTypes/>
                  <records/>
                  <simpleTypes/>
                  <simples/>
                  <type>3</type>
                </firstParameterType>
                <firstParameterVariableName/>
                <parameterName>Record</parameterName>
                <parameterTypes>
                  <parameterType className="com.denodo.itp.model.types.RecordType">
                    <empty>false</empty>
                    <fieldNames>
                      <String>test</String>
                    </fieldNames>
                    <listTypes/>
                    <lists>
                      <list className="com.denodo.itp.model.types.RecordFieldEntry">
                        <fieldName>test</fieldName>
                        <fieldType className="com.denodo.itp.model.types.ListType">
                          <name>Extractor_1_output</name>
                          <record className="com.denodo.itp.model.types.RecordType">
                            <empty>false</empty>
                            <fieldNames>
                              <String>test</String>
                            </fieldNames>
                            <listTypes/>
                            <lists/>
                            <name>Extractor_1_ITEM</name>
                            <pages/>
                            <recordTypes/>
                            <records/>
                            <simpleTypes/>
                            <simples>
                              <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                                <fieldName>test</fieldName>
                                <fieldType className="com.denodo.itp.model.types.simple.StringType">
                                  <alias/>
                                  <loginField>false</loginField>
                                  <name>string</name>
                                  <passwordField>false</passwordField>
                                  <regexp/>
                                  <sensitive>false</sensitive>
                                  <type>4</type>
                                </fieldType>
                              </simple>
                            </simples>
                            <type>3</type>
                          </record>
                          <type>1</type>
                        </fieldType>
                      </list>
                    </lists>
                    <name>Record_Constructor_1_output</name>
                    <pages/>
                    <recordTypes/>
                    <records/>
                    <simpleTypes/>
                    <simples/>
                    <type>3</type>
                  </parameterType>
                </parameterTypes>
                <parameterVariableNames/>
              </input>
              <input className="com.denodo.itp.model.ComponentParameter">
                <firstParameterVariableName/>
                <parameterName>Input records</parameterName>
                <parameterTypes/>
                <parameterVariableNames/>
              </input>
            </inputs>
            <onErrorActions/>
            <onErrorExpressions/>
            <onErrorMessages/>
            <outputName/>
            <regenerable>true</regenerable>
            <withOutput>false</withOutput>
          </nextComponent>
          <onErrorActions/>
          <onErrorExpressions/>
          <onErrorMessages/>
          <output className="com.denodo.itp.model.types.RecordType">
            <empty>false</empty>
            <fieldNames>
              <String>test</String>
            </fieldNames>
            <listTypes/>
            <lists>
              <list className="com.denodo.itp.model.types.RecordFieldEntry">
                <fieldName>test</fieldName>
                <fieldType className="com.denodo.itp.model.types.ListType">
                  <name>Extractor_1_output</name>
                  <record className="com.denodo.itp.model.types.RecordType">
                    <empty>false</empty>
                    <fieldNames>
                      <String>test</String>
                    </fieldNames>
                    <listTypes/>
                    <lists/>
                    <name>Extractor_1_ITEM</name>
                    <pages/>
                    <recordTypes/>
                    <records/>
                    <simpleTypes/>
                    <simples>
                      <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                        <fieldName>test</fieldName>
                        <fieldType className="com.denodo.itp.model.types.simple.StringType">
                          <alias/>
                          <loginField>false</loginField>
                          <name>string</name>
                          <passwordField>false</passwordField>
                          <regexp/>
                          <sensitive>false</sensitive>
                          <type>4</type>
                        </fieldType>
                      </simple>
                    </simples>
                    <type>3</type>
                  </record>
                  <type>1</type>
                </fieldType>
              </list>
            </lists>
            <name>Record_Constructor_1_output</name>
            <pages/>
            <recordTypes/>
            <records/>
            <simpleTypes/>
            <simples/>
            <type>3</type>
          </output>
          <outputName/>
          <regenerable>true</regenerable>
          <withOutput>true</withOutput>
        </nextComponent>
        <normalizeSource>true</normalizeSource>
        <onErrorActions/>
        <onErrorExpressions/>
        <onErrorMessages/>
        <output className="com.denodo.itp.model.types.ListType">
          <name>Extractor_1_output</name>
          <record className="com.denodo.itp.model.types.RecordType">
            <empty>false</empty>
            <fieldNames>
              <String>test</String>
            </fieldNames>
            <listTypes/>
            <lists/>
            <name>Extractor_1_ITEM</name>
            <pages/>
            <recordTypes/>
            <records/>
            <simpleTypes/>
            <simples>
              <simple className="com.denodo.itp.model.types.RecordFieldEntry">
                <fieldName>test</fieldName>
                <fieldType className="com.denodo.itp.model.types.simple.StringType">
                  <alias/>
                  <loginField>false</loginField>
                  <name>string</name>
                  <passwordField>false</passwordField>
                  <regexp/>
                  <sensitive>false</sensitive>
                  <type>4</type>
                </fieldType>
              </simple>
            </simples>
            <type>3</type>
          </record>
          <type>1</type>
        </output>
        <outputName/>
        <regenerable>true</regenerable>
        <structureName>Extractor_1_ITEM</structureName>
        <withOutput>true</withOutput>
      </nextComponent>
      <onErrorActions/>
      <onErrorExpressions/>
      <onErrorMessages/>
      <output className="com.denodo.itp.model.types.PageType">
        <name>Sequence_1_output</name>
        <type>2</type>
      </output>
      <outputName/>
      <regenerable>true</regenerable>
      <timeBetweenRetries>3000</timeBetweenRetries>
      <useCustomBack>false</useCustomBack>
      <withOutput>true</withOutput>
    </nextComponent>
    <objectTimeout>0</objectTimeout>
    <onErrorActions/>
    <onErrorExpressions/>
    <onErrorMessages/>
    <output className="com.denodo.itp.model.types.RecordType">
      <empty>true</empty>
      <fieldNames/>
      <listTypes/>
      <lists/>
      <name>Start_1_output</name>
      <pages/>
      <recordTypes/>
      <records/>
      <simpleTypes/>
      <simples/>
      <type>3</type>
    </output>
    <outputName/>
    <pingQuery/>
    <poolName/>
    <preSequence/>
    <regenerable>true</regenerable>
    <reusableObjects>false</reusableObjects>
    <sensitiveFields/>
    <sessionTimeout>0</sessionTimeout>
    <sessionValidationTimeout>0</sessionValidationTimeout>
    <sleepTime>0</sleepTime>
    <withOutput>true</withOutput>
  </InitComponent>
'
;

CHOWN admin WRAPPER ITP test_fundinfo LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of itpilot
# #######################################
DROP PROCEDURE IF EXISTS test CASCADE;

CREATE PROCEDURE test
    CLASSNAME='com.denodo.sprocs.PDF_Extract'
    JARS 'pdf-extr';

CHOWN admin PROCEDURE test LASTMODIFICATIONUSER admin;

# #######################################
# TYPES of itpilot
# #######################################
DROP TYPE IF EXISTS test_fundinfo_extractor_1_item_register CASCADE;

CREATE TYPE test_fundinfo_extractor_1_item_register AS REGISTER OF (test:text);

DROP TYPE IF EXISTS test_fundinfo_extractor_1_output_array CASCADE;

CREATE TYPE test_fundinfo_extractor_1_output_array AS ARRAY OF test_fundinfo_extractor_1_item_register;

# #######################################
# MAPS of itpilot
# #######################################
# No maps in database itpilot
# #######################################
# BASE VIEWS of itpilot
# #######################################
DROP VIEW IF EXISTS test_fundinfo CASCADE;

CREATE TABLE test_fundinfo I18N fr_euro (
        test:test_fundinfo_extractor_1_output_array
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD test_fundinfo(
        I18N fr_euro
        CONSTRAINTS (
             ADD test NOS ZERO ()
             ADD test.test NOS ZERO ()
        )
        OUTPUTLIST (test
        )
        WRAPPER (itp test_fundinfo)
    );

CHOWN admin VIEW test_fundinfo LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of itpilot
# #######################################
# No views in database itpilot
# #######################################
# ASSOCIATIONS of itpilot
# #######################################
# No associations in database itpilot
# #######################################
# WEBSERVICES of itpilot
# #######################################
# No web services in database itpilot
# #######################################
# WIDGETS of itpilot
# #######################################
# No widgets in database itpilot
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of itpilot
# #######################################
# No deployed web services in database itpilot
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of itpilot
# #######################################
# No deployed widgets in database itpilot
# #######################################
# Closing connection with database itpilot
# #######################################
CLOSE;


# 6 ====================================================================

# #######################################
# DATABASE of mpet_test
# #######################################
DROP DATABASE IF EXISTS mpet_test;

CREATE DATABASE mpet_test '';

CONNECT DATABASE mpet_test;

# #######################################
# FOLDERS of mpet_test
# #######################################
CREATE OR REPLACE FOLDER '/MPET' ;

CHOWN admin FOLDER '/MPET';

CREATE OR REPLACE FOLDER '/mpet/01 - Base_Views' ;

CHOWN admin FOLDER '/mpet/01 - Base_Views';

CREATE OR REPLACE FOLDER '/mpet/02 - Derived_Views' ;

CHOWN admin FOLDER '/mpet/02 - Derived_Views';

# #######################################
# LISTENERS JMS of mpet_test
# #######################################
# No listeners jms in database mpet_test
# #######################################
# DATASOURCES of mpet_test
# #######################################
DROP DATASOURCE JDBC IF EXISTS sqlexpress CASCADE;

CREATE DATASOURCE JDBC sqlexpress
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=testdb'
    USERNAME = 'admin'
    USERPASSWORD = 'EsUPQn4UyTyc38Zza6YVqQv0kE5whpEAcIHqIxXJYwtynGtwld5RQYK7lr/LCKUQV89PftAAP5y1gRrDEZO8pt95N6qM0OcH7jrV7nI6LgUFfuJpSXNvoM42PL2K7meQ' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, firstdayofweek, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, lastdayofweek, len, ln, log, lower, ltrim, mod, mult, nextweekday, now, nullif, pi, position, pow, power, previousweekday, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date(literal), to_localdate(literal), to_time(literal), to_timestamp(literal), to_timestamptz(literal), trim, trunc, upper, xmlquery, xpath)
    );

CHOWN admin DATASOURCE JDBC sqlexpress LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE mpet_test
  CHARSET DEFAULT;

# #######################################
# WRAPPERS of mpet_test
# #######################################
DROP WRAPPER JDBC IF EXISTS bv CASCADE;

CREATE WRAPPER JDBC bv
    DATASOURCENAME=sqlexpress
    SQLSENTENCE='select 1 as a'   
    OUTPUTSCHEMA (
        a = 'a' :'java.lang.Integer' (sourcetypedecimals='0', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC bv LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_cached CASCADE;

CREATE WRAPPER JDBC bv_cached
    DATASOURCENAME=sqlexpress
    SQLSENTENCE='select 1 as a'   
    OUTPUTSCHEMA (
        a = 'a' :'java.lang.Integer' (sourcetypedecimals='0', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE NOT UPDATEABLE
    );

CHOWN admin WRAPPER JDBC bv_cached LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_v_yardppcontainers CASCADE;

CREATE WRAPPER JDBC bv_v_yardppcontainers
    FOLDER = '/mpet/01 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='v_YardPPContainers' 
    OUTPUTSCHEMA (
        container = 'Container' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        visitcodein = 'VisitCodeIn' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        carriernamein = 'CarrierNameIn' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        containers = 'Containers' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        reservationid = 'ReservationID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_v_yardppcontainers LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_v_yardppreservations CASCADE;

CREATE WRAPPER JDBC bv_v_yardppreservations
    FOLDER = '/mpet/01 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='v_YardPPReservations' 
    OUTPUTSCHEMA (
        reservationid = 'ReservationID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        visitcodein = 'VisitCodeIn' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        tier = 'Tier' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        frombay = 'FromBay' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        tobay = 'ToBay' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        remainingcont = 'RemainingCont' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_v_yardppreservations LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of mpet_test
# #######################################
# No stored procedures in database mpet_test
# #######################################
# TYPES of mpet_test
# #######################################
# No types in database mpet_test
# #######################################
# MAPS of mpet_test
# #######################################
# No maps in database mpet_test
# #######################################
# BASE VIEWS of mpet_test
# #######################################
DROP VIEW IF EXISTS bv CASCADE;

CREATE TABLE bv I18N gb (
        a:int (sourcetypedecimals = '0', sourcetypesize = '10', sourcetypeid = '4')
    )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv(
        I18N gb
        CONSTRAINTS (
             ADD a NOS ZERO ()
        )
        OUTPUTLIST (a
        )
        WRAPPER (jdbc bv)
    );

CHOWN admin VIEW bv LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_cached CASCADE;

CREATE TABLE bv_cached I18N gb (
        a:int (sourcetypedecimals = '0', sourcetypesize = '10', sourcetypeid = '4')
    )
    CACHE PARTIAL
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE NOEXPIRE
    ADD SEARCHMETHOD bv_cached(
        I18N gb
        CONSTRAINTS (
             ADD a NOS ZERO ()
        )
        OUTPUTLIST (a
        )
        WRAPPER (jdbc bv_cached)
    );

CHOWN admin VIEW bv_cached LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_v_yardppcontainers CASCADE;

CREATE TABLE bv_v_yardppcontainers I18N be_euro (
        container:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        visitcodein:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        carriernamein:text (sourcetypesize = '50', sourcetypeid = '12'), 
        containers:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        reservationid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    FOLDER = '/mpet/01 - base_views'
    CACHE OFF
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_v_yardppcontainers(
        I18N be_euro
        CONSTRAINTS (
             ADD container (any) OPT ANY
             ADD visitcodein (any) OPT ANY
             ADD carriernamein (any) OPT ANY
             ADD containers (any) OPT ANY
             ADD reservationid (any) OPT ANY
        )
        OUTPUTLIST (carriernamein, container, containers, reservationid, visitcodein
        )
        WRAPPER (jdbc bv_v_yardppcontainers)
    );

CHOWN admin VIEW bv_v_yardppcontainers LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_v_yardppreservations CASCADE;

CREATE TABLE bv_v_yardppreservations I18N be_euro (
        reservationid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        visitcodein:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        tier:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        frombay:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        tobay:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        remainingcont:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    FOLDER = '/mpet/01 - base_views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_v_yardppreservations(
        I18N be_euro
        CONSTRAINTS (
             ADD reservationid (any) OPT ANY
             ADD visitcodein (any) OPT ANY
             ADD tier (any) OPT ANY
             ADD frombay (any) OPT ANY
             ADD tobay (any) OPT ANY
             ADD remainingcont (any) OPT ANY
        )
        OUTPUTLIST (frombay, remainingcont, reservationid, tier, tobay, visitcodein
        )
        WRAPPER (jdbc bv_v_yardppreservations)
    );

CHOWN admin VIEW bv_v_yardppreservations LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of mpet_test
# #######################################
DROP VIEW IF EXISTS bv_v_yardppreservations_j_bv_v_yardppcontainers CASCADE;

CREATE VIEW bv_v_yardppreservations_j_bv_v_yardppcontainers FOLDER = '/mpet/01 - base_views' AS SELECT bv_v_yardppreservations.reservationid AS reservationid, bv_v_yardppreservations.visitcodein AS visitcodein, bv_v_yardppreservations.tier AS tier, bv_v_yardppreservations.frombay AS frombay, bv_v_yardppreservations.tobay AS tobay, bv_v_yardppreservations.remainingcont AS remainingcont, bv_v_yardppcontainers.container AS test_container, bv_v_yardppcontainers.visitcodein AS test_visitcodein, bv_v_yardppcontainers.carriernamein AS test_carriernamein, bv_v_yardppcontainers.containers AS test_containers, bv_v_yardppcontainers.reservationid AS test_reservationid FROM bv_v_yardppreservations AS bv_v_yardppreservations INNER JOIN bv_v_yardppcontainers AS bv_v_yardppcontainers ON bv_v_yardppreservations.reservationid = bv_v_yardppcontainers.container ;

ALTER VIEW bv_v_yardppreservations_j_bv_v_yardppcontainers
 LAYOUT (bv_v_yardppreservations = [20, 20, 200, 146], bv_v_yardppcontainers = [250, 20, 200, 126]);

CHOWN admin VIEW bv_v_yardppreservations_j_bv_v_yardppcontainers LASTMODIFICATIONUSER admin;

DROP INTERFACE VIEW IF EXISTS i_bv_v_yardppcontainers CASCADE;

CREATE INTERFACE VIEW i_bv_v_yardppcontainers (
        container:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        visitcodein:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        carriernamein:text (sourcetypesize = '50', sourcetypeid = '12'),
        containers:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        reservationid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    SET IMPLEMENTATION bv_v_yardppcontainers
    FOLDER = '/mpet/01 - base_views';

ALTER VIEW i_bv_v_yardppcontainers
 LAYOUT (bv_v_yardppcontainers = [282, 97, 200, 126]);

DROP INTERFACE VIEW IF EXISTS i_bv_v_yardppreservations CASCADE;

CREATE INTERFACE VIEW i_bv_v_yardppreservations (
        reservationid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        visitcodein:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        tier:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        frombay:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        tobay:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'),
        remainingcont:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    SET IMPLEMENTATION bv_v_yardppreservations
    FOLDER = '/mpet/01 - base_views';

ALTER VIEW i_bv_v_yardppreservations
 LAYOUT (bv_v_yardppreservations = [468, 132, 204, 146]);

DROP VIEW IF EXISTS p_bv_v_yardppcontainers CASCADE;

CREATE VIEW p_bv_v_yardppcontainers FOLDER = '/mpet/01 - base_views' AS SELECT bv_v_yardppcontainers.container AS container, case WHEN (getsession('user') <> 'maarten') THEN bv_v_yardppcontainers.visitcodein ELSE len(bv_v_yardppcontainers.visitcodein) END AS visitcodein, bv_v_yardppcontainers.carriernamein AS carriernamein, bv_v_yardppcontainers.containers AS containers, bv_v_yardppcontainers.reservationid AS reservationid FROM bv_v_yardppcontainers;

CHOWN admin VIEW p_bv_v_yardppcontainers LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_ppcontainers CASCADE;

CREATE VIEW dv_01_ppcontainers FOLDER = '/mpet/02 - derived_views' AS SELECT container AS container, visitcodein AS visitcodein, reservationid AS reservationid, containers AS containers, carriernamein AS carriernamein, sum(containers) OVER ( PARTITION BY reservationid, visitcodein ORDER BY container ASC ) AS rt_cnt FROM i_bv_v_yardppcontainers GROUP BY visitcodein, reservationid, container, containers, carriernamein;

CHOWN admin VIEW dv_01_ppcontainers LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_ppcontainers
 LAYOUT (i_bv_v_yardppcontainers = [20, 20, 200, 105]);

DROP VIEW IF EXISTS dv_01_v_yardppreservations_1 CASCADE;

CREATE VIEW dv_01_v_yardppreservations_1 FOLDER = '/mpet/02 - derived_views' AS SELECT i_bv_v_yardppreservations.reservationid AS reservationid, i_bv_v_yardppreservations.visitcodein AS visitcodein, i_bv_v_yardppreservations.tier AS tier, i_bv_v_yardppreservations.frombay AS frombay, i_bv_v_yardppreservations.tobay AS tobay, i_bv_v_yardppreservations.remainingcont AS remainingcont, 0 AS isreservationexcess FROM i_bv_v_yardppreservations CONTEXT ('formatted' = 'yes');

CHOWN admin VIEW dv_01_v_yardppreservations_1 LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_v_yardppreservations_1
 LAYOUT (bv_v_yardppreservations = [20, 20, 204, 146]);

DROP VIEW IF EXISTS dv_01_v_yardppreservations_2 CASCADE;

CREATE VIEW dv_01_v_yardppreservations_2 FOLDER = '/mpet/02 - derived_views' AS SELECT i_bv_v_yardppreservations.reservationid AS reservationid, i_bv_v_yardppreservations.visitcodein AS visitcodein, i_bv_v_yardppreservations.tier AS tier, i_bv_v_yardppreservations.frombay AS frombay, i_bv_v_yardppreservations.tobay AS tobay, 999999 AS remainingcont, row_number() OVER ( PARTITION BY reservationid, visitcodein ORDER BY tier ASC,  frombay ASC ) AS r FROM i_bv_v_yardppreservations CONTEXT ('formatted' = 'yes');

CHOWN admin VIEW dv_01_v_yardppreservations_2 LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_v_yardppreservations_2
 LAYOUT (bv_v_yardppreservations = [20, 20, 204, 146]);

DROP VIEW IF EXISTS p_bv_v_yardppcontainers_j_bv_v_yardppreservations CASCADE;

CREATE VIEW p_bv_v_yardppcontainers_j_bv_v_yardppreservations FOLDER = '/mpet/01 - base_views' AS SELECT p_bv_v_yardppcontainers.container AS container, p_bv_v_yardppcontainers.visitcodein AS visitcodein, p_bv_v_yardppcontainers.carriernamein AS carriernamein, p_bv_v_yardppcontainers.containers AS containers, p_bv_v_yardppcontainers.reservationid AS reservationid, bv_v_yardppreservations.reservationid AS test_reservationid, bv_v_yardppreservations.visitcodein AS test_visitcodein, bv_v_yardppreservations.tier AS test_tier, bv_v_yardppreservations.frombay AS test_frombay, bv_v_yardppreservations.tobay AS test_tobay, bv_v_yardppreservations.remainingcont AS test_remainingcont FROM p_bv_v_yardppcontainers AS p_bv_v_yardppcontainers INNER JOIN bv_v_yardppreservations AS bv_v_yardppreservations ON p_bv_v_yardppcontainers.visitcodein = bv_v_yardppreservations.visitcodein ;

ALTER VIEW p_bv_v_yardppcontainers_j_bv_v_yardppreservations
 LAYOUT (p_bv_v_yardppcontainers = [20, 20, 200, 126], bv_v_yardppreservations = [250, 20, 200, 146]);

CHOWN maarten VIEW p_bv_v_yardppcontainers_j_bv_v_yardppreservations LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_02_v_yardppreservations_2 CASCADE;

CREATE VIEW dv_02_v_yardppreservations_2 FOLDER = '/mpet/02 - derived_views' AS SELECT dv_01_v_yardppreservations_2.reservationid AS reservationid, dv_01_v_yardppreservations_2.visitcodein AS visitcodein, dv_01_v_yardppreservations_2.tier AS tier, dv_01_v_yardppreservations_2.frombay AS frombay, dv_01_v_yardppreservations_2.tobay AS tobay, 999999 AS remainingcont, 1 AS isreservationexcess FROM dv_01_v_yardppreservations_2 WHERE r = 1;

CHOWN admin VIEW dv_02_v_yardppreservations_2 LASTMODIFICATIONUSER admin;

ALTER VIEW dv_02_v_yardppreservations_2
 LAYOUT (dv_01_v_yardppreservations_2 = [20, 20, 239, 166]);

DROP VIEW IF EXISTS dv_03_a CASCADE;

CREATE VIEW dv_03_a FOLDER = '/mpet/02 - derived_views' AS SELECT reservationid, visitcodein, tier, frombay, tobay, remainingcont, isreservationexcess FROM (SELECT * FROM dv_02_v_yardppreservations_2 UNION SELECT frombay, reservationid, visitcodein, tobay, remainingcont, tier, isreservationexcess FROM dv_01_v_yardppreservations_1);

ALTER VIEW dv_03_a
 LAYOUT (dv_02_v_yardppreservations_2 = [20, 20, 200, 166], dv_01_v_yardppreservations_1 = [250, 20, 200, 166]);

CHOWN admin VIEW dv_03_a LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_04_reservations CASCADE;

CREATE VIEW dv_04_reservations FOLDER = '/mpet/02 - derived_views' AS SELECT reservationid AS reservationid, visitcodein AS visitcodein, tier AS tier, frombay AS frombay, tobay AS tobay, remainingcont AS remainingcont, isreservationexcess AS isreservationexcess, sum(remainingcont) OVER ( PARTITION BY reservationid, visitcodein ORDER BY tier DESC,  frombay ASC,  isreservationexcess ASC ) AS rt_res FROM dv_03_a GROUP BY reservationid, visitcodein, tier, frombay, tobay, remainingcont, isreservationexcess;

CHOWN admin VIEW dv_04_reservations LASTMODIFICATIONUSER admin;

ALTER VIEW dv_04_reservations
 LAYOUT (dv_03_a = [20, 20, 200, 166]);

DROP VIEW IF EXISTS dv_05_a CASCADE;

CREATE VIEW dv_05_a FOLDER = '/mpet/02 - derived_views' AS SELECT dv_01_ppcontainers.container AS container, dv_04_reservations.tier AS tier, dv_04_reservations.frombay AS frombay, dv_04_reservations.tobay AS tobay, dv_04_reservations.visitcodein AS visitcodein, dv_01_ppcontainers.carriernamein AS carriernamein, dv_01_ppcontainers.containers AS containers, dv_04_reservations.reservationid AS reservationid, dv_04_reservations.isreservationexcess AS isreservationexcess, min(dv_04_reservations.remainingcont, ((dv_01_ppcontainers.containers-dv_01_ppcontainers.rt_cnt)+dv_04_reservations.rt_res), ((dv_04_reservations.remainingcont+dv_01_ppcontainers.rt_cnt)-dv_04_reservations.rt_res)) AS assign FROM dv_01_ppcontainers AS dv_01_ppcontainers CROSS JOIN dv_04_reservations AS dv_04_reservations WHERE (dv_01_ppcontainers.reservationid = dv_04_reservations.reservationid AND dv_01_ppcontainers.visitcodein = dv_04_reservations.visitcodein AND dv_01_ppcontainers.containers > 0 AND dv_04_reservations.remainingcont > 0) GROUP BY dv_01_ppcontainers.container, dv_04_reservations.tier, dv_04_reservations.frombay, dv_04_reservations.tobay, dv_04_reservations.visitcodein, dv_01_ppcontainers.carriernamein, dv_01_ppcontainers.containers, dv_04_reservations.reservationid, dv_04_reservations.isreservationexcess, dv_04_reservations.remainingcont, dv_01_ppcontainers.rt_cnt, dv_04_reservations.rt_res;

ALTER VIEW dv_05_a
 LAYOUT (dv_01_ppcontainers = [20, 20, 200, 146], dv_04_reservations = [250, 20, 200, 186]);

CHOWN admin VIEW dv_05_a LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_06_result CASCADE;

CREATE VIEW dv_06_result FOLDER = '/mpet/02 - derived_views' AS SELECT dv_05_a.container AS container, dv_05_a.tier AS tier, dv_05_a.frombay AS frombay, dv_05_a.tobay AS tobay, dv_05_a.visitcodein AS visitcodein, dv_05_a.containers AS containers, dv_05_a.reservationid AS reservationid, dv_05_a.isreservationexcess AS isreservationexcess FROM dv_05_a WHERE assign > 0;

CHOWN admin VIEW dv_06_result LASTMODIFICATIONUSER admin;

ALTER VIEW dv_06_result
 LAYOUT (dv_05_a = [20, 20, 200, 226]);

# #######################################
# ASSOCIATIONS of mpet_test
# #######################################
# No associations in database mpet_test
# #######################################
# WEBSERVICES of mpet_test
# #######################################
# No web services in database mpet_test
# #######################################
# WIDGETS of mpet_test
# #######################################
# No widgets in database mpet_test
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of mpet_test
# #######################################
# No deployed web services in database mpet_test
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of mpet_test
# #######################################
# No deployed widgets in database mpet_test
# #######################################
# Closing connection with database mpet_test
# #######################################
CLOSE;


# 7 ====================================================================

# #######################################
# DATABASE of orders
# #######################################
DROP DATABASE IF EXISTS orders;

CREATE DATABASE orders '';

CONNECT DATABASE orders;

# #######################################
# FOLDERS of orders
# #######################################
CREATE OR REPLACE FOLDER '/001 - Connectivity Layer' ;

CHOWN admin FOLDER '/001 - Connectivity Layer';

CREATE OR REPLACE FOLDER '/001 - connectivity layer/01 - Data Sources' ;

CHOWN admin FOLDER '/001 - connectivity layer/01 - Data Sources';

CREATE OR REPLACE FOLDER '/001 - connectivity layer/02 - Base Views' ;

CHOWN admin FOLDER '/001 - connectivity layer/02 - Base Views';

CREATE OR REPLACE FOLDER '/002 - Integration Layer' ;

CHOWN admin FOLDER '/002 - Integration Layer';

CREATE OR REPLACE FOLDER '/003 - Business Enities Layer' ;

CHOWN admin FOLDER '/003 - Business Enities Layer';

CREATE OR REPLACE FOLDER '/004 - Application Layer' ;

CHOWN admin FOLDER '/004 - Application Layer';

CREATE OR REPLACE FOLDER '/005 - Web Services Layer' ;

CHOWN admin FOLDER '/005 - Web Services Layer';

# #######################################
# LISTENERS JMS of orders
# #######################################
# No listeners jms in database orders
# #######################################
# DATASOURCES of orders
# #######################################
DROP DATASOURCE JDBC IF EXISTS ds_sqlexpress CASCADE;

CREATE DATASOURCE JDBC ds_sqlexpress
    FOLDER = '/001 - connectivity layer/01 - data sources'
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=testdb'
    USERNAME = 'admin'
    USERPASSWORD = 'Ysbjic0EA6Lztba3ec1ZZHen0adJbNb0MoWnzRSr3NAaRHKLe2O6RjZTIvFYj+BWPg0hGcJ/DJEJMoi5eIdClJ+/uyLIVrbdEcJvLTmG6jbmHlaBRtvmWgmqKn87i5Fi' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, firstdayofweek, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, lastdayofweek, len, ln, log, lower, ltrim, mod, mult, nextweekday, now, nullif, pi, position, pow, power, previousweekday, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date(literal), to_localdate(literal), to_time(literal), to_timestamp(literal), to_timestamptz(literal), trim, trunc, upper, xmlquery, xpath)
    );

CHOWN admin DATASOURCE JDBC ds_sqlexpress LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE orders
  CHARSET DEFAULT;

ALTER DATABASE orders
  VCS ON (
    REMOTEDB = orders
  );

# #######################################
# WRAPPERS of orders
# #######################################
DROP WRAPPER JDBC IF EXISTS bv_sqls_customer CASCADE;

CREATE WRAPPER JDBC bv_sqls_customer
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Customer' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        firstname = 'FirstName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        lastname = 'LastName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        city = 'City' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        country = 'Country' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        phone = 'Phone' :'java.lang.String' (OPT) (sourcetypesize='20', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE
    )
    CONSTRAINT 'PK_CUSTOMER' PRIMARY KEY ( 'Id' )
    INDEX 'PK_CUSTOMER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexCustomerName' OTHER ( 'LastName' , 'FirstName' );

CHOWN admin WRAPPER JDBC bv_sqls_customer LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_order CASCADE;

CREATE WRAPPER JDBC bv_sqls_order
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Order' ESCAPE
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        orderdate = 'OrderDate' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  NOT NULL SORTABLE,
        ordernumber = 'OrderNumber' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        customerid = 'CustomerId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        totalamount = 'TotalAmount' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  SORTABLE
    )
    CONSTRAINT 'PK_ORDER' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_ORDER_REFERENCE_CUSTOMER' FOREIGN KEY ( 'CustomerId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Customer'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_ORDER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexOrderCustomerId' OTHER ( 'CustomerId' )
    INDEX 'IndexOrderOrderDate' OTHER ( 'OrderDate' );

CHOWN admin WRAPPER JDBC bv_sqls_order LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_orderitem CASCADE;

CREATE WRAPPER JDBC bv_sqls_orderitem
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='OrderItem' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        orderid = 'OrderId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        productid = 'ProductId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        unitprice = 'UnitPrice' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  NOT NULL SORTABLE,
        quantity = 'Quantity' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PK_ORDERITEM' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_ORDERITE_REFERENCE_ORDER' FOREIGN KEY ( 'OrderId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Order'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    CONSTRAINT 'FK_ORDERITE_REFERENCE_PRODUCT' FOREIGN KEY ( 'ProductId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Product'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_ORDERITEM' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexOrderItemOrderId' OTHER ( 'OrderId' )
    INDEX 'IndexOrderItemProductId' OTHER ( 'ProductId' );

CHOWN admin WRAPPER JDBC bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_product CASCADE;

CREATE WRAPPER JDBC bv_sqls_product
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Product' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        productname = 'ProductName' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        supplierid = 'SupplierId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  NOT NULL SORTABLE,
        unitprice = 'UnitPrice' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='12', sourcetypeid='3', sourcetypename='decimal')  SORTABLE,
        package = 'Package' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        isdiscontinued = 'IsDiscontinued' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  NOT NULL SORTABLE
    )
    CONSTRAINT 'PK_PRODUCT' PRIMARY KEY ( 'Id' )
    CONSTRAINT 'FK_PRODUCT_REFERENCE_SUPPLIER' FOREIGN KEY ( 'SupplierId' ) 
    REFERENCES 'demo_7_v2'.'dbo'.'Supplier'( 'Id' )  ON UPDATE RESTRICT  ON DELETE RESTRICT NOT DEFERRABLE 
    INDEX 'PK_PRODUCT' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexProductName' OTHER ( 'ProductName' )
    INDEX 'IndexProductSupplierId' OTHER ( 'SupplierId' );

CHOWN admin WRAPPER JDBC bv_sqls_product LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_randomdata CASCADE;

CREATE WRAPPER JDBC bv_sqls_randomdata
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='RandomData' 
    OUTPUTSCHEMA (
        rowid = 'RowId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        someint = 'SomeInt' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        somebit = 'SomeBit' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  SORTABLE,
        somevarchar = 'SomeVarchar' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        somedatetime = 'SomeDateTime' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        somenumeric = 'SomeNumeric' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='16', sourcetypeid='2', sourcetypename='numeric')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_sqls_randomdata LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_randomdata_big CASCADE;

CREATE WRAPPER JDBC bv_sqls_randomdata_big
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='RandomData_big' 
    OUTPUTSCHEMA (
        rowid = 'RowId' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        someint = 'SomeInt' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        somebit = 'SomeBit' :'java.lang.Boolean' (OPT) (sourcetypesize='1', sourcetypeid='-7', sourcetypename='bit')  SORTABLE,
        somevarchar = 'SomeVarchar' :'java.lang.String' (OPT) (sourcetypesize='10', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        somedatetime = 'SomeDateTime' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        somenumeric = 'SomeNumeric' :'java.math.BigDecimal' (OPT) (sourcetypedecimals='2', sourcetyperadix='10', sourcetypesize='16', sourcetypeid='2', sourcetypename='numeric')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_sqls_randomdata_big LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_sqls_supplier CASCADE;

CREATE WRAPPER JDBC bv_sqls_supplier
    FOLDER = '/001 - connectivity layer/02 - base views'
    DATASOURCENAME=ds_sqlexpress
    CATALOGNAME='demo_7_v2' 
    SCHEMANAME='dbo' 
    RELATIONNAME='Supplier' 
    OUTPUTSCHEMA (
        id = 'Id' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int identity')  NOT NULL NOT SORTABLE IS_AUTOINCREMENT,
        companyname = 'CompanyName' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  NOT NULL SORTABLE,
        contactname = 'ContactName' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        contacttitle = 'ContactTitle' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        city = 'City' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        country = 'Country' :'java.lang.String' (OPT) (sourcetypesize='40', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        phone = 'Phone' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE,
        fax = 'Fax' :'java.lang.String' (OPT) (sourcetypesize='30', sourcetypeid='-9', sourcetypename='nvarchar')  SORTABLE
    )
    CONSTRAINT 'PK_SUPPLIER' PRIMARY KEY ( 'Id' )
    INDEX 'PK_SUPPLIER' CLUSTER UNIQUE PRIMARY ( 'Id' )
    INDEX 'IndexSupplierCountry' OTHER ( 'Country' )
    INDEX 'IndexSupplierName' OTHER ( 'CompanyName' );

CHOWN admin WRAPPER JDBC bv_sqls_supplier LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of orders
# #######################################
# No stored procedures in database orders
# #######################################
# TYPES of orders
# #######################################
# No types in database orders
# #######################################
# MAPS of orders
# #######################################
# No maps in database orders
# #######################################
# BASE VIEWS of orders
# #######################################
DROP VIEW IF EXISTS bv_sqls_customer CASCADE;

CREATE TABLE bv_sqls_customer I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        firstname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        lastname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        city:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        country:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        phone:text (sourcetypesize = '20', sourcetypeid = '-9')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CONSTRAINT 'PK_CUSTOMER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_customer(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD firstname (any) OPT ANY
             ADD lastname (any) OPT ANY
             ADD city (any) OPT ANY
             ADD country (any) OPT ANY
             ADD phone (any) OPT ANY
        )
        OUTPUTLIST (city, country, firstname, id, lastname, phone
        )
        WRAPPER (jdbc bv_sqls_customer)
    );

CHOWN admin VIEW bv_sqls_customer LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_order CASCADE;

CREATE TABLE bv_sqls_order I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        orderdate:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        ordernumber:text (sourcetypesize = '10', sourcetypeid = '-9'), 
        customerid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        totalamount:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CONSTRAINT 'PK_ORDER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_order(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD orderdate (any) OPT ANY
             ADD ordernumber (any) OPT ANY
             ADD customerid (any) OPT ANY
             ADD totalamount (any) OPT ANY
        )
        OUTPUTLIST (customerid, id, orderdate, ordernumber, totalamount
        )
        WRAPPER (jdbc bv_sqls_order)
    );

CHOWN admin VIEW bv_sqls_order LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_orderitem CASCADE;

CREATE TABLE bv_sqls_orderitem I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        orderid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        productid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        unitprice:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3'), 
        quantity:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CONSTRAINT 'PK_ORDERITEM' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_orderitem(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD orderid (any) OPT ANY
             ADD productid (any) OPT ANY
             ADD unitprice (any) OPT ANY
             ADD quantity (any) OPT ANY
        )
        OUTPUTLIST (id, orderid, productid, quantity, unitprice
        )
        WRAPPER (jdbc bv_sqls_orderitem)
    );

CHOWN admin VIEW bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_product CASCADE;

CREATE TABLE bv_sqls_product I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        productname:text (sourcetypesize = '50', sourcetypeid = '-9'), 
        supplierid:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        unitprice:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '12', sourcetypeid = '3'), 
        package:text (sourcetypesize = '30', sourcetypeid = '-9'), 
        isdiscontinued:boolean (sourcetypesize = '1', sourcetypeid = '-7')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CONSTRAINT 'PK_PRODUCT' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_product(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD productname (any) OPT ANY
             ADD supplierid (any) OPT ANY
             ADD unitprice (any) OPT ANY
             ADD package (any) OPT ANY
             ADD isdiscontinued (any) OPT ANY
        )
        OUTPUTLIST (id, isdiscontinued, package, productname, supplierid, unitprice
        )
        WRAPPER (jdbc bv_sqls_product)
    );

CHOWN admin VIEW bv_sqls_product LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_randomdata CASCADE;

CREATE TABLE bv_sqls_randomdata I18N be_euro (
        rowid:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        someint:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        somebit:boolean (sourcetypesize = '1', sourcetypeid = '-7'), 
        somevarchar:text (sourcetypesize = '10', sourcetypeid = '12'), 
        somedatetime:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        somenumeric:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '16', sourcetypeid = '2')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_randomdata(
        I18N be_euro
        CONSTRAINTS (
             ADD rowid (any) OPT ANY
             ADD someint (any) OPT ANY
             ADD somebit (any) OPT ANY
             ADD somevarchar (any) OPT ANY
             ADD somedatetime (any) OPT ANY
             ADD somenumeric (any) OPT ANY
        )
        OUTPUTLIST (rowid, somebit, somedatetime, someint, somenumeric, somevarchar
        )
        WRAPPER (jdbc bv_sqls_randomdata)
    );

CHOWN admin VIEW bv_sqls_randomdata LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_randomdata_big CASCADE;

CREATE TABLE bv_sqls_randomdata_big I18N be_euro (
        rowid:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        someint:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        somebit:boolean (sourcetypesize = '1', sourcetypeid = '-7'), 
        somevarchar:text (sourcetypesize = '10', sourcetypeid = '12'), 
        somedatetime:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        somenumeric:decimal (sourcetypedecimals = '2', sourcetyperadix = '10', sourcetypesize = '16', sourcetypeid = '2')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_randomdata_big(
        I18N be_euro
        CONSTRAINTS (
             ADD rowid (any) OPT ANY
             ADD someint (any) OPT ANY
             ADD somebit (any) OPT ANY
             ADD somevarchar (any) OPT ANY
             ADD somedatetime (any) OPT ANY
             ADD somenumeric (any) OPT ANY
        )
        OUTPUTLIST (rowid, somebit, somedatetime, someint, somenumeric, somevarchar
        )
        WRAPPER (jdbc bv_sqls_randomdata_big)
    );

CHOWN admin VIEW bv_sqls_randomdata_big LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_sqls_supplier CASCADE;

CREATE TABLE bv_sqls_supplier I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', autoincrement, sourcetypesize = '10', sourcetypeid = '4'), 
        companyname:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        contactname:text (sourcetypesize = '50', sourcetypeid = '-9'), 
        contacttitle:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        city:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        country:text (sourcetypesize = '40', sourcetypeid = '-9'), 
        phone:text (sourcetypesize = '30', sourcetypeid = '-9'), 
        fax:text (sourcetypesize = '30', sourcetypeid = '-9')
    )
    FOLDER = '/001 - connectivity layer/02 - base views'
    CONSTRAINT 'PK_SUPPLIER' PRIMARY KEY ( 'id' )
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sqls_supplier(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD companyname (any) OPT ANY
             ADD contactname (any) OPT ANY
             ADD contacttitle (any) OPT ANY
             ADD city (any) OPT ANY
             ADD country (any) OPT ANY
             ADD phone (any) OPT ANY
             ADD fax (any) OPT ANY
        )
        OUTPUTLIST (city, companyname, contactname, contacttitle, country, fax, id, phone
        )
        WRAPPER (jdbc bv_sqls_supplier)
    );

CHOWN admin VIEW bv_sqls_supplier LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of orders
# #######################################
DROP VIEW IF EXISTS iv_01_order_model CASCADE;

CREATE VIEW iv_01_order_model FOLDER = '/002 - integration layer' AS SELECT bv_sqls_orderitem.id AS id, bv_sqls_product.productname AS productname, bv_sqls_product.package AS package, bv_sqls_product.isdiscontinued AS isdiscontinued, bv_sqls_orderitem.unitprice AS orderitem_unitprice, bv_sqls_orderitem.quantity AS quantity, (bv_sqls_orderitem.unitprice*bv_sqls_orderitem.quantity) AS total_price, bv_sqls_supplier.companyname AS companyname, bv_sqls_supplier.contactname AS contactname, bv_sqls_supplier.contacttitle AS contacttitle, bv_sqls_supplier.city AS supplier_city, bv_sqls_supplier.country AS supplier_country, bv_sqls_supplier.phone AS supplier_phone, bv_sqls_supplier.fax AS supplier_fax, addyear(bv_sqls_order.orderdate, 5) AS orderdate, bv_sqls_order.ordernumber AS ordernumber, bv_sqls_order.totalamount AS totalamount, bv_sqls_customer.firstname AS customer_firstname, bv_sqls_customer.lastname AS customer_lastname, bv_sqls_customer.city AS customer_city, bv_sqls_customer.country AS customer_country, bv_sqls_customer.phone AS customer_phone FROM ((bv_sqls_orderitem AS bv_sqls_orderitem INNER JOIN (bv_sqls_order AS bv_sqls_order INNER JOIN bv_sqls_customer AS bv_sqls_customer ON bv_sqls_order.customerid = bv_sqls_customer.id ) ON bv_sqls_orderitem.orderid = bv_sqls_order.id ) INNER JOIN bv_sqls_product AS bv_sqls_product ON bv_sqls_orderitem.productid = bv_sqls_product.id ) INNER JOIN bv_sqls_supplier AS bv_sqls_supplier ON bv_sqls_product.supplierid = bv_sqls_supplier.id ;

CHOWN admin VIEW iv_01_order_model LASTMODIFICATIONUSER admin;

# #######################################
# ASSOCIATIONS of orders
# #######################################
DROP ASSOCIATION IF EXISTS bv_sqls_customer_bv_sqls_order;

CREATE ASSOCIATION bv_sqls_customer_bv_sqls_order REFERENTIAL CONSTRAINT 
FOLDER = '/001 - connectivity layer/02 - base views'
    ENDPOINT bv_sqls_order bv_sqls_customer PRINCIPAL (0,1)
    ENDPOINT bv_sqls_customer bv_sqls_order (0,*)
    ADD MAPPING id=customerid;

CHOWN admin ASSOCIATION bv_sqls_customer_bv_sqls_order LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_order_bv_sqls_orderitem;

CREATE ASSOCIATION bv_sqls_order_bv_sqls_orderitem REFERENTIAL CONSTRAINT 
FOLDER = '/001 - connectivity layer/02 - base views'
    ENDPOINT bv_sqls_orderitem bv_sqls_order PRINCIPAL (0,1)
    ENDPOINT bv_sqls_order bv_sqls_orderitem (0,*)
    ADD MAPPING id=orderid;

CHOWN admin ASSOCIATION bv_sqls_order_bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_product_bv_sqls_orderitem;

CREATE ASSOCIATION bv_sqls_product_bv_sqls_orderitem REFERENTIAL CONSTRAINT 
FOLDER = '/001 - connectivity layer/02 - base views'
    ENDPOINT bv_sqls_orderitem bv_sqls_product PRINCIPAL (0,1)
    ENDPOINT bv_sqls_product bv_sqls_orderitem (0,*)
    ADD MAPPING id=productid;

CHOWN admin ASSOCIATION bv_sqls_product_bv_sqls_orderitem LASTMODIFICATIONUSER admin;

DROP ASSOCIATION IF EXISTS bv_sqls_supplier_bv_sqls_product;

CREATE ASSOCIATION bv_sqls_supplier_bv_sqls_product REFERENTIAL CONSTRAINT 
FOLDER = '/001 - connectivity layer/02 - base views'
    ENDPOINT bv_sqls_product bv_sqls_supplier PRINCIPAL (0,1)
    ENDPOINT bv_sqls_supplier bv_sqls_product (0,*)
    ADD MAPPING id=supplierid;

CHOWN admin ASSOCIATION bv_sqls_supplier_bv_sqls_product LASTMODIFICATIONUSER admin;

# #######################################
# WEBSERVICES of orders
# #######################################
# No web services in database orders
# #######################################
# WIDGETS of orders
# #######################################
# No widgets in database orders
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of orders
# #######################################
# No deployed web services in database orders
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of orders
# #######################################
# No deployed widgets in database orders
# #######################################
# Closing connection with database orders
# #######################################
CLOSE;


# 8 ====================================================================

# #######################################
# DATABASE of sandbox
# #######################################
DROP DATABASE IF EXISTS sandbox;

CREATE DATABASE sandbox '';

CONNECT DATABASE sandbox;

# #######################################
# LISTENERS JMS of sandbox
# #######################################
# No listeners jms in database sandbox
# #######################################
# DATASOURCES of sandbox
# #######################################
# No data sources in database sandbox
# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE sandbox
  CHARSET DEFAULT;

# #######################################
# WRAPPERS of sandbox
# #######################################
# No wrappers in database sandbox
# #######################################
# STORED PROCEDURES of sandbox
# #######################################
# No stored procedures in database sandbox
# #######################################
# TYPES of sandbox
# #######################################
# No types in database sandbox
# #######################################
# MAPS of sandbox
# #######################################
# No maps in database sandbox
# #######################################
# BASE VIEWS of sandbox
# #######################################
# No base views in database sandbox
# #######################################
# VIEWS of sandbox
# #######################################
# No views in database sandbox
# #######################################
# ASSOCIATIONS of sandbox
# #######################################
# No associations in database sandbox
# #######################################
# WEBSERVICES of sandbox
# #######################################
# No web services in database sandbox
# #######################################
# WIDGETS of sandbox
# #######################################
# No widgets in database sandbox
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of sandbox
# #######################################
# No deployed web services in database sandbox
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of sandbox
# #######################################
# No deployed widgets in database sandbox
# #######################################
# Closing connection with database sandbox
# #######################################
CLOSE;


# 9 ====================================================================

# #######################################
# DATABASE of test_db
# #######################################
DROP DATABASE IF EXISTS test_db;

CREATE DATABASE test_db '';

CONNECT DATABASE test_db;

# #######################################
# FOLDERS of test_db
# #######################################
CREATE OR REPLACE FOLDER '/01 - Connectivity_Layer' ;

CHOWN admin FOLDER '/01 - Connectivity_Layer';

CREATE OR REPLACE FOLDER '/01 - connectivity_layer/01 - Data_sources' ;

CHOWN admin FOLDER '/01 - connectivity_layer/01 - Data_sources';

CREATE OR REPLACE FOLDER '/01 - connectivity_layer/02 - Base_views' ;

CHOWN admin FOLDER '/01 - connectivity_layer/02 - Base_views';

CREATE OR REPLACE FOLDER '/01 - Data sources' ;

CHOWN admin FOLDER '/01 - Data sources';

CREATE OR REPLACE FOLDER '/02 - Base views' ;

CHOWN admin FOLDER '/02 - Base views';

CREATE OR REPLACE FOLDER '/02 - base views/Coreact' ;

CHOWN admin FOLDER '/02 - base views/Coreact';

CREATE OR REPLACE FOLDER '/02 - Integration_Layer' ;

CHOWN admin FOLDER '/02 - Integration_Layer';

CREATE OR REPLACE FOLDER '/03 - Business_Entities_Layer' ;

CHOWN admin FOLDER '/03 - Business_Entities_Layer';

CREATE OR REPLACE FOLDER '/03 - Derived views' ;

CHOWN admin FOLDER '/03 - Derived views';

CREATE OR REPLACE FOLDER '/03 - derived views/01 - Projections' ;

CHOWN admin FOLDER '/03 - derived views/01 - Projections';

CREATE OR REPLACE FOLDER '/03 - derived views/01 - projections/Coreact' ;

CHOWN admin FOLDER '/03 - derived views/01 - projections/Coreact';

CREATE OR REPLACE FOLDER '/04 - Application_Layer' ;

CHOWN admin FOLDER '/04 - Application_Layer';

CREATE OR REPLACE FOLDER '/05 - Web_Services_Layer' ;

CHOWN admin FOLDER '/05 - Web_Services_Layer';

# #######################################
# LISTENERS JMS of test_db
# #######################################
# No listeners jms in database test_db
# #######################################
# DATASOURCES of test_db
# #######################################
DROP DATASOURCE CUSTOM IF EXISTS ds_map1 CASCADE;

CREATE DATASOURCE CUSTOM ds_map1
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CLASSNAME='com.denodo.vdb.contrib.wrapper.xls.ExcelWrapper';

CHOWN admin DATASOURCE CUSTOM ds_map1 LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS ds_map2 CASCADE;

CREATE DATASOURCE CUSTOM ds_map2
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CLASSNAME='com.denodo.vdb.contrib.wrapper.xls.ExcelWrapper';

CHOWN admin DATASOURCE CUSTOM ds_map2 LASTMODIFICATIONUSER admin;

DROP DATASOURCE CUSTOM IF EXISTS ds_sharepoint CASCADE;

CREATE DATASOURCE CUSTOM ds_sharepoint
    FOLDER = '/01 - data sources'
    CLASSNAME='com.denodo.connect.odata.wrapper.ODataWrapper'
    JARS 'denodo-odata2-wrapper-7.0';

CHOWN admin DATASOURCE CUSTOM ds_sharepoint LASTMODIFICATIONUSER admin;

DROP DATASOURCE JDBC IF EXISTS sqlexpress CASCADE;

CREATE DATASOURCE JDBC sqlexpress
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DRIVERCLASSNAME = 'com.microsoft.sqlserver.jdbc.SQLServerDriver'
    DATABASEURI = 'jdbc:sqlserver://localhost\sqlexpress;databaseName=testdb'
    USERNAME = 'admin'
    USERPASSWORD = 'Ysbjic0EA6Lztba3ec1ZZHen0adJbNb0MoWnzRSr3NAaRHKLe2O6RjZTIvFYj+BWPg0hGcJ/DJEJMoi5eIdClJ+/uyLIVrbdEcJvLTmG6jbmHlaBRtvmWgmqKn87i5Fi' ENCRYPTED
    CLASSPATH = 'mssql-jdbc-6.x'
    DATABASENAME = 'sqlserver'
    DATABASEVERSION = '2016'
    FETCHSIZE = 1000
    VALIDATIONQUERY = 'Select 1'
    INITIALSIZE = 4
    MAXIDLE = -1
    MINIDLE = 0
    MAXACTIVE = 20
    EXHAUSTEDACTION = 1
    TESTONBORROW = true
    TESTONRETURN = false
    TESTWHILEIDLE = false
    TIMEBETWEENEVICTION = -1
    NUMTESTPEREVICTION = 3
    MINEVICTABLETIME = 1800000
    POOLPREPAREDSTATEMENTS = false
    MAXSLEEPINGPS = 4
    INITIALCAPACITYPS = 8
    DATA_LOAD_CONFIGURATION (
        BATCHINSERTSIZE = 1000
    )
    SOURCECONFIGURATION (
        delegateprojectsubquery = false,
        delegatescalarfunctionslist = (abs, acos, addday, addhour, addminute, addmonth, addsecond, addweek, addyear, ascii, asin, atan, atan2, case, cast, ceil, char, coalesce, concat, cos, cot, current_date, degrees, div, exp, firstdayofmonth, firstdayofweek, floor, formatdate, getday, getdayofweek, getdayofyear, getdaysbetween, gethour, getmillisecond, getminute, getmonth, getmonthsbetween, getsecond, gettimeinmillis, getyear, instr, lastdayofmonth, lastdayofweek, len, ln, log, lower, ltrim, mod, mult, nextweekday, now, nullif, pi, position, pow, power, previousweekday, radians, rand, removeaccents, repeat, replace, round, rtrim, sign, sin, sqrt, substr, substring, subtract, sum, tan, textcat, textconstant, to_date(literal), to_localdate(literal), to_time(literal), to_timestamp(literal), to_timestamptz(literal), trim, trunc, upper, xmlquery, xpath)
    );

CHOWN admin DATASOURCE JDBC sqlexpress LASTMODIFICATIONUSER admin;

DROP DATASOURCE XML IF EXISTS ds_xml_kiidoc_copy CASCADE;

CREATE DATASOURCE XML ds_xml_kiidoc_copy
    FOLDER = '/01 - data sources'
    ROUTE HTTP 'http.CommonsHttpClientConnection,120000' GET 'https://doreme.ip.is.echonet/APP%20Library/HORUS/99%20-%20Archive/@filename'
    AUTHENTICATION NTLM ( 
      USER 'b36170'
      PASSWORD 'xrwIm2Q86caBroab0KeTbKhHenrRajMm/6JRxvCvQISllO+bwT4fTwjDYeztobglLf0nQP4s35p0NjYYua9v0toob2mVg3SI7QaIRS/KHXlv1oT+cKjHGUyfG9msyRQ5' ENCRYPTED
      DOMAIN 'adroot' )
    PROXY OFF
    DESCRIPTION = 'test';

CHOWN admin DATASOURCE XML ds_xml_kiidoc_copy LASTMODIFICATIONUSER admin;

# #######################################
# DATABASE CONFIGURATION
# #######################################
ALTER DATABASE test_db
  CHARSET DEFAULT;

ALTER DATABASE test_db
  VCS ON (
    REMOTEDB = test_db
  );

# #######################################
# WRAPPERS of test_db
# #######################################
DROP WRAPPER CUSTOM IF EXISTS bv_sharepoint CASCADE;

CREATE WRAPPER CUSTOM bv_sharepoint
    FOLDER = '/02 - base views/coreact'
    DATASOURCENAME=ds_sharepoint
    PARAMETERS (
      'Service Endpoint *' = 'https://doreme.ip.is.echonet/_vti_bin/ListData.svc',
      'Entity Collection *' = 'APPLibrary',
      'Service Format *' = 'XML-Atom',
      'Service Version' = 'V2',
      'Expand Related Entities' = false,
      'Use NTLM Authentication' = true,
      'Enable Pagination' = false,
      'User' = 'b36170',
      'Password' = 'NFE8piq/TPGjAA7loSKxyOSo8JyDAXH11K3ccE4KAvAaq8WUDsI8pfQPLmpg2dvFnLw7ObVOrLvLNcyL9a1cb1hKbRRrPFAUvmFSwikDESOck++8dLRLs7HgYjB5e9vn' ENCRYPTED,
      'NTLM Domain' = 'adroot'
    )
    OUTPUTSCHEMA (
        "ContentTypeID" = 'ContentTypeID' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ApproverComments" = 'ApproverComments' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Name" = 'Name' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Title" = 'Title' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "DocumentIDValue" = 'DocumentIDValue' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "DocumentID" = 'DocumentID' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ApprovalStatus" = 'ApprovalStatus' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "ActivityTypeId" = 'ActivityTypeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "DocumentTypeId" = 'DocumentTypeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "ITLanguageValue" = 'ITLanguageValue' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "APPCodeId" = 'APPCodeId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Description" = 'Description' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Manager1Id" = 'Manager1Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Manager2Id" = 'Manager2Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "URL" = 'URL' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Approval" = 'Approval' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Id" = 'Id' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  NOT NULL SORTABLE,
        "ContentType" = 'ContentType' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Created" = 'Created' : 'java.sql.Timestamp' (OPT) (sourcetypeid='93')  SORTABLE,
        "CreatedById" = 'CreatedById' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Modified" = 'Modified' : 'java.sql.Timestamp' (OPT) (sourcetypeid='93')  SORTABLE,
        "ModifiedById" = 'ModifiedById' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "CopySource" = 'CopySource' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "Path" = 'Path' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "CheckedOutToId" = 'CheckedOutToId' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "VirusStatus" = 'VirusStatus' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE,
        "IsCurrentVersion" = 'IsCurrentVersion' : 'java.lang.Boolean' (OPT) (sourcetypeid='16')  SORTABLE,
        "Owshiddenversion" = 'Owshiddenversion' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        "Version" = 'Version' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM bv_sharepoint LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS ds_map1 CASCADE;

CREATE WRAPPER CUSTOM ds_map1
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DATASOURCENAME=ds_map1
    PARAMETERS (
      'Type of file' = 'Excel 2007 or later (*.xlsx)',
      'File location' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo Test/Map1.xlsx',
      'Extract data from all sheets' = true,
      'Extract sheet name as a new column' = false,
      'Has headers' = false,
      'Stream tuples' = true
    )
    OUTPUTSCHEMA (
        column_0 = 'Column_0' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        column_1 = 'Column_1' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM ds_map1 LASTMODIFICATIONUSER admin;

DROP WRAPPER CUSTOM IF EXISTS ds_map2 CASCADE;

CREATE WRAPPER CUSTOM ds_map2
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    DATASOURCENAME=ds_map2
    PARAMETERS (
      'Type of file' = 'Excel 2007 or later (*.xlsx)',
      'File location' = ROUTE LOCAL 'LocalConnection' 'C:/Users/mno/Documents/000-DROPBOX/Denodo Test/Map2.xlsx',
      'Extract data from all sheets' = true,
      'Extract sheet name as a new column' = false,
      'Has headers' = false,
      'Stream tuples' = true
    )
    OUTPUTSCHEMA (
        column_0 = 'Column_0' : 'java.lang.Integer' (OPT) (sourcetypeid='4')  SORTABLE,
        column_1 = 'Column_1' : 'java.lang.String' (OPT) (sourcetypeid='12')  SORTABLE
    );

CHOWN admin WRAPPER CUSTOM ds_map2 LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_table_historical CASCADE;

CREATE WRAPPER JDBC bv_table_historical
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_Historical' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_table_historical LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS bv_table_operational CASCADE;

CREATE WRAPPER JDBC bv_table_operational
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_Operational' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypedecimals='0', sourcetyperadix='10', sourcetypesize='10', sourcetypeid='4', sourcetypename='int')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypedecimals='3', sourcetypesize='23', sourcetypeid='93', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC bv_table_operational LASTMODIFICATIONUSER admin;

DROP WRAPPER JDBC IF EXISTS sqlexpress_bv_table_historical CASCADE;

CREATE WRAPPER JDBC sqlexpress_bv_table_historical
    DATASOURCENAME=sqlexpress
    CATALOGNAME='testdb' 
    SCHEMANAME='dbo' 
    RELATIONNAME='table_test' 
    OUTPUTSCHEMA (
        id = 'ID' :'java.lang.Integer' (OPT) (sourcetypesize='10', sourcetypeid='4', sourcetypedecimals='0', sourcetypename='int', sourcetyperadix='10')  SORTABLE,
        datum = 'datum' :'java.time.LocalDateTime' (OPT) (sourcetypesize='23', sourcetypeid='93', sourcetypedecimals='3', sourcetypename='datetime')  SORTABLE,
        description = 'description' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE,
        column_added = 'column_added' :'java.lang.String' (OPT) (sourcetypesize='50', sourcetypeid='12', sourcetypename='varchar')  SORTABLE
    );

CHOWN admin WRAPPER JDBC sqlexpress_bv_table_historical LASTMODIFICATIONUSER admin;

DROP WRAPPER XML IF EXISTS ds_xml_kiidoc_copy CASCADE;

CREATE WRAPPER XML ds_xml_kiidoc_copy
    FOLDER = '/02 - base views/coreact'
    DATASOURCENAME=ds_xml_kiidoc_copy
    TUPLEROOT 'DOCUMENT'
    OUTPUTSCHEMA ("DOCUMENT" = 'DOCUMENT' : REGISTER OF (
        "FILENAME" = 'FILENAME' : 'java.lang.String' (OBL) (DEFAULTVALUE='KIIDOC-2017-11-08-fr-FR_LU-2017-11-08-FR0013041530.xml') EXTERN,
        "PROPERTIES" = 'PROPERTIES' : REGISTER OF (
            "ID" = 'ID' : 'java.lang.Integer',
            "PROJECT_ID" = 'PROJECT_ID' : 'java.lang.Short',
            "NAME" = 'NAME' : 'java.lang.String',
            "ISIN" = 'ISIN' : 'java.lang.String',
            "FILE_NAME" = 'FILE_NAME' : 'java.lang.String',
            "LANGUAGE_CODE" = 'LANGUAGE_CODE' : 'java.lang.String',
            "VALID_FROM" = 'VALID_FROM' : 'java.lang.String',
            "CREATION_DATE" = 'CREATION_DATE' : 'java.lang.String',
            "COUNTRIES" = 'COUNTRIES' : REGISTER OF (
                "COUNTRY" = 'COUNTRY' : ARRAY OF (
                    "register_COUNTRY" = 'COUNTRY' : REGISTER OF (
                        "COUNTRY" = 'COUNTRY' : 'java.lang.String'
                    )
                )
            )
        ),
        "HIERARCHY" = 'HIERARCHY' : REGISTER OF (
            "SPONSOR" = 'SPONSOR' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.String',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "FUND" = 'FUND' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "SUB_FOND" = 'SUB_FOND' : REGISTER OF (
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            ),
            "SHARE_CLASS" = 'SHARE_CLASS' : REGISTER OF (
                "ISIN" = 'ISIN' : 'java.lang.String',
                "CODE" = 'CODE' : 'java.lang.Short',
                "NAME" = 'NAME' : 'java.lang.String'
            )
        ),
        "CONDITIONS" = 'CONDITIONS' : REGISTER OF (
            "CONDITION" = 'CONDITION' : ARRAY OF (
                "CONDITION" = 'CONDITION' : REGISTER OF (
                    "CODE" = '#CODE' : 'java.lang.String',
                    "RESULT" = '#RESULT' : 'java.lang.Boolean',
                    "CONDITION" = 'CONDITION' : 'java.lang.String'
                )
            )
        ),
        "CATEGORIES" = 'CATEGORIES' : REGISTER OF (
            "CATEGORY" = 'CATEGORY' : ARRAY OF (
                "CATEGORY" = 'CATEGORY' : REGISTER OF (
                    "CODE" = '#CODE' : 'java.lang.String',
                    "INFORMATIONS" = 'INFORMATIONS' : REGISTER OF (
                        "INFORMATION" = 'INFORMATION' : ARRAY OF (
                            "INFORMATION" = 'INFORMATION' : REGISTER OF (
                                "ID" = '#ID' : 'java.lang.Integer',
                                "VALID_FROM" = '#VALID_FROM' : 'java.lang.String',
                                "CODE" = '#CODE' : 'java.lang.String',
                                "LEVEL" = '#LEVEL' : 'java.lang.String',
                                "NAME" = 'NAME' : 'java.lang.String',
                                "VALUE" = 'VALUE' : REGISTER OF (
                                    "BASE_TYPE" = '#BASE_TYPE' : 'java.lang.String',
                                    "VALUE" = 'VALUE' : 'java.lang.String'
                                )
                            )
                        )
                    )
                )
            )
        )
    )
    );

CHOWN admin WRAPPER XML ds_xml_kiidoc_copy LASTMODIFICATIONUSER admin;

# #######################################
# STORED PROCEDURES of test_db
# #######################################
# No stored procedures in database test_db
# #######################################
# TYPES of test_db
# #######################################
DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE" AS REGISTER OF ("BASE_TYPE":text, "VALUE":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION" AS REGISTER OF ("CODE":text, "RESULT":boolean, "CONDITION":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_FUND" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_FUND" AS REGISTER OF ("CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS" AS REGISTER OF ("ISIN":text, "CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SPONSOR" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SPONSOR" AS REGISTER OF ("CODE":text, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND" AS REGISTER OF ("CODE":int, "NAME":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY" AS REGISTER OF ("COUNTRY":text);

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION" AS REGISTER OF ("ID":int, "VALID_FROM":text, "CODE":text, "LEVEL":text, "NAME":text, "VALUE":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION_VALUE");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS_CONDITION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS_CONDITION" AS ARRAY OF "ds_xml_kiidoc_copy_CONDITIONS_CONDITION_CONDITION";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_HIERARCHY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_HIERARCHY" AS REGISTER OF ("SPONSOR":"ds_xml_kiidoc_copy_HIERARCHY_SPONSOR", "FUND":"ds_xml_kiidoc_copy_HIERARCHY_FUND", "SUB_FOND":"ds_xml_kiidoc_copy_HIERARCHY_SUB_FOND", "SHARE_CLASS":"ds_xml_kiidoc_copy_HIERARCHY_SHARE_CLASS");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY" AS ARRAY OF "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY_register_COUNTRY";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION" AS ARRAY OF "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION_INFORMATION";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CONDITIONS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CONDITIONS" AS REGISTER OF ("CONDITION":"ds_xml_kiidoc_copy_CONDITIONS_CONDITION");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES" AS REGISTER OF ("COUNTRY":"ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES_COUNTRY");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS" AS REGISTER OF ("INFORMATION":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS_INFORMATION");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_PROPERTIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_PROPERTIES" AS REGISTER OF ("ID":int, "PROJECT_ID":int, "NAME":text, "ISIN":text, "FILE_NAME":text, "LANGUAGE_CODE":text, "VALID_FROM":text, "CREATION_DATE":text, "COUNTRIES":"ds_xml_kiidoc_copy_PROPERTIES_COUNTRIES");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY" AS REGISTER OF ("CODE":text, "INFORMATIONS":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY_INFORMATIONS");

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY" AS ARRAY OF "ds_xml_kiidoc_copy_CATEGORIES_CATEGORY_CATEGORY";

DROP TYPE IF EXISTS "ds_xml_kiidoc_copy_CATEGORIES" CASCADE;

CREATE TYPE "ds_xml_kiidoc_copy_CATEGORIES" AS REGISTER OF ("CATEGORY":"ds_xml_kiidoc_copy_CATEGORIES_CATEGORY");

# #######################################
# MAPS of test_db
# #######################################
# No maps in database test_db
# #######################################
# BASE VIEWS of test_db
# #######################################
DROP VIEW IF EXISTS bv_sharepoint CASCADE;

CREATE TABLE bv_sharepoint I18N be_bnpp_am (
        "ContentTypeID":text (sourcetypeid = '12'), 
        "ApproverComments":text (sourcetypeid = '12'), 
        "Name":text (sourcetypeid = '12'), 
        "Title":text (sourcetypeid = '12'), 
        "DocumentIDValue":text (sourcetypeid = '12'), 
        "DocumentID":text (sourcetypeid = '12'), 
        "ApprovalStatus":text (sourcetypeid = '12'), 
        "ActivityTypeId":int (sourcetypeid = '4'), 
        "DocumentTypeId":int (sourcetypeid = '4'), 
        "ITLanguageValue":text (sourcetypeid = '12'), 
        "APPCodeId":int (sourcetypeid = '4'), 
        "Description":text (sourcetypeid = '12'), 
        "Manager1Id":int (sourcetypeid = '4'), 
        "Manager2Id":int (sourcetypeid = '4'), 
        "URL":text (sourcetypeid = '12'), 
        "Approval":int (sourcetypeid = '4'), 
        "Id":int (sourcetypeid = '4'), 
        "ContentType":text (sourcetypeid = '12'), 
        "Created":date (sourcetypeid = '93'), 
        "CreatedById":int (sourcetypeid = '4'), 
        "Modified":date (sourcetypeid = '93'), 
        "ModifiedById":int (sourcetypeid = '4'), 
        "CopySource":text (sourcetypeid = '12'), 
        "Path":text (sourcetypeid = '12'), 
        "CheckedOutToId":int (sourcetypeid = '4'), 
        "VirusStatus":text (sourcetypeid = '12'), 
        "IsCurrentVersion":boolean (sourcetypeid = '16'), 
        "Owshiddenversion":int (sourcetypeid = '4'), 
        "Version":text (sourcetypeid = '12')
    )
    FOLDER = '/02 - base views/coreact'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_sharepoint(
        I18N be_bnpp_am
        CONSTRAINTS (
             ADD "ContentTypeID" (any) OPT ANY
             ADD "ApproverComments" (any) OPT ANY
             ADD "Name" (any) OPT ANY
             ADD "Title" (any) OPT ANY
             ADD "DocumentIDValue" (any) OPT ANY
             ADD "DocumentID" (any) OPT ANY
             ADD "ApprovalStatus" (any) OPT ANY
             ADD "ActivityTypeId" (any) OPT ANY
             ADD "DocumentTypeId" (any) OPT ANY
             ADD "ITLanguageValue" (any) OPT ANY
             ADD "APPCodeId" (any) OPT ANY
             ADD "Description" (any) OPT ANY
             ADD "Manager1Id" (any) OPT ANY
             ADD "Manager2Id" (any) OPT ANY
             ADD "URL" (any) OPT ANY
             ADD "Approval" (any) OPT ANY
             ADD "Id" (any) OPT ANY
             ADD "ContentType" (any) OPT ANY
             ADD "Created" (any) OPT ANY
             ADD "CreatedById" (any) OPT ANY
             ADD "Modified" (any) OPT ANY
             ADD "ModifiedById" (any) OPT ANY
             ADD "CopySource" (any) OPT ANY
             ADD "Path" (any) OPT ANY
             ADD "CheckedOutToId" (any) OPT ANY
             ADD "VirusStatus" (any) OPT ANY
             ADD "IsCurrentVersion" (any) OPT ANY
             ADD "Owshiddenversion" (any) OPT ANY
             ADD "Version" (any) OPT ANY
        )
        OUTPUTLIST ("APPCodeId", "ActivityTypeId", "Approval", "ApprovalStatus", "ApproverComments", "CheckedOutToId", "ContentType", "ContentTypeID", "CopySource", "Created", "CreatedById", "Description", "DocumentID", "DocumentIDValue", "DocumentTypeId", "ITLanguageValue", "Id", "IsCurrentVersion", "Manager1Id", "Manager2Id", "Modified", "ModifiedById", "Name", "Owshiddenversion", "Path", "Title", "URL", "Version", "VirusStatus"
        )
        WRAPPER (custom bv_sharepoint)
    );

CHOWN admin VIEW bv_sharepoint LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_table_historical CASCADE;

CREATE TABLE bv_table_historical I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        datum:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        description:text (sourcetypesize = '50', sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    CACHE OFF
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_table_historical(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD datum (any) OPT ANY
             ADD description (any) OPT ANY
        )
        OUTPUTLIST (datum, description, id
        )
        WRAPPER (jdbc bv_table_historical)
        ALTERNATIVE_WRAPPERS (jdbc sqlexpress_bv_table_historical)
    )
    DELEGATESTATSQUERY = false
    SMART_THEN_ATSOURCE_THROUGH_VDP;

CHOWN admin VIEW bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_table_operational CASCADE;

CREATE TABLE bv_table_operational I18N be_euro (
        id:int (sourcetypedecimals = '0', sourcetyperadix = '10', sourcetypesize = '10', sourcetypeid = '4'), 
        datum:timestamp (sourcetypedecimals = '3', sourcetypesize = '23', sourcetypeid = '93'), 
        description:text (sourcetypesize = '50', sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/02 - base_views'
    CACHE OFF
    BATCHSIZEINCACHE DEFAULT
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD bv_table_operational(
        I18N be_euro
        CONSTRAINTS (
             ADD id (any) OPT ANY
             ADD datum (any) OPT ANY
             ADD description (any) OPT ANY
        )
        OUTPUTLIST (datum, description, id
        )
        WRAPPER (jdbc bv_table_operational)
    )
    DELEGATESTATSQUERY = false
    SMART_THEN_ATSOURCE_THROUGH_VDP;

CHOWN admin VIEW bv_table_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS bv_xml_kiidoc_share CASCADE;

CREATE TABLE bv_xml_kiidoc_share I18N be_bnpp_am (
        "FILENAME":text (defaultvalue = 'KIIDOC-2017-11-08-fr-FR_LU-2017-11-08-FR0013041530.xml'), 
        "PROPERTIES":"ds_xml_kiidoc_copy_PROPERTIES", 
        "HIERARCHY":"ds_xml_kiidoc_copy_HIERARCHY", 
        "CONDITIONS":"ds_xml_kiidoc_copy_CONDITIONS", 
        "CATEGORIES":"ds_xml_kiidoc_copy_CATEGORIES"
    )
    FOLDER = '/02 - base views/coreact'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_xml_kiidoc_copy(
        I18N be_bnpp_am
        CONSTRAINTS (
             ADD "FILENAME" (=) OBL ONE
             ADD "PROPERTIES" NOS ZERO ()
             ADD "PROPERTIES"."ID" NOS ZERO ()
             ADD "PROPERTIES"."PROJECT_ID" NOS ZERO ()
             ADD "PROPERTIES"."NAME" NOS ZERO ()
             ADD "PROPERTIES"."ISIN" NOS ZERO ()
             ADD "PROPERTIES"."FILE_NAME" NOS ZERO ()
             ADD "PROPERTIES"."LANGUAGE_CODE" NOS ZERO ()
             ADD "PROPERTIES"."VALID_FROM" NOS ZERO ()
             ADD "PROPERTIES"."CREATION_DATE" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY" NOS ZERO ()
             ADD "PROPERTIES"."COUNTRIES"."COUNTRY"."COUNTRY" NOS ZERO ()
             ADD "HIERARCHY" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SPONSOR"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."FUND" NOS ZERO ()
             ADD "HIERARCHY"."FUND"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."FUND"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SUB_FOND"."NAME" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."ISIN" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."CODE" NOS ZERO ()
             ADD "HIERARCHY"."SHARE_CLASS"."NAME" NOS ZERO ()
             ADD "CONDITIONS" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."CODE" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."RESULT" NOS ZERO ()
             ADD "CONDITIONS"."CONDITION"."CONDITION" NOS ZERO ()
             ADD "CATEGORIES" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."CODE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."ID" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALID_FROM" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."CODE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."LEVEL" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."NAME" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE"."BASE_TYPE" NOS ZERO ()
             ADD "CATEGORIES"."CATEGORY"."INFORMATIONS"."INFORMATION"."VALUE"."VALUE" NOS ZERO ()
        )
        OUTPUTLIST ("CATEGORIES", "CONDITIONS", "HIERARCHY", "PROPERTIES"
        )
        WRAPPER (xml ds_xml_kiidoc_copy)
    );

CHOWN admin VIEW bv_xml_kiidoc_share LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map1 CASCADE;

CREATE TABLE ds_map1 I18N be_euro (
        column_0:int (sourcetypeid = '4'), 
        column_1:text (sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_map1(
        I18N be_euro
        CONSTRAINTS (
             ADD column_0 (any) OPT ANY
             ADD column_1 (any) OPT ANY
        )
        OUTPUTLIST (column_0, column_1
        )
        WRAPPER (custom ds_map1)
    );

CHOWN admin VIEW ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2 CASCADE;

CREATE TABLE ds_map2 I18N be_euro (
        column_0:int (sourcetypeid = '4'), 
        column_1:text (sourcetypeid = '12')
    )
    FOLDER = '/01 - connectivity_layer/01 - data_sources'
    CACHE OFF
    TIMETOLIVEINCACHE DEFAULT
    ADD SEARCHMETHOD ds_map2(
        I18N be_euro
        CONSTRAINTS (
             ADD column_0 (any) OPT ANY
             ADD column_1 (any) OPT ANY
        )
        OUTPUTLIST (column_0, column_1
        )
        WRAPPER (custom ds_map2)
    );

CHOWN admin VIEW ds_map2 LASTMODIFICATIONUSER admin;

# #######################################
# VIEWS of test_db
# #######################################
DROP VIEW IF EXISTS as_map1_j_ds_map2 CASCADE;

CREATE VIEW as_map1_j_ds_map2 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT ds_map1.column_0 AS column_0v, ds_map1.column_1 AS column_1v, ds_map2.column_0 AS column_0, ds_map2.column_1 AS column_1 FROM ds_map1 AS ds_map1, ds_map2 AS ds_map2;

ALTER VIEW as_map1_j_ds_map2
 LAYOUT (ds_map1 = [20, 20, 200, 66], ds_map2 = [250, 20, 200, 66]);

CHOWN admin VIEW as_map1_j_ds_map2 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2_j_ds_map1 CASCADE;

CREATE VIEW ds_map2_j_ds_map1 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT ds_map2.column_0 AS map2_column_0, ds_map2.column_1 AS map2_column_1, ds_map1.column_0 AS map1_column_0, ds_map1.column_1 AS map1_column_1 FROM ds_map2 AS ds_map2 NESTED LEFT OUTER JOIN ds_map1 AS ds_map1 ON ds_map2.column_0 = ds_map1.column_0 ;

ALTER VIEW ds_map2_j_ds_map1
 LAYOUT (ds_map2 = [20, 50, 200, 66], ds_map1 = [440, 20, 200, 66]);

CHOWN admin VIEW ds_map2_j_ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS ds_map2_u_ds_map1 CASCADE;

CREATE VIEW ds_map2_u_ds_map1 FOLDER = '/01 - connectivity_layer/01 - data_sources' AS SELECT column_0, column_1 FROM (SELECT * FROM ds_map2 UNION SELECT column_0, column_1 FROM ds_map1);

ALTER VIEW ds_map2_u_ds_map1
 LAYOUT (ds_map2 = [20, 20, 200, 66], ds_map1 = [250, 20, 200, 66]);

CHOWN admin VIEW ds_map2_u_ds_map1 LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_sharepoint_list CASCADE;

CREATE VIEW dv_01_sharepoint_list FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT bv_sharepoint."Name" AS "Name", bv_sharepoint."Title" AS "Title", bv_sharepoint."DocumentIDValue" AS "DocumentIDValue", bv_sharepoint."DocumentID" AS "DocumentID" FROM bv_sharepoint WHERE "Path" = '/APP Library/HORUS/99 - Archive';

CHOWN admin VIEW dv_01_sharepoint_list LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_sharepoint_list
 LAYOUT (bv_sharepoint = [20, 20, 222, 606]);

DROP VIEW IF EXISTS dv_01_table_historical_max CASCADE;

CREATE VIEW dv_01_table_historical_max FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT max(datum) AS max_date FROM bv_table_historical;

CHOWN admin VIEW dv_01_table_historical_max LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_table_historical_max
 LAYOUT (bv_table_historical = [20, 20, 200, 86]);

DROP VIEW IF EXISTS dv_01_table_operational_min CASCADE;

CREATE VIEW dv_01_table_operational_min FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT min(datum) AS max_date FROM bv_table_operational;

CHOWN admin VIEW dv_01_table_operational_min LASTMODIFICATIONUSER admin;

ALTER VIEW dv_01_table_operational_min
 LAYOUT (bv_table_operational = [20, 20, 200, 86]);

DROP VIEW IF EXISTS p_bv_table_historical CASCADE;

CREATE VIEW p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT bv_table_historical.id AS id, bv_table_historical.datum AS datum, bv_table_historical.description AS description FROM bv_table_historical;

CHOWN admin VIEW p_bv_table_historical LASTMODIFICATIONUSER admin;

ALTER VIEW p_bv_table_historical
 LAYOUT (bv_table_historical = [20, 20, 200, 86]);

DROP VIEW IF EXISTS p_bv_table_operational CASCADE;

CREATE VIEW p_bv_table_operational FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT bv_table_operational.id AS id, bv_table_operational.datum AS datum, bv_table_operational.description AS description FROM bv_table_operational;

CHOWN admin VIEW p_bv_table_operational LASTMODIFICATIONUSER admin;

ALTER VIEW p_bv_table_operational
 LAYOUT (bv_table_operational = [20, 20, 200, 86]);

DROP VIEW IF EXISTS union_historical_operational CASCADE;

CREATE VIEW union_historical_operational FOLDER = '/02 - integration_layer' AS SELECT id, datum, description FROM (SELECT * FROM bv_table_historical UNION SELECT description, id, datum FROM bv_table_operational);

ALTER VIEW union_historical_operational
 LAYOUT (bv_table_historical = [20, 20, 200, 86], bv_table_operational = [250, 20, 200, 86]);

CHOWN admin VIEW union_historical_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_historical_max_j_p_bv_table_historical CASCADE;

CREATE VIEW dv_01_table_historical_max_j_p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT p_bv_table_historical.id AS id, p_bv_table_historical.datum AS datum, p_bv_table_historical.description AS description FROM dv_01_table_historical_max AS dv_01_table_historical_max NESTED INNER JOIN p_bv_table_historical AS p_bv_table_historical ON dv_01_table_historical_max.max_date > p_bv_table_historical.datum  WHERE p_bv_table_historical.datum <= dv_01_table_historical_max.max_date;

ALTER VIEW dv_01_table_historical_max_j_p_bv_table_historical
 LAYOUT (dv_01_table_historical_max = [20, 20, 200, 46], p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_historical_max_j_p_bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_operational_max_j_p_bv_table_operational CASCADE;

CREATE VIEW dv_01_table_operational_max_j_p_bv_table_operational FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT p_bv_table_operational.id AS id, p_bv_table_operational.datum AS datum, p_bv_table_operational.description AS description FROM dv_01_table_operational_min AS dv_01_table_operational_max NESTED INNER JOIN p_bv_table_operational AS p_bv_table_operational ON dv_01_table_operational_max.max_date < p_bv_table_operational.datum  WHERE p_bv_table_operational.datum > dv_01_table_operational_max.max_date;

ALTER VIEW dv_01_table_operational_max_j_p_bv_table_operational
 LAYOUT (dv_01_table_operational_min = [20, 50, 200, 46], p_bv_table_operational = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_operational_max_j_p_bv_table_operational LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_02_xml_share_kiidoc CASCADE;

CREATE VIEW dv_02_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT bv_xml_kiidoc_share."PROPERTIES" AS "PROPERTIES", bv_xml_kiidoc_share."HIERARCHY" AS "HIERARCHY", bv_xml_kiidoc_share."CONDITIONS" AS "CONDITIONS", (bv_xml_kiidoc_share."CATEGORIES")."CATEGORY" AS "CATEGORY", dv_01_sharepoint_list."Name" AS "Name" FROM bv_xml_kiidoc_share AS bv_xml_kiidoc_share RIGHT OUTER JOIN dv_01_sharepoint_list AS dv_01_sharepoint_list ON bv_xml_kiidoc_share."FILENAME" = dv_01_sharepoint_list."Name" ;

ALTER VIEW dv_02_xml_share_kiidoc
 LAYOUT (bv_xml_kiidoc_share = [20, 20, 200, 126], dv_01_sharepoint_list = [350, 10, 200, 106]);

CHOWN admin VIEW dv_02_xml_share_kiidoc LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS p_bv_table_operational_u_p_bv_table_historical CASCADE;

CREATE VIEW p_bv_table_operational_u_p_bv_table_historical FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT id, datum, description FROM (SELECT * FROM p_bv_table_operational UNION SELECT description, datum, id FROM p_bv_table_historical);

ALTER VIEW p_bv_table_operational_u_p_bv_table_historical
 LAYOUT (p_bv_table_operational = [20, 20, 200, 86], p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW p_bv_table_operational_u_p_bv_table_historical LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo CASCADE;

CREATE VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo FOLDER = '/01 - connectivity_layer/02 - base_views' AS SELECT id, datum, description FROM (SELECT * FROM dv_01_table_operational_max_j_p_bv_table_operational UNION SELECT datum, id, description FROM dv_01_table_historical_max_j_p_bv_table_historical);

ALTER VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo
 LAYOUT (dv_01_table_operational_max_j_p_bv_table_operational = [20, 20, 200, 86], dv_01_table_historical_max_j_p_bv_table_historical = [250, 20, 200, 86]);

CHOWN admin VIEW dv_01_table_operational_max_j_p_bv_table_operational_u_dv_01_table_historical_max_j_p_bv_table_histo LASTMODIFICATIONUSER admin;

DROP VIEW IF EXISTS dv_03_xml_share_kiidoc CASCADE;

CREATE VIEW dv_03_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT ("INFORMATIONS")."INFORMATION" AS "INFORMATION", "Name" AS "Name", "CODE" AS "CODE" FROM FLATTEN dv_02_xml_share_kiidoc AS v ( v."CATEGORY") WHERE v."CODE" = 'OBJECTIVES';

CHOWN admin VIEW dv_03_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_03_xml_share_kiidoc
 LAYOUT (dv_02_xml_share_kiidoc = [20, 20, 519, 747]);

DROP VIEW IF EXISTS dv_04_xml_share_kiidoc CASCADE;

CREATE VIEW dv_04_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT "Name" AS "Name_file", "CODE" AS "CODE", ("VALUE")."VALUE" AS "VALUE" FROM FLATTEN dv_03_xml_share_kiidoc AS v ( v."INFORMATION");

CHOWN admin VIEW dv_04_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_04_xml_share_kiidoc
 LAYOUT (dv_03_xml_share_kiidoc = [20, 20, 519, 246]);

DROP VIEW IF EXISTS dv_05_xml_share_kiidoc CASCADE;

CREATE VIEW dv_05_xml_share_kiidoc FOLDER = '/03 - derived views/01 - projections/coreact' AS SELECT substring("Name_file", 0, (position('.' IN "Name_file")-1)) AS "Name_file", replace(replace(group_concat(' ', "VALUE"), char(10), ''), char(32), '') AS "Objective" FROM dv_04_xml_share_kiidoc GROUP BY "Name_file";

CHOWN admin VIEW dv_05_xml_share_kiidoc LASTMODIFICATIONUSER admin;

ALTER VIEW dv_05_xml_share_kiidoc
 LAYOUT (dv_04_xml_share_kiidoc = [20, 20, 205, 86]);

# #######################################
# ASSOCIATIONS of test_db
# #######################################
# No associations in database test_db
# #######################################
# WEBSERVICES of test_db
# #######################################
DROP REST WEBSERVICE IF EXISTS bv_xml_kiidoc_share;

CREATE REST WEBSERVICE bv_xml_kiidoc_share
    CONNECTION (
        CHUNKSIZE = 1000
        CHUNKTIMEOUT = 90000
        QUERYTIMEOUT = 900000
        POOLENABLED = true
        POOLINITSIZE = 0
        POOLMAXACTIVE = 30
    )
    DEFAULTREPRESENTATION = HTML
    SUPPORTEDREPRESENTATIONS (HTML, XML, JSON)
    RESOURCES (
        VIEW bv_xml_kiidoc_share FIELDS (
            "FILENAME" : 'text' OBL, 
            "PROPERTIES" : 'ds_xml_kiidoc_copy_PROPERTIES', 
            "HIERARCHY" : 'ds_xml_kiidoc_copy_HIERARCHY', 
            "CONDITIONS" : 'ds_xml_kiidoc_copy_CONDITIONS', 
            "CATEGORIES" : 'ds_xml_kiidoc_copy_CATEGORIES'
        )
    )
    OPTIONS ( NULLVALUESASEMPTYXMLELEMENTS = false ) 
    OPENAPI2 ( API_VERSION = '1.0.0' ) 
    FOLDER = '/02 - base views/coreact';

CHOWN admin WEBSERVICE bv_xml_kiidoc_share LASTMODIFICATIONUSER admin;

# #######################################
# WIDGETS of test_db
# #######################################
# No widgets in database test_db
# #######################################
# WEBCONTAINER WEB SERVICE DEPLOYMENTS of test_db
# #######################################
# No deployed web services in database test_db
# #######################################
# WEBCONTAINER WIDGET DEPLOYMENTS of test_db
# #######################################
# No deployed widgets in database test_db
# #######################################
# Closing connection with database test_db
# #######################################
CLOSE;

# #######################################
# Connecting to database admin
# #######################################
CONNECT DATABASE ADMIN;

# #######################################
# USER PRIVILEGES
# #######################################
ALTER USER maarten
GRANT ROLE allusers
GRANT CONNECT ON admin
GRANT CONNECT, CREATE_VIEW ON mpet_test
GRANT METADATA, EXECUTE ON mpet_test.bv_v_yardppcontainers
GRANT EXECUTE WHEN ANY(reservationid, containers, carriernamein, visitcodein) THEN 'container = 1' MASKING ON mpet_test.bv_v_yardppcontainers
GRANT METADATA, EXECUTE ON mpet_test.bv_v_yardppreservations
GRANT METADATA, EXECUTE ON mpet_test.bv_v_yardppreservations_j_bv_v_yardppcontainers
GRANT METADATA, EXECUTE ON mpet_test.dv_01_ppcontainers
GRANT METADATA, EXECUTE ON mpet_test.dv_01_v_yardppreservations_1
GRANT METADATA, EXECUTE ON mpet_test.dv_01_v_yardppreservations_2
GRANT METADATA, EXECUTE ON mpet_test.dv_02_v_yardppreservations_2
GRANT METADATA, EXECUTE ON mpet_test.dv_03_a
GRANT METADATA, EXECUTE ON mpet_test.dv_04_reservations
GRANT METADATA, EXECUTE ON mpet_test.dv_05_a
GRANT METADATA, EXECUTE ON mpet_test.dv_06_result
GRANT METADATA, EXECUTE ON mpet_test.i_bv_v_yardppcontainers
GRANT METADATA, EXECUTE ON mpet_test.i_bv_v_yardppreservations
GRANT METADATA, EXECUTE ON mpet_test.p_bv_v_yardppcontainers
GRANT METADATA, EXECUTE, WRITE, INSERT, UPDATE, DELETE ON mpet_test.p_bv_v_yardppcontainers_j_bv_v_yardppreservations;

# #######################################
# ROLE PRIVILEGES
# #######################################
# #######################################
# RESOURCE MANAGER PLANS
# #######################################
DROP RESOURCE_MANAGER PLAN IF EXISTS test CASCADE;

CREATE OR REPLACE RESOURCE_MANAGER PLAN test CONDITION true ACTION 'SET_MAX_NUMBER_OF_QUERIES_PER_TIME_UNIT' PARAMETERS ('TimeUnit' = 'month', 'NumOfQueriesByTimeUnit' = 2);

# #######################################
# RESOURCE MANAGER RULES
# #######################################
DROP RESOURCE_MANAGER RULE IF EXISTS test;

CREATE OR REPLACE RESOURCE_MANAGER RULE test CONDITION true RESOURCE_MANAGER PLAN test;

# #######################################
# Closing connection with database admin
# #######################################
CLOSE;

# #######################################
# WARNINGS
# #######################################
# Error loading wrapper 'cache_loads_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'datasources_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'errors_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'monitor_logging_dates_aux' in database 'diagnostic'
# Error loading wrapper 'requests_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'resources_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'sessions_instant_log_20180922181056033' in database 'diagnostic'
# Error loading wrapper 'threads_instant_log_20180922181056033' in database 'diagnostic'
